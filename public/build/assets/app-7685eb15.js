var ae="top",ue="bottom",fe="right",ce="left",si="auto",pt=[ae,ue,fe,ce],Xe="start",ct="end",vr="clippingParents",Zi="viewport",rt="popper",mr="reference",$i=pt.reduce(function(t,e){return t.concat([e+"-"+Xe,e+"-"+ct])},[]),Qi=[].concat(pt,[si]).reduce(function(t,e){return t.concat([e,e+"-"+Xe,e+"-"+ct])},[]),Sr="beforeRead",br="read",Cr="afterRead",Er="beforeMain",yr="main",wr="afterMain",Ar="beforeWrite",Tr="write",Lr="afterWrite",Dr=[Sr,br,Cr,Er,yr,wr,Ar,Tr,Lr];function Le(t){return t?(t.nodeName||"").toLowerCase():null}function _e(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Je(t){var e=_e(t).Element;return t instanceof e||t instanceof Element}function pe(t){var e=_e(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function es(t){if(typeof ShadowRoot>"u")return!1;var e=_e(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function zn(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var h=e.styles[i]||{},m=e.attributes[i]||{},A=e.elements[i];!pe(A)||!Le(A)||(Object.assign(A.style,h),Object.keys(m).forEach(function(E){var r=m[E];r===!1?A.removeAttribute(E):A.setAttribute(E,r===!0?"":r)}))})}function Kn(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(h){var m=e.elements[h],A=e.attributes[h]||{},E=Object.keys(e.styles.hasOwnProperty(h)?e.styles[h]:i[h]),r=E.reduce(function(c,d){return c[d]="",c},{});!pe(m)||!Le(m)||(Object.assign(m.style,r),Object.keys(A).forEach(function(c){m.removeAttribute(c)}))})}}const ts={name:"applyStyles",enabled:!0,phase:"write",fn:zn,effect:Kn,requires:["computeStyles"]};function Ae(t){return t.split("-")[0]}var Ge=Math.max,Xt=Math.min,lt=Math.round;function Fi(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Rr(){return!/^((?!chrome|android).)*safari/i.test(Fi())}function ht(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var h=t.getBoundingClientRect(),m=1,A=1;e&&pe(t)&&(m=t.offsetWidth>0&&lt(h.width)/t.offsetWidth||1,A=t.offsetHeight>0&&lt(h.height)/t.offsetHeight||1);var E=Je(t)?_e(t):window,r=E.visualViewport,c=!Rr()&&i,d=(h.left+(c&&r?r.offsetLeft:0))/m,f=(h.top+(c&&r?r.offsetTop:0))/A,l=h.width/m,v=h.height/A;return{width:l,height:v,top:f,right:d+l,bottom:f+v,left:d,x:d,y:f}}function is(t){var e=ht(t),i=t.offsetWidth,h=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-h)<=1&&(h=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:h}}function kr(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&es(i)){var h=e;do{if(h&&t.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function xe(t){return _e(t).getComputedStyle(t)}function qn(t){return["table","td","th"].indexOf(Le(t))>=0}function We(t){return((Je(t)?t.ownerDocument:t.document)||window.document).documentElement}function ri(t){return Le(t)==="html"?t:t.assignedSlot||t.parentNode||(es(t)?t.host:null)||We(t)}function Es(t){return!pe(t)||xe(t).position==="fixed"?null:t.offsetParent}function Yn(t){var e=/firefox/i.test(Fi()),i=/Trident/i.test(Fi());if(i&&pe(t)){var h=xe(t);if(h.position==="fixed")return null}var m=ri(t);for(es(m)&&(m=m.host);pe(m)&&["html","body"].indexOf(Le(m))<0;){var A=xe(m);if(A.transform!=="none"||A.perspective!=="none"||A.contain==="paint"||["transform","perspective"].indexOf(A.willChange)!==-1||e&&A.willChange==="filter"||e&&A.filter&&A.filter!=="none")return m;m=m.parentNode}return null}function kt(t){for(var e=_e(t),i=Es(t);i&&qn(i)&&xe(i).position==="static";)i=Es(i);return i&&(Le(i)==="html"||Le(i)==="body"&&xe(i).position==="static")?e:i||Yn(t)||e}function ss(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Tt(t,e,i){return Ge(t,Xt(e,i))}function Gn(t,e,i){var h=Tt(t,e,i);return h>i?i:h}function Or(){return{top:0,right:0,bottom:0,left:0}}function xr(t){return Object.assign({},Or(),t)}function Mr(t,e){return e.reduce(function(i,h){return i[h]=t,i},{})}var Xn=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,xr(typeof e!="number"?e:Mr(e,pt))};function Jn(t){var e,i=t.state,h=t.name,m=t.options,A=i.elements.arrow,E=i.modifiersData.popperOffsets,r=Ae(i.placement),c=ss(r),d=[ce,fe].indexOf(r)>=0,f=d?"height":"width";if(!(!A||!E)){var l=Xn(m.padding,i),v=is(A),S=c==="y"?ae:ce,b=c==="y"?ue:fe,g=i.rects.reference[f]+i.rects.reference[c]-E[c]-i.rects.popper[f],s=E[c]-i.rects.reference[c],o=kt(A),n=o?c==="y"?o.clientHeight||0:o.clientWidth||0:0,a=g/2-s/2,u=l[S],p=n-v[f]-l[b],C=n/2-v[f]/2+a,w=Tt(u,C,p),_=c;i.modifiersData[h]=(e={},e[_]=w,e.centerOffset=w-C,e)}}function Zn(t){var e=t.state,i=t.options,h=i.element,m=h===void 0?"[data-popper-arrow]":h;m!=null&&(typeof m=="string"&&(m=e.elements.popper.querySelector(m),!m)||kr(e.elements.popper,m)&&(e.elements.arrow=m))}const Br={name:"arrow",enabled:!0,phase:"main",fn:Jn,effect:Zn,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function dt(t){return t.split("-")[1]}var Qn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eo(t,e){var i=t.x,h=t.y,m=e.devicePixelRatio||1;return{x:lt(i*m)/m||0,y:lt(h*m)/m||0}}function ys(t){var e,i=t.popper,h=t.popperRect,m=t.placement,A=t.variation,E=t.offsets,r=t.position,c=t.gpuAcceleration,d=t.adaptive,f=t.roundOffsets,l=t.isFixed,v=E.x,S=v===void 0?0:v,b=E.y,g=b===void 0?0:b,s=typeof f=="function"?f({x:S,y:g}):{x:S,y:g};S=s.x,g=s.y;var o=E.hasOwnProperty("x"),n=E.hasOwnProperty("y"),a=ce,u=ae,p=window;if(d){var C=kt(i),w="clientHeight",_="clientWidth";if(C===_e(i)&&(C=We(i),xe(C).position!=="static"&&r==="absolute"&&(w="scrollHeight",_="scrollWidth")),C=C,m===ae||(m===ce||m===fe)&&A===ct){u=ue;var y=l&&C===p&&p.visualViewport?p.visualViewport.height:C[w];g-=y-h.height,g*=c?1:-1}if(m===ce||(m===ae||m===ue)&&A===ct){a=fe;var D=l&&C===p&&p.visualViewport?p.visualViewport.width:C[_];S-=D-h.width,S*=c?1:-1}}var M=Object.assign({position:r},d&&Qn),R=f===!0?eo({x:S,y:g},_e(i)):{x:S,y:g};if(S=R.x,g=R.y,c){var x;return Object.assign({},M,(x={},x[u]=n?"0":"",x[a]=o?"0":"",x.transform=(p.devicePixelRatio||1)<=1?"translate("+S+"px, "+g+"px)":"translate3d("+S+"px, "+g+"px, 0)",x))}return Object.assign({},M,(e={},e[u]=n?g+"px":"",e[a]=o?S+"px":"",e.transform="",e))}function to(t){var e=t.state,i=t.options,h=i.gpuAcceleration,m=h===void 0?!0:h,A=i.adaptive,E=A===void 0?!0:A,r=i.roundOffsets,c=r===void 0?!0:r,d={placement:Ae(e.placement),variation:dt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:m,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ys(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:E,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ys(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const rs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:to,data:{}};var It={passive:!0};function io(t){var e=t.state,i=t.instance,h=t.options,m=h.scroll,A=m===void 0?!0:m,E=h.resize,r=E===void 0?!0:E,c=_e(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return A&&d.forEach(function(f){f.addEventListener("scroll",i.update,It)}),r&&c.addEventListener("resize",i.update,It),function(){A&&d.forEach(function(f){f.removeEventListener("scroll",i.update,It)}),r&&c.removeEventListener("resize",i.update,It)}}const ns={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:io,data:{}};var so={left:"right",right:"left",bottom:"top",top:"bottom"};function jt(t){return t.replace(/left|right|bottom|top/g,function(e){return so[e]})}var ro={start:"end",end:"start"};function ws(t){return t.replace(/start|end/g,function(e){return ro[e]})}function os(t){var e=_e(t),i=e.pageXOffset,h=e.pageYOffset;return{scrollLeft:i,scrollTop:h}}function as(t){return ht(We(t)).left+os(t).scrollLeft}function no(t,e){var i=_e(t),h=We(t),m=i.visualViewport,A=h.clientWidth,E=h.clientHeight,r=0,c=0;if(m){A=m.width,E=m.height;var d=Rr();(d||!d&&e==="fixed")&&(r=m.offsetLeft,c=m.offsetTop)}return{width:A,height:E,x:r+as(t),y:c}}function oo(t){var e,i=We(t),h=os(t),m=(e=t.ownerDocument)==null?void 0:e.body,A=Ge(i.scrollWidth,i.clientWidth,m?m.scrollWidth:0,m?m.clientWidth:0),E=Ge(i.scrollHeight,i.clientHeight,m?m.scrollHeight:0,m?m.clientHeight:0),r=-h.scrollLeft+as(t),c=-h.scrollTop;return xe(m||i).direction==="rtl"&&(r+=Ge(i.clientWidth,m?m.clientWidth:0)-A),{width:A,height:E,x:r,y:c}}function cs(t){var e=xe(t),i=e.overflow,h=e.overflowX,m=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+m+h)}function Pr(t){return["html","body","#document"].indexOf(Le(t))>=0?t.ownerDocument.body:pe(t)&&cs(t)?t:Pr(ri(t))}function Lt(t,e){var i;e===void 0&&(e=[]);var h=Pr(t),m=h===((i=t.ownerDocument)==null?void 0:i.body),A=_e(h),E=m?[A].concat(A.visualViewport||[],cs(h)?h:[]):h,r=e.concat(E);return m?r:r.concat(Lt(ri(E)))}function Wi(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ao(t,e){var i=ht(t,!1,e==="fixed");return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}function As(t,e,i){return e===Zi?Wi(no(t,i)):Je(e)?ao(e,i):Wi(oo(We(t)))}function co(t){var e=Lt(ri(t)),i=["absolute","fixed"].indexOf(xe(t).position)>=0,h=i&&pe(t)?kt(t):t;return Je(h)?e.filter(function(m){return Je(m)&&kr(m,h)&&Le(m)!=="body"}):[]}function lo(t,e,i,h){var m=e==="clippingParents"?co(t):[].concat(e),A=[].concat(m,[i]),E=A[0],r=A.reduce(function(c,d){var f=As(t,d,h);return c.top=Ge(f.top,c.top),c.right=Xt(f.right,c.right),c.bottom=Xt(f.bottom,c.bottom),c.left=Ge(f.left,c.left),c},As(t,E,h));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function Ir(t){var e=t.reference,i=t.element,h=t.placement,m=h?Ae(h):null,A=h?dt(h):null,E=e.x+e.width/2-i.width/2,r=e.y+e.height/2-i.height/2,c;switch(m){case ae:c={x:E,y:e.y-i.height};break;case ue:c={x:E,y:e.y+e.height};break;case fe:c={x:e.x+e.width,y:r};break;case ce:c={x:e.x-i.width,y:r};break;default:c={x:e.x,y:e.y}}var d=m?ss(m):null;if(d!=null){var f=d==="y"?"height":"width";switch(A){case Xe:c[d]=c[d]-(e[f]/2-i[f]/2);break;case ct:c[d]=c[d]+(e[f]/2-i[f]/2);break}}return c}function ut(t,e){e===void 0&&(e={});var i=e,h=i.placement,m=h===void 0?t.placement:h,A=i.strategy,E=A===void 0?t.strategy:A,r=i.boundary,c=r===void 0?vr:r,d=i.rootBoundary,f=d===void 0?Zi:d,l=i.elementContext,v=l===void 0?rt:l,S=i.altBoundary,b=S===void 0?!1:S,g=i.padding,s=g===void 0?0:g,o=xr(typeof s!="number"?s:Mr(s,pt)),n=v===rt?mr:rt,a=t.rects.popper,u=t.elements[b?n:v],p=lo(Je(u)?u:u.contextElement||We(t.elements.popper),c,f,E),C=ht(t.elements.reference),w=Ir({reference:C,element:a,strategy:"absolute",placement:m}),_=Wi(Object.assign({},a,w)),y=v===rt?_:C,D={top:p.top-y.top+o.top,bottom:y.bottom-p.bottom+o.bottom,left:p.left-y.left+o.left,right:y.right-p.right+o.right},M=t.modifiersData.offset;if(v===rt&&M){var R=M[m];Object.keys(D).forEach(function(x){var N=[fe,ue].indexOf(x)>=0?1:-1,$=[ae,ue].indexOf(x)>=0?"y":"x";D[x]+=R[$]*N})}return D}function ho(t,e){e===void 0&&(e={});var i=e,h=i.placement,m=i.boundary,A=i.rootBoundary,E=i.padding,r=i.flipVariations,c=i.allowedAutoPlacements,d=c===void 0?Qi:c,f=dt(h),l=f?r?$i:$i.filter(function(b){return dt(b)===f}):pt,v=l.filter(function(b){return d.indexOf(b)>=0});v.length===0&&(v=l);var S=v.reduce(function(b,g){return b[g]=ut(t,{placement:g,boundary:m,rootBoundary:A,padding:E})[Ae(g)],b},{});return Object.keys(S).sort(function(b,g){return S[b]-S[g]})}function uo(t){if(Ae(t)===si)return[];var e=jt(t);return[ws(t),e,ws(e)]}function fo(t){var e=t.state,i=t.options,h=t.name;if(!e.modifiersData[h]._skip){for(var m=i.mainAxis,A=m===void 0?!0:m,E=i.altAxis,r=E===void 0?!0:E,c=i.fallbackPlacements,d=i.padding,f=i.boundary,l=i.rootBoundary,v=i.altBoundary,S=i.flipVariations,b=S===void 0?!0:S,g=i.allowedAutoPlacements,s=e.options.placement,o=Ae(s),n=o===s,a=c||(n||!b?[jt(s)]:uo(s)),u=[s].concat(a).reduce(function(Y,q){return Y.concat(Ae(q)===si?ho(e,{placement:q,boundary:f,rootBoundary:l,padding:d,flipVariations:b,allowedAutoPlacements:g}):q)},[]),p=e.rects.reference,C=e.rects.popper,w=new Map,_=!0,y=u[0],D=0;D<u.length;D++){var M=u[D],R=Ae(M),x=dt(M)===Xe,N=[ae,ue].indexOf(R)>=0,$=N?"width":"height",U=ut(e,{placement:M,boundary:f,rootBoundary:l,altBoundary:v,padding:d}),W=N?x?fe:ce:x?ue:ae;p[$]>C[$]&&(W=jt(W));var L=jt(W),k=[];if(A&&k.push(U[R]<=0),r&&k.push(U[W]<=0,U[L]<=0),k.every(function(Y){return Y})){y=M,_=!1;break}w.set(M,k)}if(_)for(var O=b?3:1,B=function(q){var ee=u.find(function(T){var P=w.get(T);if(P)return P.slice(0,q).every(function(F){return F})});if(ee)return y=ee,"break"},j=O;j>0;j--){var z=B(j);if(z==="break")break}e.placement!==y&&(e.modifiersData[h]._skip=!0,e.placement=y,e.reset=!0)}}const Nr={name:"flip",enabled:!0,phase:"main",fn:fo,requiresIfExists:["offset"],data:{_skip:!1}};function Ts(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Ls(t){return[ae,fe,ue,ce].some(function(e){return t[e]>=0})}function _o(t){var e=t.state,i=t.name,h=e.rects.reference,m=e.rects.popper,A=e.modifiersData.preventOverflow,E=ut(e,{elementContext:"reference"}),r=ut(e,{altBoundary:!0}),c=Ts(E,h),d=Ts(r,m,A),f=Ls(c),l=Ls(d);e.modifiersData[i]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:l},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":l})}const Hr={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_o};function po(t,e,i){var h=Ae(t),m=[ce,ae].indexOf(h)>=0?-1:1,A=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,E=A[0],r=A[1];return E=E||0,r=(r||0)*m,[ce,fe].indexOf(h)>=0?{x:r,y:E}:{x:E,y:r}}function go(t){var e=t.state,i=t.options,h=t.name,m=i.offset,A=m===void 0?[0,0]:m,E=Qi.reduce(function(f,l){return f[l]=po(l,e.rects,A),f},{}),r=E[e.placement],c=r.x,d=r.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=d),e.modifiersData[h]=E}const $r={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:go};function vo(t){var e=t.state,i=t.name;e.modifiersData[i]=Ir({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const ls={name:"popperOffsets",enabled:!0,phase:"read",fn:vo,data:{}};function mo(t){return t==="x"?"y":"x"}function So(t){var e=t.state,i=t.options,h=t.name,m=i.mainAxis,A=m===void 0?!0:m,E=i.altAxis,r=E===void 0?!1:E,c=i.boundary,d=i.rootBoundary,f=i.altBoundary,l=i.padding,v=i.tether,S=v===void 0?!0:v,b=i.tetherOffset,g=b===void 0?0:b,s=ut(e,{boundary:c,rootBoundary:d,padding:l,altBoundary:f}),o=Ae(e.placement),n=dt(e.placement),a=!n,u=ss(o),p=mo(u),C=e.modifiersData.popperOffsets,w=e.rects.reference,_=e.rects.popper,y=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,D=typeof y=="number"?{mainAxis:y,altAxis:y}:Object.assign({mainAxis:0,altAxis:0},y),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(C){if(A){var x,N=u==="y"?ae:ce,$=u==="y"?ue:fe,U=u==="y"?"height":"width",W=C[u],L=W+s[N],k=W-s[$],O=S?-_[U]/2:0,B=n===Xe?w[U]:_[U],j=n===Xe?-_[U]:-w[U],z=e.elements.arrow,Y=S&&z?is(z):{width:0,height:0},q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Or(),ee=q[N],T=q[$],P=Tt(0,w[U],Y[U]),F=a?w[U]/2-O-P-ee-D.mainAxis:B-P-ee-D.mainAxis,H=a?-w[U]/2+O+P+T+D.mainAxis:j+P+T+D.mainAxis,X=e.elements.arrow&&kt(e.elements.arrow),K=X?u==="y"?X.clientTop||0:X.clientLeft||0:0,Q=(x=M==null?void 0:M[u])!=null?x:0,se=W+F-Q-K,re=W+H-Q,De=Tt(S?Xt(L,se):L,W,S?Ge(k,re):k);C[u]=De,R[u]=De-W}if(r){var Z,Ve=u==="x"?ae:ce,Ct=u==="x"?ue:fe,Se=C[p],Be=p==="y"?"height":"width",ze=Se+s[Ve],oe=Se-s[Ct],Re=[ae,ce].indexOf(o)!==-1,de=(Z=M==null?void 0:M[p])!=null?Z:0,Pe=Re?ze:Se-w[Be]-_[Be]-de+D.altAxis,tt=Re?Se+w[Be]+_[Be]-de-D.altAxis:oe,be=S&&Re?Gn(Pe,Se,tt):Tt(S?Pe:ze,Se,S?tt:oe);C[p]=be,R[p]=be-Se}e.modifiersData[h]=R}}const Fr={name:"preventOverflow",enabled:!0,phase:"main",fn:So,requiresIfExists:["offset"]};function bo(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Co(t){return t===_e(t)||!pe(t)?os(t):bo(t)}function Eo(t){var e=t.getBoundingClientRect(),i=lt(e.width)/t.offsetWidth||1,h=lt(e.height)/t.offsetHeight||1;return i!==1||h!==1}function yo(t,e,i){i===void 0&&(i=!1);var h=pe(e),m=pe(e)&&Eo(e),A=We(e),E=ht(t,m,i),r={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(h||!h&&!i)&&((Le(e)!=="body"||cs(A))&&(r=Co(e)),pe(e)?(c=ht(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):A&&(c.x=as(A))),{x:E.left+r.scrollLeft-c.x,y:E.top+r.scrollTop-c.y,width:E.width,height:E.height}}function wo(t){var e=new Map,i=new Set,h=[];t.forEach(function(A){e.set(A.name,A)});function m(A){i.add(A.name);var E=[].concat(A.requires||[],A.requiresIfExists||[]);E.forEach(function(r){if(!i.has(r)){var c=e.get(r);c&&m(c)}}),h.push(A)}return t.forEach(function(A){i.has(A.name)||m(A)}),h}function Ao(t){var e=wo(t);return Dr.reduce(function(i,h){return i.concat(e.filter(function(m){return m.phase===h}))},[])}function To(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function Lo(t){var e=t.reduce(function(i,h){var m=i[h.name];return i[h.name]=m?Object.assign({},m,h,{options:Object.assign({},m.options,h.options),data:Object.assign({},m.data,h.data)}):h,i},{});return Object.keys(e).map(function(i){return e[i]})}var Ds={placement:"bottom",modifiers:[],strategy:"absolute"};function Rs(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function ni(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,h=i===void 0?[]:i,m=e.defaultOptions,A=m===void 0?Ds:m;return function(r,c,d){d===void 0&&(d=A);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ds,A),modifiersData:{},elements:{reference:r,popper:c},attributes:{},styles:{}},l=[],v=!1,S={state:f,setOptions:function(o){var n=typeof o=="function"?o(f.options):o;g(),f.options=Object.assign({},A,f.options,n),f.scrollParents={reference:Je(r)?Lt(r):r.contextElement?Lt(r.contextElement):[],popper:Lt(c)};var a=Ao(Lo([].concat(h,f.options.modifiers)));return f.orderedModifiers=a.filter(function(u){return u.enabled}),b(),S.update()},forceUpdate:function(){if(!v){var o=f.elements,n=o.reference,a=o.popper;if(Rs(n,a)){f.rects={reference:yo(n,kt(a),f.options.strategy==="fixed"),popper:is(a)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(D){return f.modifiersData[D.name]=Object.assign({},D.data)});for(var u=0;u<f.orderedModifiers.length;u++){if(f.reset===!0){f.reset=!1,u=-1;continue}var p=f.orderedModifiers[u],C=p.fn,w=p.options,_=w===void 0?{}:w,y=p.name;typeof C=="function"&&(f=C({state:f,options:_,name:y,instance:S})||f)}}}},update:To(function(){return new Promise(function(s){S.forceUpdate(),s(f)})}),destroy:function(){g(),v=!0}};if(!Rs(r,c))return S;S.setOptions(d).then(function(s){!v&&d.onFirstUpdate&&d.onFirstUpdate(s)});function b(){f.orderedModifiers.forEach(function(s){var o=s.name,n=s.options,a=n===void 0?{}:n,u=s.effect;if(typeof u=="function"){var p=u({state:f,name:o,instance:S,options:a}),C=function(){};l.push(p||C)}})}function g(){l.forEach(function(s){return s()}),l=[]}return S}}var Do=ni(),Ro=[ns,ls,rs,ts],ko=ni({defaultModifiers:Ro}),Oo=[ns,ls,rs,ts,$r,Nr,Fr,Br,Hr],hs=ni({defaultModifiers:Oo});const Wr=Object.freeze(Object.defineProperty({__proto__:null,afterMain:wr,afterRead:Cr,afterWrite:Lr,applyStyles:ts,arrow:Br,auto:si,basePlacements:pt,beforeMain:Er,beforeRead:Sr,beforeWrite:Ar,bottom:ue,clippingParents:vr,computeStyles:rs,createPopper:hs,createPopperBase:Do,createPopperLite:ko,detectOverflow:ut,end:ct,eventListeners:ns,flip:Nr,hide:Hr,left:ce,main:yr,modifierPhases:Dr,offset:$r,placements:Qi,popper:rt,popperGenerator:ni,popperOffsets:ls,preventOverflow:Fr,read:br,reference:mr,right:fe,start:Xe,top:ae,variationPlacements:$i,viewport:Zi,write:Tr},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.7 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ne=new Map,bi={set(t,e,i){Ne.has(t)||Ne.set(t,new Map);const h=Ne.get(t);if(!h.has(e)&&h.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(h.keys())[0]}.`);return}h.set(e,i)},get(t,e){return Ne.has(t)&&Ne.get(t).get(e)||null},remove(t,e){if(!Ne.has(t))return;const i=Ne.get(t);i.delete(e),i.size===0&&Ne.delete(t)}},xo=1e6,Mo=1e3,Ui="transitionend",Ur=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,i)=>`#${CSS.escape(i)}`)),t),Bo=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),Po=t=>{do t+=Math.floor(Math.random()*xo);while(document.getElementById(t));return t},Io=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const h=Number.parseFloat(e),m=Number.parseFloat(i);return!h&&!m?0:(e=e.split(",")[0],i=i.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(i))*Mo)},jr=t=>{t.dispatchEvent(new Event(Ui))},ke=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),He=t=>ke(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(Ur(t)):null,gt=t=>{if(!ke(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",i=t.closest("details:not([open])");if(!i)return e;if(i!==t){const h=t.closest("summary");if(h&&h.parentNode!==i||h===null)return!1}return e},$e=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",Vr=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Vr(t.parentNode):null},Jt=()=>{},Ot=t=>{t.offsetHeight},zr=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ci=[],No=t=>{document.readyState==="loading"?(Ci.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Ci)e()}),Ci.push(t)):t()},ge=()=>document.documentElement.dir==="rtl",me=t=>{No(()=>{const e=zr();if(e){const i=t.NAME,h=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=h,t.jQueryInterface)}})},le=(t,e=[],i=t)=>typeof t=="function"?t.call(...e):i,Kr=(t,e,i=!0)=>{if(!i){le(t);return}const h=5,m=Io(e)+h;let A=!1;const E=({target:r})=>{r===e&&(A=!0,e.removeEventListener(Ui,E),le(t))};e.addEventListener(Ui,E),setTimeout(()=>{A||jr(e)},m)},ds=(t,e,i,h)=>{const m=t.length;let A=t.indexOf(e);return A===-1?!i&&h?t[m-1]:t[0]:(A+=i?1:-1,h&&(A=(A+m)%m),t[Math.max(0,Math.min(A,m-1))])},Ho=/[^.]*(?=\..*)\.|.*/,$o=/\..*/,Fo=/::\d+$/,Ei={};let ks=1;const qr={mouseenter:"mouseover",mouseleave:"mouseout"},Wo=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Yr(t,e){return e&&`${e}::${ks++}`||t.uidEvent||ks++}function Gr(t){const e=Yr(t);return t.uidEvent=e,Ei[e]=Ei[e]||{},Ei[e]}function Uo(t,e){return function i(h){return us(h,{delegateTarget:t}),i.oneOff&&V.off(t,h.type,e),e.apply(t,[h])}}function jo(t,e,i){return function h(m){const A=t.querySelectorAll(e);for(let{target:E}=m;E&&E!==this;E=E.parentNode)for(const r of A)if(r===E)return us(m,{delegateTarget:E}),h.oneOff&&V.off(t,m.type,e,i),i.apply(E,[m])}}function Xr(t,e,i=null){return Object.values(t).find(h=>h.callable===e&&h.delegationSelector===i)}function Jr(t,e,i){const h=typeof e=="string",m=h?i:e||i;let A=Zr(t);return Wo.has(A)||(A=t),[h,m,A]}function Os(t,e,i,h,m){if(typeof e!="string"||!t)return;let[A,E,r]=Jr(e,i,h);e in qr&&(E=(b=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return b.call(this,g)})(E));const c=Gr(t),d=c[r]||(c[r]={}),f=Xr(d,E,A?i:null);if(f){f.oneOff=f.oneOff&&m;return}const l=Yr(E,e.replace(Ho,"")),v=A?jo(t,i,E):Uo(t,E);v.delegationSelector=A?i:null,v.callable=E,v.oneOff=m,v.uidEvent=l,d[l]=v,t.addEventListener(r,v,A)}function ji(t,e,i,h,m){const A=Xr(e[i],h,m);A&&(t.removeEventListener(i,A,!!m),delete e[i][A.uidEvent])}function Vo(t,e,i,h){const m=e[i]||{};for(const[A,E]of Object.entries(m))A.includes(h)&&ji(t,e,i,E.callable,E.delegationSelector)}function Zr(t){return t=t.replace($o,""),qr[t]||t}const V={on(t,e,i,h){Os(t,e,i,h,!1)},one(t,e,i,h){Os(t,e,i,h,!0)},off(t,e,i,h){if(typeof e!="string"||!t)return;const[m,A,E]=Jr(e,i,h),r=E!==e,c=Gr(t),d=c[E]||{},f=e.startsWith(".");if(typeof A<"u"){if(!Object.keys(d).length)return;ji(t,c,E,A,m?i:null);return}if(f)for(const l of Object.keys(c))Vo(t,c,l,e.slice(1));for(const[l,v]of Object.entries(d)){const S=l.replace(Fo,"");(!r||e.includes(S))&&ji(t,c,E,v.callable,v.delegationSelector)}},trigger(t,e,i){if(typeof e!="string"||!t)return null;const h=zr(),m=Zr(e),A=e!==m;let E=null,r=!0,c=!0,d=!1;A&&h&&(E=h.Event(e,i),h(t).trigger(E),r=!E.isPropagationStopped(),c=!E.isImmediatePropagationStopped(),d=E.isDefaultPrevented());const f=us(new Event(e,{bubbles:r,cancelable:!0}),i);return d&&f.preventDefault(),c&&t.dispatchEvent(f),f.defaultPrevented&&E&&E.preventDefault(),f}};function us(t,e={}){for(const[i,h]of Object.entries(e))try{t[i]=h}catch{Object.defineProperty(t,i,{configurable:!0,get(){return h}})}return t}function xs(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function yi(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Oe={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${yi(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${yi(e)}`)},getDataAttributes(t){if(!t)return{};const e={},i=Object.keys(t.dataset).filter(h=>h.startsWith("bs")&&!h.startsWith("bsConfig"));for(const h of i){let m=h.replace(/^bs/,"");m=m.charAt(0).toLowerCase()+m.slice(1),e[m]=xs(t.dataset[h])}return e},getDataAttribute(t,e){return xs(t.getAttribute(`data-bs-${yi(e)}`))}};class xt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,i){const h=ke(i)?Oe.getDataAttribute(i,"config"):{};return{...this.constructor.Default,...typeof h=="object"?h:{},...ke(i)?Oe.getDataAttributes(i):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,i=this.constructor.DefaultType){for(const[h,m]of Object.entries(i)){const A=e[h],E=ke(A)?"element":Bo(A);if(!new RegExp(m).test(E))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${h}" provided type "${E}" but expected type "${m}".`)}}}const zo="5.3.7";class Ee extends xt{constructor(e,i){super(),e=He(e),e&&(this._element=e,this._config=this._getConfig(i),bi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){bi.remove(this._element,this.constructor.DATA_KEY),V.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,i,h=!0){Kr(e,i,h)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return bi.get(He(e),this.DATA_KEY)}static getOrCreateInstance(e,i={}){return this.getInstance(e)||new this(e,typeof i=="object"?i:null)}static get VERSION(){return zo}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const wi=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let i=t.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),e=i&&i!=="#"?i.trim():null}return e?e.split(",").map(i=>Ur(i)).join(","):null},G={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(i=>i.matches(e))},parents(t,e){const i=[];let h=t.parentNode.closest(e);for(;h;)i.push(h),h=h.parentNode.closest(e);return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(i=>`${i}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(i=>!$e(i)&&gt(i))},getSelectorFromElement(t){const e=wi(t);return e&&G.findOne(e)?e:null},getElementFromSelector(t){const e=wi(t);return e?G.findOne(e):null},getMultipleElementsFromSelector(t){const e=wi(t);return e?G.find(e):[]}},oi=(t,e="hide")=>{const i=`click.dismiss${t.EVENT_KEY}`,h=t.NAME;V.on(document,i,`[data-bs-dismiss="${h}"]`,function(m){if(["A","AREA"].includes(this.tagName)&&m.preventDefault(),$e(this))return;const A=G.getElementFromSelector(this)||this.closest(`.${h}`);t.getOrCreateInstance(A)[e]()})},Ko="alert",qo="bs.alert",Qr=`.${qo}`,Yo=`close${Qr}`,Go=`closed${Qr}`,Xo="fade",Jo="show";class ai extends Ee{static get NAME(){return Ko}close(){if(V.trigger(this._element,Yo).defaultPrevented)return;this._element.classList.remove(Jo);const i=this._element.classList.contains(Xo);this._queueCallback(()=>this._destroyElement(),this._element,i)}_destroyElement(){this._element.remove(),V.trigger(this._element,Go),this.dispose()}static jQueryInterface(e){return this.each(function(){const i=ai.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}oi(ai,"close");me(ai);const Zo="button",Qo="bs.button",ea=`.${Qo}`,ta=".data-api",ia="active",Ms='[data-bs-toggle="button"]',sa=`click${ea}${ta}`;class ci extends Ee{static get NAME(){return Zo}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ia))}static jQueryInterface(e){return this.each(function(){const i=ci.getOrCreateInstance(this);e==="toggle"&&i[e]()})}}V.on(document,sa,Ms,t=>{t.preventDefault();const e=t.target.closest(Ms);ci.getOrCreateInstance(e).toggle()});me(ci);const ra="swipe",vt=".bs.swipe",na=`touchstart${vt}`,oa=`touchmove${vt}`,aa=`touchend${vt}`,ca=`pointerdown${vt}`,la=`pointerup${vt}`,ha="touch",da="pen",ua="pointer-event",fa=40,_a={endCallback:null,leftCallback:null,rightCallback:null},pa={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Zt extends xt{constructor(e,i){super(),this._element=e,!(!e||!Zt.isSupported())&&(this._config=this._getConfig(i),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return _a}static get DefaultType(){return pa}static get NAME(){return ra}dispose(){V.off(this._element,vt)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),le(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=fa)return;const i=e/this._deltaX;this._deltaX=0,i&&le(i>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(V.on(this._element,ca,e=>this._start(e)),V.on(this._element,la,e=>this._end(e)),this._element.classList.add(ua)):(V.on(this._element,na,e=>this._start(e)),V.on(this._element,oa,e=>this._move(e)),V.on(this._element,aa,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===da||e.pointerType===ha)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ga="carousel",va="bs.carousel",Ue=`.${va}`,en=".data-api",ma="ArrowLeft",Sa="ArrowRight",ba=500,yt="next",it="prev",nt="left",Vt="right",Ca=`slide${Ue}`,Ai=`slid${Ue}`,Ea=`keydown${Ue}`,ya=`mouseenter${Ue}`,wa=`mouseleave${Ue}`,Aa=`dragstart${Ue}`,Ta=`load${Ue}${en}`,La=`click${Ue}${en}`,tn="carousel",Nt="active",Da="slide",Ra="carousel-item-end",ka="carousel-item-start",Oa="carousel-item-next",xa="carousel-item-prev",sn=".active",rn=".carousel-item",Ma=sn+rn,Ba=".carousel-item img",Pa=".carousel-indicators",Ia="[data-bs-slide], [data-bs-slide-to]",Na='[data-bs-ride="carousel"]',Ha={[ma]:Vt,[Sa]:nt},$a={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Fa={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Mt extends Ee{constructor(e,i){super(e,i),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=G.findOne(Pa,this._element),this._addEventListeners(),this._config.ride===tn&&this.cycle()}static get Default(){return $a}static get DefaultType(){return Fa}static get NAME(){return ga}next(){this._slide(yt)}nextWhenVisible(){!document.hidden&&gt(this._element)&&this.next()}prev(){this._slide(it)}pause(){this._isSliding&&jr(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){V.one(this._element,Ai,()=>this.cycle());return}this.cycle()}}to(e){const i=this._getItems();if(e>i.length-1||e<0)return;if(this._isSliding){V.one(this._element,Ai,()=>this.to(e));return}const h=this._getItemIndex(this._getActive());if(h===e)return;const m=e>h?yt:it;this._slide(m,i[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&V.on(this._element,Ea,e=>this._keydown(e)),this._config.pause==="hover"&&(V.on(this._element,ya,()=>this.pause()),V.on(this._element,wa,()=>this._maybeEnableCycle())),this._config.touch&&Zt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const h of G.find(Ba,this._element))V.on(h,Aa,m=>m.preventDefault());const i={leftCallback:()=>this._slide(this._directionToOrder(nt)),rightCallback:()=>this._slide(this._directionToOrder(Vt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),ba+this._config.interval))}};this._swipeHelper=new Zt(this._element,i)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const i=Ha[e.key];i&&(e.preventDefault(),this._slide(this._directionToOrder(i)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const i=G.findOne(sn,this._indicatorsElement);i.classList.remove(Nt),i.removeAttribute("aria-current");const h=G.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);h&&(h.classList.add(Nt),h.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const i=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=i||this._config.defaultInterval}_slide(e,i=null){if(this._isSliding)return;const h=this._getActive(),m=e===yt,A=i||ds(this._getItems(),h,m,this._config.wrap);if(A===h)return;const E=this._getItemIndex(A),r=S=>V.trigger(this._element,S,{relatedTarget:A,direction:this._orderToDirection(e),from:this._getItemIndex(h),to:E});if(r(Ca).defaultPrevented||!h||!A)return;const d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(E),this._activeElement=A;const f=m?ka:Ra,l=m?Oa:xa;A.classList.add(l),Ot(A),h.classList.add(f),A.classList.add(f);const v=()=>{A.classList.remove(f,l),A.classList.add(Nt),h.classList.remove(Nt,l,f),this._isSliding=!1,r(Ai)};this._queueCallback(v,h,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(Da)}_getActive(){return G.findOne(Ma,this._element)}_getItems(){return G.find(rn,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return ge()?e===nt?it:yt:e===nt?yt:it}_orderToDirection(e){return ge()?e===it?nt:Vt:e===it?Vt:nt}static jQueryInterface(e){return this.each(function(){const i=Mt.getOrCreateInstance(this,e);if(typeof e=="number"){i.to(e);return}if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}V.on(document,La,Ia,function(t){const e=G.getElementFromSelector(this);if(!e||!e.classList.contains(tn))return;t.preventDefault();const i=Mt.getOrCreateInstance(e),h=this.getAttribute("data-bs-slide-to");if(h){i.to(h),i._maybeEnableCycle();return}if(Oe.getDataAttribute(this,"slide")==="next"){i.next(),i._maybeEnableCycle();return}i.prev(),i._maybeEnableCycle()});V.on(window,Ta,()=>{const t=G.find(Na);for(const e of t)Mt.getOrCreateInstance(e)});me(Mt);const Wa="collapse",Ua="bs.collapse",Bt=`.${Ua}`,ja=".data-api",Va=`show${Bt}`,za=`shown${Bt}`,Ka=`hide${Bt}`,qa=`hidden${Bt}`,Ya=`click${Bt}${ja}`,Ti="show",at="collapse",Ht="collapsing",Ga="collapsed",Xa=`:scope .${at} .${at}`,Ja="collapse-horizontal",Za="width",Qa="height",ec=".collapse.show, .collapse.collapsing",Vi='[data-bs-toggle="collapse"]',tc={parent:null,toggle:!0},ic={parent:"(null|element)",toggle:"boolean"};class Dt extends Ee{constructor(e,i){super(e,i),this._isTransitioning=!1,this._triggerArray=[];const h=G.find(Vi);for(const m of h){const A=G.getSelectorFromElement(m),E=G.find(A).filter(r=>r===this._element);A!==null&&E.length&&this._triggerArray.push(m)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return tc}static get DefaultType(){return ic}static get NAME(){return Wa}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(ec).filter(r=>r!==this._element).map(r=>Dt.getOrCreateInstance(r,{toggle:!1}))),e.length&&e[0]._isTransitioning||V.trigger(this._element,Va).defaultPrevented)return;for(const r of e)r.hide();const h=this._getDimension();this._element.classList.remove(at),this._element.classList.add(Ht),this._element.style[h]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const m=()=>{this._isTransitioning=!1,this._element.classList.remove(Ht),this._element.classList.add(at,Ti),this._element.style[h]="",V.trigger(this._element,za)},E=`scroll${h[0].toUpperCase()+h.slice(1)}`;this._queueCallback(m,this._element,!0),this._element.style[h]=`${this._element[E]}px`}hide(){if(this._isTransitioning||!this._isShown()||V.trigger(this._element,Ka).defaultPrevented)return;const i=this._getDimension();this._element.style[i]=`${this._element.getBoundingClientRect()[i]}px`,Ot(this._element),this._element.classList.add(Ht),this._element.classList.remove(at,Ti);for(const m of this._triggerArray){const A=G.getElementFromSelector(m);A&&!this._isShown(A)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0;const h=()=>{this._isTransitioning=!1,this._element.classList.remove(Ht),this._element.classList.add(at),V.trigger(this._element,qa)};this._element.style[i]="",this._queueCallback(h,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ti)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=He(e.parent),e}_getDimension(){return this._element.classList.contains(Ja)?Za:Qa}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Vi);for(const i of e){const h=G.getElementFromSelector(i);h&&this._addAriaAndCollapsedClass([i],this._isShown(h))}}_getFirstLevelChildren(e){const i=G.find(Xa,this._config.parent);return G.find(e,this._config.parent).filter(h=>!i.includes(h))}_addAriaAndCollapsedClass(e,i){if(e.length)for(const h of e)h.classList.toggle(Ga,!i),h.setAttribute("aria-expanded",i)}static jQueryInterface(e){const i={};return typeof e=="string"&&/show|hide/.test(e)&&(i.toggle=!1),this.each(function(){const h=Dt.getOrCreateInstance(this,i);if(typeof e=="string"){if(typeof h[e]>"u")throw new TypeError(`No method named "${e}"`);h[e]()}})}}V.on(document,Ya,Vi,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of G.getMultipleElementsFromSelector(this))Dt.getOrCreateInstance(e,{toggle:!1}).toggle()});me(Dt);const Bs="dropdown",sc="bs.dropdown",Qe=`.${sc}`,fs=".data-api",rc="Escape",Ps="Tab",nc="ArrowUp",Is="ArrowDown",oc=2,ac=`hide${Qe}`,cc=`hidden${Qe}`,lc=`show${Qe}`,hc=`shown${Qe}`,nn=`click${Qe}${fs}`,on=`keydown${Qe}${fs}`,dc=`keyup${Qe}${fs}`,ot="show",uc="dropup",fc="dropend",_c="dropstart",pc="dropup-center",gc="dropdown-center",Ke='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',vc=`${Ke}.${ot}`,zt=".dropdown-menu",mc=".navbar",Sc=".navbar-nav",bc=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Cc=ge()?"top-end":"top-start",Ec=ge()?"top-start":"top-end",yc=ge()?"bottom-end":"bottom-start",wc=ge()?"bottom-start":"bottom-end",Ac=ge()?"left-start":"right-start",Tc=ge()?"right-start":"left-start",Lc="top",Dc="bottom",Rc={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},kc={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Te extends Ee{constructor(e,i){super(e,i),this._popper=null,this._parent=this._element.parentNode,this._menu=G.next(this._element,zt)[0]||G.prev(this._element,zt)[0]||G.findOne(zt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Rc}static get DefaultType(){return kc}static get NAME(){return Bs}toggle(){return this._isShown()?this.hide():this.show()}show(){if($e(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!V.trigger(this._element,lc,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Sc))for(const h of[].concat(...document.body.children))V.on(h,"mouseover",Jt);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ot),this._element.classList.add(ot),V.trigger(this._element,hc,e)}}hide(){if($e(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!V.trigger(this._element,ac,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))V.off(h,"mouseover",Jt);this._popper&&this._popper.destroy(),this._menu.classList.remove(ot),this._element.classList.remove(ot),this._element.setAttribute("aria-expanded","false"),Oe.removeDataAttribute(this._menu,"popper"),V.trigger(this._element,cc,e),this._element.focus()}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!ke(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Bs.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Wr>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let e=this._element;this._config.reference==="parent"?e=this._parent:ke(this._config.reference)?e=He(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const i=this._getPopperConfig();this._popper=hs(e,this._menu,i)}_isShown(){return this._menu.classList.contains(ot)}_getPlacement(){const e=this._parent;if(e.classList.contains(fc))return Ac;if(e.classList.contains(_c))return Tc;if(e.classList.contains(pc))return Lc;if(e.classList.contains(gc))return Dc;const i=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(uc)?i?Ec:Cc:i?wc:yc}_detectNavbar(){return this._element.closest(mc)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Oe.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...le(this._config.popperConfig,[void 0,e])}}_selectMenuItem({key:e,target:i}){const h=G.find(bc,this._menu).filter(m=>gt(m));h.length&&ds(h,i,e===Is,!h.includes(i)).focus()}static jQueryInterface(e){return this.each(function(){const i=Te.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}static clearMenus(e){if(e.button===oc||e.type==="keyup"&&e.key!==Ps)return;const i=G.find(vc);for(const h of i){const m=Te.getInstance(h);if(!m||m._config.autoClose===!1)continue;const A=e.composedPath(),E=A.includes(m._menu);if(A.includes(m._element)||m._config.autoClose==="inside"&&!E||m._config.autoClose==="outside"&&E||m._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Ps||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const r={relatedTarget:m._element};e.type==="click"&&(r.clickEvent=e),m._completeHide(r)}}static dataApiKeydownHandler(e){const i=/input|textarea/i.test(e.target.tagName),h=e.key===rc,m=[nc,Is].includes(e.key);if(!m&&!h||i&&!h)return;e.preventDefault();const A=this.matches(Ke)?this:G.prev(this,Ke)[0]||G.next(this,Ke)[0]||G.findOne(Ke,e.delegateTarget.parentNode),E=Te.getOrCreateInstance(A);if(m){e.stopPropagation(),E.show(),E._selectMenuItem(e);return}E._isShown()&&(e.stopPropagation(),E.hide(),A.focus())}}V.on(document,on,Ke,Te.dataApiKeydownHandler);V.on(document,on,zt,Te.dataApiKeydownHandler);V.on(document,nn,Te.clearMenus);V.on(document,dc,Te.clearMenus);V.on(document,nn,Ke,function(t){t.preventDefault(),Te.getOrCreateInstance(this).toggle()});me(Te);const an="backdrop",Oc="fade",Ns="show",Hs=`mousedown.bs.${an}`,xc={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Mc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class cn extends xt{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return xc}static get DefaultType(){return Mc}static get NAME(){return an}show(e){if(!this._config.isVisible){le(e);return}this._append();const i=this._getElement();this._config.isAnimated&&Ot(i),i.classList.add(Ns),this._emulateAnimation(()=>{le(e)})}hide(e){if(!this._config.isVisible){le(e);return}this._getElement().classList.remove(Ns),this._emulateAnimation(()=>{this.dispose(),le(e)})}dispose(){this._isAppended&&(V.off(this._element,Hs),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(Oc),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=He(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),V.on(e,Hs,()=>{le(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Kr(e,this._getElement(),this._config.isAnimated)}}const Bc="focustrap",Pc="bs.focustrap",Qt=`.${Pc}`,Ic=`focusin${Qt}`,Nc=`keydown.tab${Qt}`,Hc="Tab",$c="forward",$s="backward",Fc={autofocus:!0,trapElement:null},Wc={autofocus:"boolean",trapElement:"element"};class ln extends xt{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Fc}static get DefaultType(){return Wc}static get NAME(){return Bc}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),V.off(document,Qt),V.on(document,Ic,e=>this._handleFocusin(e)),V.on(document,Nc,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,V.off(document,Qt))}_handleFocusin(e){const{trapElement:i}=this._config;if(e.target===document||e.target===i||i.contains(e.target))return;const h=G.focusableChildren(i);h.length===0?i.focus():this._lastTabNavDirection===$s?h[h.length-1].focus():h[0].focus()}_handleKeydown(e){e.key===Hc&&(this._lastTabNavDirection=e.shiftKey?$s:$c)}}const Fs=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ws=".sticky-top",$t="padding-right",Us="margin-right";class zi{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,$t,i=>i+e),this._setElementAttributes(Fs,$t,i=>i+e),this._setElementAttributes(Ws,Us,i=>i-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,$t),this._resetElementAttributes(Fs,$t),this._resetElementAttributes(Ws,Us)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,i,h){const m=this.getWidth(),A=E=>{if(E!==this._element&&window.innerWidth>E.clientWidth+m)return;this._saveInitialAttribute(E,i);const r=window.getComputedStyle(E).getPropertyValue(i);E.style.setProperty(i,`${h(Number.parseFloat(r))}px`)};this._applyManipulationCallback(e,A)}_saveInitialAttribute(e,i){const h=e.style.getPropertyValue(i);h&&Oe.setDataAttribute(e,i,h)}_resetElementAttributes(e,i){const h=m=>{const A=Oe.getDataAttribute(m,i);if(A===null){m.style.removeProperty(i);return}Oe.removeDataAttribute(m,i),m.style.setProperty(i,A)};this._applyManipulationCallback(e,h)}_applyManipulationCallback(e,i){if(ke(e)){i(e);return}for(const h of G.find(e,this._element))i(h)}}const Uc="modal",jc="bs.modal",ve=`.${jc}`,Vc=".data-api",zc="Escape",Kc=`hide${ve}`,qc=`hidePrevented${ve}`,hn=`hidden${ve}`,dn=`show${ve}`,Yc=`shown${ve}`,Gc=`resize${ve}`,Xc=`click.dismiss${ve}`,Jc=`mousedown.dismiss${ve}`,Zc=`keydown.dismiss${ve}`,Qc=`click${ve}${Vc}`,js="modal-open",el="fade",Vs="show",Li="modal-static",tl=".modal.show",il=".modal-dialog",sl=".modal-body",rl='[data-bs-toggle="modal"]',nl={backdrop:!0,focus:!0,keyboard:!0},ol={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ft extends Ee{constructor(e,i){super(e,i),this._dialog=G.findOne(il,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new zi,this._addEventListeners()}static get Default(){return nl}static get DefaultType(){return ol}static get NAME(){return Uc}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||V.trigger(this._element,dn,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(js),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||V.trigger(this._element,Kc).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Vs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){V.off(window,ve),V.off(this._dialog,ve),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new cn({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ln({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=G.findOne(sl,this._dialog);i&&(i.scrollTop=0),Ot(this._element),this._element.classList.add(Vs);const h=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,V.trigger(this._element,Yc,{relatedTarget:e})};this._queueCallback(h,this._dialog,this._isAnimated())}_addEventListeners(){V.on(this._element,Zc,e=>{if(e.key===zc){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),V.on(window,Gc,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),V.on(this._element,Jc,e=>{V.one(this._element,Xc,i=>{if(!(this._element!==e.target||this._element!==i.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(js),this._resetAdjustments(),this._scrollBar.reset(),V.trigger(this._element,hn)})}_isAnimated(){return this._element.classList.contains(el)}_triggerBackdropTransition(){if(V.trigger(this._element,qc).defaultPrevented)return;const i=this._element.scrollHeight>document.documentElement.clientHeight,h=this._element.style.overflowY;h==="hidden"||this._element.classList.contains(Li)||(i||(this._element.style.overflowY="hidden"),this._element.classList.add(Li),this._queueCallback(()=>{this._element.classList.remove(Li),this._queueCallback(()=>{this._element.style.overflowY=h},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),h=i>0;if(h&&!e){const m=ge()?"paddingLeft":"paddingRight";this._element.style[m]=`${i}px`}if(!h&&e){const m=ge()?"paddingRight":"paddingLeft";this._element.style[m]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,i){return this.each(function(){const h=ft.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof h[e]>"u")throw new TypeError(`No method named "${e}"`);h[e](i)}})}}V.on(document,Qc,rl,function(t){const e=G.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),V.one(e,dn,m=>{m.defaultPrevented||V.one(e,hn,()=>{gt(this)&&this.focus()})});const i=G.findOne(tl);i&&ft.getInstance(i).hide(),ft.getOrCreateInstance(e).toggle(this)});oi(ft);me(ft);const al="offcanvas",cl="bs.offcanvas",Me=`.${cl}`,un=".data-api",ll=`load${Me}${un}`,hl="Escape",zs="show",Ks="showing",qs="hiding",dl="offcanvas-backdrop",fn=".offcanvas.show",ul=`show${Me}`,fl=`shown${Me}`,_l=`hide${Me}`,Ys=`hidePrevented${Me}`,_n=`hidden${Me}`,pl=`resize${Me}`,gl=`click${Me}${un}`,vl=`keydown.dismiss${Me}`,ml='[data-bs-toggle="offcanvas"]',Sl={backdrop:!0,keyboard:!0,scroll:!1},bl={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Fe extends Ee{constructor(e,i){super(e,i),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Sl}static get DefaultType(){return bl}static get NAME(){return al}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||V.trigger(this._element,ul,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new zi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ks);const h=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(zs),this._element.classList.remove(Ks),V.trigger(this._element,fl,{relatedTarget:e})};this._queueCallback(h,this._element,!0)}hide(){if(!this._isShown||V.trigger(this._element,_l).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(qs),this._backdrop.hide();const i=()=>{this._element.classList.remove(zs,qs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new zi().reset(),V.trigger(this._element,_n)};this._queueCallback(i,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){V.trigger(this._element,Ys);return}this.hide()},i=!!this._config.backdrop;return new cn({className:dl,isVisible:i,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:i?e:null})}_initializeFocusTrap(){return new ln({trapElement:this._element})}_addEventListeners(){V.on(this._element,vl,e=>{if(e.key===hl){if(this._config.keyboard){this.hide();return}V.trigger(this._element,Ys)}})}static jQueryInterface(e){return this.each(function(){const i=Fe.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}V.on(document,gl,ml,function(t){const e=G.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),$e(this))return;V.one(e,_n,()=>{gt(this)&&this.focus()});const i=G.findOne(fn);i&&i!==e&&Fe.getInstance(i).hide(),Fe.getOrCreateInstance(e).toggle(this)});V.on(window,ll,()=>{for(const t of G.find(fn))Fe.getOrCreateInstance(t).show()});V.on(window,pl,()=>{for(const t of G.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Fe.getOrCreateInstance(t).hide()});oi(Fe);me(Fe);const Cl=/^aria-[\w-]*$/i,pn={"*":["class","dir","id","lang","role",Cl],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},El=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),yl=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,wl=(t,e)=>{const i=t.nodeName.toLowerCase();return e.includes(i)?El.has(i)?!!yl.test(t.nodeValue):!0:e.filter(h=>h instanceof RegExp).some(h=>h.test(i))};function Al(t,e,i){if(!t.length)return t;if(i&&typeof i=="function")return i(t);const m=new window.DOMParser().parseFromString(t,"text/html"),A=[].concat(...m.body.querySelectorAll("*"));for(const E of A){const r=E.nodeName.toLowerCase();if(!Object.keys(e).includes(r)){E.remove();continue}const c=[].concat(...E.attributes),d=[].concat(e["*"]||[],e[r]||[]);for(const f of c)wl(f,d)||E.removeAttribute(f.nodeName)}return m.body.innerHTML}const Tl="TemplateFactory",Ll={allowList:pn,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Dl={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Rl={entry:"(string|element|function|null)",selector:"(string|element)"};class kl extends xt{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Ll}static get DefaultType(){return Dl}static get NAME(){return Tl}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[m,A]of Object.entries(this._config.content))this._setContent(e,A,m);const i=e.children[0],h=this._resolvePossibleFunction(this._config.extraClass);return h&&i.classList.add(...h.split(" ")),i}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[i,h]of Object.entries(e))super._typeCheckConfig({selector:i,entry:h},Rl)}_setContent(e,i,h){const m=G.findOne(h,e);if(m){if(i=this._resolvePossibleFunction(i),!i){m.remove();return}if(ke(i)){this._putElementInTemplate(He(i),m);return}if(this._config.html){m.innerHTML=this._maybeSanitize(i);return}m.textContent=i}}_maybeSanitize(e){return this._config.sanitize?Al(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return le(e,[void 0,this])}_putElementInTemplate(e,i){if(this._config.html){i.innerHTML="",i.append(e);return}i.textContent=e.textContent}}const Ol="tooltip",xl=new Set(["sanitize","allowList","sanitizeFn"]),Di="fade",Ml="modal",Ft="show",Bl=".tooltip-inner",Gs=`.${Ml}`,Xs="hide.bs.modal",wt="hover",Ri="focus",ki="click",Pl="manual",Il="hide",Nl="hidden",Hl="show",$l="shown",Fl="inserted",Wl="click",Ul="focusin",jl="focusout",Vl="mouseenter",zl="mouseleave",Kl={AUTO:"auto",TOP:"top",RIGHT:ge()?"left":"right",BOTTOM:"bottom",LEFT:ge()?"right":"left"},ql={allowList:pn,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Yl={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class mt extends Ee{constructor(e,i){if(typeof Wr>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(e,i),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return ql}static get DefaultType(){return Yl}static get NAME(){return Ol}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),V.off(this._element.closest(Gs),Xs,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=V.trigger(this._element,this.constructor.eventName(Hl)),h=(Vr(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!h)return;this._disposePopper();const m=this._getTipElement();this._element.setAttribute("aria-describedby",m.getAttribute("id"));const{container:A}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(A.append(m),V.trigger(this._element,this.constructor.eventName(Fl))),this._popper=this._createPopper(m),m.classList.add(Ft),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))V.on(r,"mouseover",Jt);const E=()=>{V.trigger(this._element,this.constructor.eventName($l)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(E,this.tip,this._isAnimated())}hide(){if(!this._isShown()||V.trigger(this._element,this.constructor.eventName(Il)).defaultPrevented)return;if(this._getTipElement().classList.remove(Ft),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))V.off(m,"mouseover",Jt);this._activeTrigger[ki]=!1,this._activeTrigger[Ri]=!1,this._activeTrigger[wt]=!1,this._isHovered=null;const h=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),V.trigger(this._element,this.constructor.eventName(Nl)))};this._queueCallback(h,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const i=this._getTemplateFactory(e).toHtml();if(!i)return null;i.classList.remove(Di,Ft),i.classList.add(`bs-${this.constructor.NAME}-auto`);const h=Po(this.constructor.NAME).toString();return i.setAttribute("id",h),this._isAnimated()&&i.classList.add(Di),i}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new kl({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Bl]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Di)}_isShown(){return this.tip&&this.tip.classList.contains(Ft)}_createPopper(e){const i=le(this._config.placement,[this,e,this._element]),h=Kl[i.toUpperCase()];return hs(this._element,e,this._getPopperConfig(h))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(i=>Number.parseInt(i,10)):typeof e=="function"?i=>e(i,this._element):e}_resolvePossibleFunction(e){return le(e,[this._element,this._element])}_getPopperConfig(e){const i={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:h=>{this._getTipElement().setAttribute("data-popper-placement",h.state.placement)}}]};return{...i,...le(this._config.popperConfig,[void 0,i])}}_setListeners(){const e=this._config.trigger.split(" ");for(const i of e)if(i==="click")V.on(this._element,this.constructor.eventName(Wl),this._config.selector,h=>{const m=this._initializeOnDelegatedTarget(h);m._activeTrigger[ki]=!(m._isShown()&&m._activeTrigger[ki]),m.toggle()});else if(i!==Pl){const h=i===wt?this.constructor.eventName(Vl):this.constructor.eventName(Ul),m=i===wt?this.constructor.eventName(zl):this.constructor.eventName(jl);V.on(this._element,h,this._config.selector,A=>{const E=this._initializeOnDelegatedTarget(A);E._activeTrigger[A.type==="focusin"?Ri:wt]=!0,E._enter()}),V.on(this._element,m,this._config.selector,A=>{const E=this._initializeOnDelegatedTarget(A);E._activeTrigger[A.type==="focusout"?Ri:wt]=E._element.contains(A.relatedTarget),E._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},V.on(this._element.closest(Gs),Xs,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,i){clearTimeout(this._timeout),this._timeout=setTimeout(e,i)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const i=Oe.getDataAttributes(this._element);for(const h of Object.keys(i))xl.has(h)&&delete i[h];return e={...i,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:He(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[i,h]of Object.entries(this._config))this.constructor.Default[i]!==h&&(e[i]=h);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const i=mt.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}me(mt);const Gl="popover",Xl=".popover-header",Jl=".popover-body",Zl={...mt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ql={...mt.DefaultType,content:"(null|string|element|function)"};class _s extends mt{static get Default(){return Zl}static get DefaultType(){return Ql}static get NAME(){return Gl}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Xl]:this._getTitle(),[Jl]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const i=_s.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}me(_s);const eh="scrollspy",th="bs.scrollspy",ps=`.${th}`,ih=".data-api",sh=`activate${ps}`,Js=`click${ps}`,rh=`load${ps}${ih}`,nh="dropdown-item",st="active",oh='[data-bs-spy="scroll"]',Oi="[href]",ah=".nav, .list-group",Zs=".nav-link",ch=".nav-item",lh=".list-group-item",hh=`${Zs}, ${ch} > ${Zs}, ${lh}`,dh=".dropdown",uh=".dropdown-toggle",fh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},_h={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class li extends Ee{constructor(e,i){super(e,i),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fh}static get DefaultType(){return _h}static get NAME(){return eh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=He(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(i=>Number.parseFloat(i))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(V.off(this._config.target,Js),V.on(this._config.target,Js,Oi,e=>{const i=this._observableSections.get(e.target.hash);if(i){e.preventDefault();const h=this._rootElement||window,m=i.offsetTop-this._element.offsetTop;if(h.scrollTo){h.scrollTo({top:m,behavior:"smooth"});return}h.scrollTop=m}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(i=>this._observerCallback(i),e)}_observerCallback(e){const i=E=>this._targetLinks.get(`#${E.target.id}`),h=E=>{this._previousScrollData.visibleEntryTop=E.target.offsetTop,this._process(i(E))},m=(this._rootElement||document.documentElement).scrollTop,A=m>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=m;for(const E of e){if(!E.isIntersecting){this._activeTarget=null,this._clearActiveClass(i(E));continue}const r=E.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(A&&r){if(h(E),!m)return;continue}!A&&!r&&h(E)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=G.find(Oi,this._config.target);for(const i of e){if(!i.hash||$e(i))continue;const h=G.findOne(decodeURI(i.hash),this._element);gt(h)&&(this._targetLinks.set(decodeURI(i.hash),i),this._observableSections.set(i.hash,h))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(st),this._activateParents(e),V.trigger(this._element,sh,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(nh)){G.findOne(uh,e.closest(dh)).classList.add(st);return}for(const i of G.parents(e,ah))for(const h of G.prev(i,hh))h.classList.add(st)}_clearActiveClass(e){e.classList.remove(st);const i=G.find(`${Oi}.${st}`,e);for(const h of i)h.classList.remove(st)}static jQueryInterface(e){return this.each(function(){const i=li.getOrCreateInstance(this,e);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}V.on(window,rh,()=>{for(const t of G.find(oh))li.getOrCreateInstance(t)});me(li);const ph="tab",gh="bs.tab",et=`.${gh}`,vh=`hide${et}`,mh=`hidden${et}`,Sh=`show${et}`,bh=`shown${et}`,Ch=`click${et}`,Eh=`keydown${et}`,yh=`load${et}`,wh="ArrowLeft",Qs="ArrowRight",Ah="ArrowUp",er="ArrowDown",xi="Home",tr="End",qe="active",ir="fade",Mi="show",Th="dropdown",gn=".dropdown-toggle",Lh=".dropdown-menu",Bi=`:not(${gn})`,Dh='.list-group, .nav, [role="tablist"]',Rh=".nav-item, .list-group-item",kh=`.nav-link${Bi}, .list-group-item${Bi}, [role="tab"]${Bi}`,vn='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Pi=`${kh}, ${vn}`,Oh=`.${qe}[data-bs-toggle="tab"], .${qe}[data-bs-toggle="pill"], .${qe}[data-bs-toggle="list"]`;class _t extends Ee{constructor(e){super(e),this._parent=this._element.closest(Dh),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),V.on(this._element,Eh,i=>this._keydown(i)))}static get NAME(){return ph}show(){const e=this._element;if(this._elemIsActive(e))return;const i=this._getActiveElem(),h=i?V.trigger(i,vh,{relatedTarget:e}):null;V.trigger(e,Sh,{relatedTarget:i}).defaultPrevented||h&&h.defaultPrevented||(this._deactivate(i,e),this._activate(e,i))}_activate(e,i){if(!e)return;e.classList.add(qe),this._activate(G.getElementFromSelector(e));const h=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Mi);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),V.trigger(e,bh,{relatedTarget:i})};this._queueCallback(h,e,e.classList.contains(ir))}_deactivate(e,i){if(!e)return;e.classList.remove(qe),e.blur(),this._deactivate(G.getElementFromSelector(e));const h=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Mi);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),V.trigger(e,mh,{relatedTarget:i})};this._queueCallback(h,e,e.classList.contains(ir))}_keydown(e){if(![wh,Qs,Ah,er,xi,tr].includes(e.key))return;e.stopPropagation(),e.preventDefault();const i=this._getChildren().filter(m=>!$e(m));let h;if([xi,tr].includes(e.key))h=i[e.key===xi?0:i.length-1];else{const m=[Qs,er].includes(e.key);h=ds(i,e.target,m,!0)}h&&(h.focus({preventScroll:!0}),_t.getOrCreateInstance(h).show())}_getChildren(){return G.find(Pi,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,i){this._setAttributeIfNotExists(e,"role","tablist");for(const h of i)this._setInitialAttributesOnChild(h)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const i=this._elemIsActive(e),h=this._getOuterElement(e);e.setAttribute("aria-selected",i),h!==e&&this._setAttributeIfNotExists(h,"role","presentation"),i||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const i=G.getElementFromSelector(e);i&&(this._setAttributeIfNotExists(i,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(i,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,i){const h=this._getOuterElement(e);if(!h.classList.contains(Th))return;const m=(A,E)=>{const r=G.findOne(A,h);r&&r.classList.toggle(E,i)};m(gn,qe),m(Lh,Mi),h.setAttribute("aria-expanded",i)}_setAttributeIfNotExists(e,i,h){e.hasAttribute(i)||e.setAttribute(i,h)}_elemIsActive(e){return e.classList.contains(qe)}_getInnerElement(e){return e.matches(Pi)?e:G.findOne(Pi,e)}_getOuterElement(e){return e.closest(Rh)||e}static jQueryInterface(e){return this.each(function(){const i=_t.getOrCreateInstance(this);if(typeof e=="string"){if(i[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);i[e]()}})}}V.on(document,Ch,vn,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!$e(this)&&_t.getOrCreateInstance(this).show()});V.on(window,yh,()=>{for(const t of G.find(Oh))_t.getOrCreateInstance(t)});me(_t);const xh="toast",Mh="bs.toast",je=`.${Mh}`,Bh=`mouseover${je}`,Ph=`mouseout${je}`,Ih=`focusin${je}`,Nh=`focusout${je}`,Hh=`hide${je}`,$h=`hidden${je}`,Fh=`show${je}`,Wh=`shown${je}`,Uh="fade",sr="hide",Wt="show",Ut="showing",jh={animation:"boolean",autohide:"boolean",delay:"number"},Vh={animation:!0,autohide:!0,delay:5e3};class hi extends Ee{constructor(e,i){super(e,i),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vh}static get DefaultType(){return jh}static get NAME(){return xh}show(){if(V.trigger(this._element,Fh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Uh);const i=()=>{this._element.classList.remove(Ut),V.trigger(this._element,Wh),this._maybeScheduleHide()};this._element.classList.remove(sr),Ot(this._element),this._element.classList.add(Wt,Ut),this._queueCallback(i,this._element,this._config.animation)}hide(){if(!this.isShown()||V.trigger(this._element,Hh).defaultPrevented)return;const i=()=>{this._element.classList.add(sr),this._element.classList.remove(Ut,Wt),V.trigger(this._element,$h)};this._element.classList.add(Ut),this._queueCallback(i,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Wt),super.dispose()}isShown(){return this._element.classList.contains(Wt)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,i){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=i;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=i;break}}if(i){this._clearTimeout();return}const h=e.relatedTarget;this._element===h||this._element.contains(h)||this._maybeScheduleHide()}_setListeners(){V.on(this._element,Bh,e=>this._onInteraction(e,!0)),V.on(this._element,Ph,e=>this._onInteraction(e,!1)),V.on(this._element,Ih,e=>this._onInteraction(e,!0)),V.on(this._element,Nh,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const i=hi.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](this)}})}}oi(hi);me(hi);function mn(t,e){return function(){return t.apply(e,arguments)}}const{toString:zh}=Object.prototype,{getPrototypeOf:gs}=Object,{iterator:di,toStringTag:Sn}=Symbol,ui=(t=>e=>{const i=zh.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ye=t=>(t=t.toLowerCase(),e=>ui(e)===t),fi=t=>e=>typeof e===t,{isArray:St}=Array,Rt=fi("undefined");function Kh(t){return t!==null&&!Rt(t)&&t.constructor!==null&&!Rt(t.constructor)&&he(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const bn=ye("ArrayBuffer");function qh(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&bn(t.buffer),e}const Yh=fi("string"),he=fi("function"),Cn=fi("number"),_i=t=>t!==null&&typeof t=="object",Gh=t=>t===!0||t===!1,Kt=t=>{if(ui(t)!=="object")return!1;const e=gs(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Sn in t)&&!(di in t)},Xh=ye("Date"),Jh=ye("File"),Zh=ye("Blob"),Qh=ye("FileList"),ed=t=>_i(t)&&he(t.pipe),td=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||he(t.append)&&((e=ui(t))==="formdata"||e==="object"&&he(t.toString)&&t.toString()==="[object FormData]"))},id=ye("URLSearchParams"),[sd,rd,nd,od]=["ReadableStream","Request","Response","Headers"].map(ye),ad=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pt(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let h,m;if(typeof t!="object"&&(t=[t]),St(t))for(h=0,m=t.length;h<m;h++)e.call(null,t[h],h,t);else{const A=i?Object.getOwnPropertyNames(t):Object.keys(t),E=A.length;let r;for(h=0;h<E;h++)r=A[h],e.call(null,t[r],r,t)}}function En(t,e){e=e.toLowerCase();const i=Object.keys(t);let h=i.length,m;for(;h-- >0;)if(m=i[h],e===m.toLowerCase())return m;return null}const Ye=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),yn=t=>!Rt(t)&&t!==Ye;function Ki(){const{caseless:t}=yn(this)&&this||{},e={},i=(h,m)=>{const A=t&&En(e,m)||m;Kt(e[A])&&Kt(h)?e[A]=Ki(e[A],h):Kt(h)?e[A]=Ki({},h):St(h)?e[A]=h.slice():e[A]=h};for(let h=0,m=arguments.length;h<m;h++)arguments[h]&&Pt(arguments[h],i);return e}const cd=(t,e,i,{allOwnKeys:h}={})=>(Pt(e,(m,A)=>{i&&he(m)?t[A]=mn(m,i):t[A]=m},{allOwnKeys:h}),t),ld=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),hd=(t,e,i,h)=>{t.prototype=Object.create(e.prototype,h),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},dd=(t,e,i,h)=>{let m,A,E;const r={};if(e=e||{},t==null)return e;do{for(m=Object.getOwnPropertyNames(t),A=m.length;A-- >0;)E=m[A],(!h||h(E,t,e))&&!r[E]&&(e[E]=t[E],r[E]=!0);t=i!==!1&&gs(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},ud=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const h=t.indexOf(e,i);return h!==-1&&h===i},fd=t=>{if(!t)return null;if(St(t))return t;let e=t.length;if(!Cn(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},_d=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&gs(Uint8Array)),pd=(t,e)=>{const h=(t&&t[di]).call(t);let m;for(;(m=h.next())&&!m.done;){const A=m.value;e.call(t,A[0],A[1])}},gd=(t,e)=>{let i;const h=[];for(;(i=t.exec(e))!==null;)h.push(i);return h},vd=ye("HTMLFormElement"),md=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,h,m){return h.toUpperCase()+m}),rr=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),Sd=ye("RegExp"),wn=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),h={};Pt(i,(m,A)=>{let E;(E=e(m,A,t))!==!1&&(h[A]=E||m)}),Object.defineProperties(t,h)},bd=t=>{wn(t,(e,i)=>{if(he(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const h=t[i];if(he(h)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Cd=(t,e)=>{const i={},h=m=>{m.forEach(A=>{i[A]=!0})};return St(t)?h(t):h(String(t).split(e)),i},Ed=()=>{},yd=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function wd(t){return!!(t&&he(t.append)&&t[Sn]==="FormData"&&t[di])}const Ad=t=>{const e=new Array(10),i=(h,m)=>{if(_i(h)){if(e.indexOf(h)>=0)return;if(!("toJSON"in h)){e[m]=h;const A=St(h)?[]:{};return Pt(h,(E,r)=>{const c=i(E,m+1);!Rt(c)&&(A[r]=c)}),e[m]=void 0,A}}return h};return i(t,0)},Td=ye("AsyncFunction"),Ld=t=>t&&(_i(t)||he(t))&&he(t.then)&&he(t.catch),An=((t,e)=>t?setImmediate:e?((i,h)=>(Ye.addEventListener("message",({source:m,data:A})=>{m===Ye&&A===i&&h.length&&h.shift()()},!1),m=>{h.push(m),Ye.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",he(Ye.postMessage)),Dd=typeof queueMicrotask<"u"?queueMicrotask.bind(Ye):typeof process<"u"&&process.nextTick||An,Rd=t=>t!=null&&he(t[di]),I={isArray:St,isArrayBuffer:bn,isBuffer:Kh,isFormData:td,isArrayBufferView:qh,isString:Yh,isNumber:Cn,isBoolean:Gh,isObject:_i,isPlainObject:Kt,isReadableStream:sd,isRequest:rd,isResponse:nd,isHeaders:od,isUndefined:Rt,isDate:Xh,isFile:Jh,isBlob:Zh,isRegExp:Sd,isFunction:he,isStream:ed,isURLSearchParams:id,isTypedArray:_d,isFileList:Qh,forEach:Pt,merge:Ki,extend:cd,trim:ad,stripBOM:ld,inherits:hd,toFlatObject:dd,kindOf:ui,kindOfTest:ye,endsWith:ud,toArray:fd,forEachEntry:pd,matchAll:gd,isHTMLForm:vd,hasOwnProperty:rr,hasOwnProp:rr,reduceDescriptors:wn,freezeMethods:bd,toObjectSet:Cd,toCamelCase:md,noop:Ed,toFiniteNumber:yd,findKey:En,global:Ye,isContextDefined:yn,isSpecCompliantForm:wd,toJSONObject:Ad,isAsyncFn:Td,isThenable:Ld,setImmediate:An,asap:Dd,isIterable:Rd};function J(t,e,i,h,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),h&&(this.request=h),m&&(this.response=m,this.status=m.status?m.status:null)}I.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const Tn=J.prototype,Ln={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ln[t]={value:t}});Object.defineProperties(J,Ln);Object.defineProperty(Tn,"isAxiosError",{value:!0});J.from=(t,e,i,h,m,A)=>{const E=Object.create(Tn);return I.toFlatObject(t,E,function(c){return c!==Error.prototype},r=>r!=="isAxiosError"),J.call(E,t.message,e,i,h,m),E.cause=t,E.name=t.name,A&&Object.assign(E,A),E};const kd=null;function qi(t){return I.isPlainObject(t)||I.isArray(t)}function Dn(t){return I.endsWith(t,"[]")?t.slice(0,-2):t}function nr(t,e,i){return t?t.concat(e).map(function(m,A){return m=Dn(m),!i&&A?"["+m+"]":m}).join(i?".":""):e}function Od(t){return I.isArray(t)&&!t.some(qi)}const xd=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function pi(t,e,i){if(!I.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=I.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,s){return!I.isUndefined(s[g])});const h=i.metaTokens,m=i.visitor||f,A=i.dots,E=i.indexes,c=(i.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(m))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(I.isDate(b))return b.toISOString();if(I.isBoolean(b))return b.toString();if(!c&&I.isBlob(b))throw new J("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(b)||I.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function f(b,g,s){let o=b;if(b&&!s&&typeof b=="object"){if(I.endsWith(g,"{}"))g=h?g:g.slice(0,-2),b=JSON.stringify(b);else if(I.isArray(b)&&Od(b)||(I.isFileList(b)||I.endsWith(g,"[]"))&&(o=I.toArray(b)))return g=Dn(g),o.forEach(function(a,u){!(I.isUndefined(a)||a===null)&&e.append(E===!0?nr([g],u,A):E===null?g:g+"[]",d(a))}),!1}return qi(b)?!0:(e.append(nr(s,g,A),d(b)),!1)}const l=[],v=Object.assign(xd,{defaultVisitor:f,convertValue:d,isVisitable:qi});function S(b,g){if(!I.isUndefined(b)){if(l.indexOf(b)!==-1)throw Error("Circular reference detected in "+g.join("."));l.push(b),I.forEach(b,function(o,n){(!(I.isUndefined(o)||o===null)&&m.call(e,o,I.isString(n)?n.trim():n,g,v))===!0&&S(o,g?g.concat(n):[n])}),l.pop()}}if(!I.isObject(t))throw new TypeError("data must be an object");return S(t),e}function or(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(h){return e[h]})}function vs(t,e){this._pairs=[],t&&pi(t,this,e)}const Rn=vs.prototype;Rn.append=function(e,i){this._pairs.push([e,i])};Rn.toString=function(e){const i=e?function(h){return e.call(this,h,or)}:or;return this._pairs.map(function(m){return i(m[0])+"="+i(m[1])},"").join("&")};function Md(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kn(t,e,i){if(!e)return t;const h=i&&i.encode||Md;I.isFunction(i)&&(i={serialize:i});const m=i&&i.serialize;let A;if(m?A=m(e,i):A=I.isURLSearchParams(e)?e.toString():new vs(e,i).toString(h),A){const E=t.indexOf("#");E!==-1&&(t=t.slice(0,E)),t+=(t.indexOf("?")===-1?"?":"&")+A}return t}class Bd{constructor(){this.handlers=[]}use(e,i,h){return this.handlers.push({fulfilled:e,rejected:i,synchronous:h?h.synchronous:!1,runWhen:h?h.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(h){h!==null&&e(h)})}}const ar=Bd,On={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pd=typeof URLSearchParams<"u"?URLSearchParams:vs,Id=typeof FormData<"u"?FormData:null,Nd=typeof Blob<"u"?Blob:null,Hd={isBrowser:!0,classes:{URLSearchParams:Pd,FormData:Id,Blob:Nd},protocols:["http","https","file","blob","url","data"]},ms=typeof window<"u"&&typeof document<"u",Yi=typeof navigator=="object"&&navigator||void 0,$d=ms&&(!Yi||["ReactNative","NativeScript","NS"].indexOf(Yi.product)<0),Fd=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Wd=ms&&window.location.href||"http://localhost",Ud=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ms,hasStandardBrowserEnv:$d,hasStandardBrowserWebWorkerEnv:Fd,navigator:Yi,origin:Wd},Symbol.toStringTag,{value:"Module"})),ne={...Ud,...Hd};function jd(t,e){return pi(t,new ne.classes.URLSearchParams,Object.assign({visitor:function(i,h,m,A){return ne.isNode&&I.isBuffer(i)?(this.append(h,i.toString("base64")),!1):A.defaultVisitor.apply(this,arguments)}},e))}function Vd(t){return I.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function zd(t){const e={},i=Object.keys(t);let h;const m=i.length;let A;for(h=0;h<m;h++)A=i[h],e[A]=t[A];return e}function xn(t){function e(i,h,m,A){let E=i[A++];if(E==="__proto__")return!0;const r=Number.isFinite(+E),c=A>=i.length;return E=!E&&I.isArray(m)?m.length:E,c?(I.hasOwnProp(m,E)?m[E]=[m[E],h]:m[E]=h,!r):((!m[E]||!I.isObject(m[E]))&&(m[E]=[]),e(i,h,m[E],A)&&I.isArray(m[E])&&(m[E]=zd(m[E])),!r)}if(I.isFormData(t)&&I.isFunction(t.entries)){const i={};return I.forEachEntry(t,(h,m)=>{e(Vd(h),m,i,0)}),i}return null}function Kd(t,e,i){if(I.isString(t))try{return(e||JSON.parse)(t),I.trim(t)}catch(h){if(h.name!=="SyntaxError")throw h}return(i||JSON.stringify)(t)}const Ss={transitional:On,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const h=i.getContentType()||"",m=h.indexOf("application/json")>-1,A=I.isObject(e);if(A&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return m?JSON.stringify(xn(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e)||I.isReadableStream(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(A){if(h.indexOf("application/x-www-form-urlencoded")>-1)return jd(e,this.formSerializer).toString();if((r=I.isFileList(e))||h.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return pi(r?{"files[]":e}:e,c&&new c,this.formSerializer)}}return A||m?(i.setContentType("application/json",!1),Kd(e)):e}],transformResponse:[function(e){const i=this.transitional||Ss.transitional,h=i&&i.forcedJSONParsing,m=this.responseType==="json";if(I.isResponse(e)||I.isReadableStream(e))return e;if(e&&I.isString(e)&&(h&&!this.responseType||m)){const E=!(i&&i.silentJSONParsing)&&m;try{return JSON.parse(e)}catch(r){if(E)throw r.name==="SyntaxError"?J.from(r,J.ERR_BAD_RESPONSE,this,null,this.response):r}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ne.classes.FormData,Blob:ne.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],t=>{Ss.headers[t]={}});const bs=Ss,qd=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yd=t=>{const e={};let i,h,m;return t&&t.split(`
`).forEach(function(E){m=E.indexOf(":"),i=E.substring(0,m).trim().toLowerCase(),h=E.substring(m+1).trim(),!(!i||e[i]&&qd[i])&&(i==="set-cookie"?e[i]?e[i].push(h):e[i]=[h]:e[i]=e[i]?e[i]+", "+h:h)}),e},cr=Symbol("internals");function At(t){return t&&String(t).trim().toLowerCase()}function qt(t){return t===!1||t==null?t:I.isArray(t)?t.map(qt):String(t)}function Gd(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let h;for(;h=i.exec(t);)e[h[1]]=h[2];return e}const Xd=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ii(t,e,i,h,m){if(I.isFunction(h))return h.call(this,e,i);if(m&&(e=i),!!I.isString(e)){if(I.isString(h))return e.indexOf(h)!==-1;if(I.isRegExp(h))return h.test(e)}}function Jd(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,h)=>i.toUpperCase()+h)}function Zd(t,e){const i=I.toCamelCase(" "+e);["get","set","has"].forEach(h=>{Object.defineProperty(t,h+i,{value:function(m,A,E){return this[h].call(this,e,m,A,E)},configurable:!0})})}class gi{constructor(e){e&&this.set(e)}set(e,i,h){const m=this;function A(r,c,d){const f=At(c);if(!f)throw new Error("header name must be a non-empty string");const l=I.findKey(m,f);(!l||m[l]===void 0||d===!0||d===void 0&&m[l]!==!1)&&(m[l||c]=qt(r))}const E=(r,c)=>I.forEach(r,(d,f)=>A(d,f,c));if(I.isPlainObject(e)||e instanceof this.constructor)E(e,i);else if(I.isString(e)&&(e=e.trim())&&!Xd(e))E(Yd(e),i);else if(I.isObject(e)&&I.isIterable(e)){let r={},c,d;for(const f of e){if(!I.isArray(f))throw TypeError("Object iterator must return a key-value pair");r[d=f[0]]=(c=r[d])?I.isArray(c)?[...c,f[1]]:[c,f[1]]:f[1]}E(r,i)}else e!=null&&A(i,e,h);return this}get(e,i){if(e=At(e),e){const h=I.findKey(this,e);if(h){const m=this[h];if(!i)return m;if(i===!0)return Gd(m);if(I.isFunction(i))return i.call(this,m,h);if(I.isRegExp(i))return i.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=At(e),e){const h=I.findKey(this,e);return!!(h&&this[h]!==void 0&&(!i||Ii(this,this[h],h,i)))}return!1}delete(e,i){const h=this;let m=!1;function A(E){if(E=At(E),E){const r=I.findKey(h,E);r&&(!i||Ii(h,h[r],r,i))&&(delete h[r],m=!0)}}return I.isArray(e)?e.forEach(A):A(e),m}clear(e){const i=Object.keys(this);let h=i.length,m=!1;for(;h--;){const A=i[h];(!e||Ii(this,this[A],A,e,!0))&&(delete this[A],m=!0)}return m}normalize(e){const i=this,h={};return I.forEach(this,(m,A)=>{const E=I.findKey(h,A);if(E){i[E]=qt(m),delete i[A];return}const r=e?Jd(A):String(A).trim();r!==A&&delete i[A],i[r]=qt(m),h[r]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return I.forEach(this,(h,m)=>{h!=null&&h!==!1&&(i[m]=e&&I.isArray(h)?h.join(", "):h)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const h=new this(e);return i.forEach(m=>h.set(m)),h}static accessor(e){const h=(this[cr]=this[cr]={accessors:{}}).accessors,m=this.prototype;function A(E){const r=At(E);h[r]||(Zd(m,E),h[r]=!0)}return I.isArray(e)?e.forEach(A):A(e),this}}gi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(gi.prototype,({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(h){this[i]=h}}});I.freezeMethods(gi);const Ce=gi;function Ni(t,e){const i=this||bs,h=e||i,m=Ce.from(h.headers);let A=h.data;return I.forEach(t,function(r){A=r.call(i,A,m.normalize(),e?e.status:void 0)}),m.normalize(),A}function Mn(t){return!!(t&&t.__CANCEL__)}function bt(t,e,i){J.call(this,t??"canceled",J.ERR_CANCELED,e,i),this.name="CanceledError"}I.inherits(bt,J,{__CANCEL__:!0});function Bn(t,e,i){const h=i.config.validateStatus;!i.status||!h||h(i.status)?t(i):e(new J("Request failed with status code "+i.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Qd(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function eu(t,e){t=t||10;const i=new Array(t),h=new Array(t);let m=0,A=0,E;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),f=h[A];E||(E=d),i[m]=c,h[m]=d;let l=A,v=0;for(;l!==m;)v+=i[l++],l=l%t;if(m=(m+1)%t,m===A&&(A=(A+1)%t),d-E<e)return;const S=f&&d-f;return S?Math.round(v*1e3/S):void 0}}function tu(t,e){let i=0,h=1e3/e,m,A;const E=(d,f=Date.now())=>{i=f,m=null,A&&(clearTimeout(A),A=null),t.apply(null,d)};return[(...d)=>{const f=Date.now(),l=f-i;l>=h?E(d,f):(m=d,A||(A=setTimeout(()=>{A=null,E(m)},h-l)))},()=>m&&E(m)]}const ei=(t,e,i=3)=>{let h=0;const m=eu(50,250);return tu(A=>{const E=A.loaded,r=A.lengthComputable?A.total:void 0,c=E-h,d=m(c),f=E<=r;h=E;const l={loaded:E,total:r,progress:r?E/r:void 0,bytes:c,rate:d||void 0,estimated:d&&r&&f?(r-E)/d:void 0,event:A,lengthComputable:r!=null,[e?"download":"upload"]:!0};t(l)},i)},lr=(t,e)=>{const i=t!=null;return[h=>e[0]({lengthComputable:i,total:t,loaded:h}),e[1]]},hr=t=>(...e)=>I.asap(()=>t(...e)),iu=ne.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,ne.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(ne.origin),ne.navigator&&/(msie|trident)/i.test(ne.navigator.userAgent)):()=>!0,su=ne.hasStandardBrowserEnv?{write(t,e,i,h,m,A){const E=[t+"="+encodeURIComponent(e)];I.isNumber(i)&&E.push("expires="+new Date(i).toGMTString()),I.isString(h)&&E.push("path="+h),I.isString(m)&&E.push("domain="+m),A===!0&&E.push("secure"),document.cookie=E.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ru(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function nu(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Pn(t,e,i){let h=!ru(e);return t&&(h||i==!1)?nu(t,e):e}const dr=t=>t instanceof Ce?{...t}:t;function Ze(t,e){e=e||{};const i={};function h(d,f,l,v){return I.isPlainObject(d)&&I.isPlainObject(f)?I.merge.call({caseless:v},d,f):I.isPlainObject(f)?I.merge({},f):I.isArray(f)?f.slice():f}function m(d,f,l,v){if(I.isUndefined(f)){if(!I.isUndefined(d))return h(void 0,d,l,v)}else return h(d,f,l,v)}function A(d,f){if(!I.isUndefined(f))return h(void 0,f)}function E(d,f){if(I.isUndefined(f)){if(!I.isUndefined(d))return h(void 0,d)}else return h(void 0,f)}function r(d,f,l){if(l in e)return h(d,f);if(l in t)return h(void 0,d)}const c={url:A,method:A,data:A,baseURL:E,transformRequest:E,transformResponse:E,paramsSerializer:E,timeout:E,timeoutMessage:E,withCredentials:E,withXSRFToken:E,adapter:E,responseType:E,xsrfCookieName:E,xsrfHeaderName:E,onUploadProgress:E,onDownloadProgress:E,decompress:E,maxContentLength:E,maxBodyLength:E,beforeRedirect:E,transport:E,httpAgent:E,httpsAgent:E,cancelToken:E,socketPath:E,responseEncoding:E,validateStatus:r,headers:(d,f,l)=>m(dr(d),dr(f),l,!0)};return I.forEach(Object.keys(Object.assign({},t,e)),function(f){const l=c[f]||m,v=l(t[f],e[f],f);I.isUndefined(v)&&l!==r||(i[f]=v)}),i}const In=t=>{const e=Ze({},t);let{data:i,withXSRFToken:h,xsrfHeaderName:m,xsrfCookieName:A,headers:E,auth:r}=e;e.headers=E=Ce.from(E),e.url=kn(Pn(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),r&&E.set("Authorization","Basic "+btoa((r.username||"")+":"+(r.password?unescape(encodeURIComponent(r.password)):"")));let c;if(I.isFormData(i)){if(ne.hasStandardBrowserEnv||ne.hasStandardBrowserWebWorkerEnv)E.setContentType(void 0);else if((c=E.getContentType())!==!1){const[d,...f]=c?c.split(";").map(l=>l.trim()).filter(Boolean):[];E.setContentType([d||"multipart/form-data",...f].join("; "))}}if(ne.hasStandardBrowserEnv&&(h&&I.isFunction(h)&&(h=h(e)),h||h!==!1&&iu(e.url))){const d=m&&A&&su.read(A);d&&E.set(m,d)}return e},ou=typeof XMLHttpRequest<"u",au=ou&&function(t){return new Promise(function(i,h){const m=In(t);let A=m.data;const E=Ce.from(m.headers).normalize();let{responseType:r,onUploadProgress:c,onDownloadProgress:d}=m,f,l,v,S,b;function g(){S&&S(),b&&b(),m.cancelToken&&m.cancelToken.unsubscribe(f),m.signal&&m.signal.removeEventListener("abort",f)}let s=new XMLHttpRequest;s.open(m.method.toUpperCase(),m.url,!0),s.timeout=m.timeout;function o(){if(!s)return;const a=Ce.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders()),p={data:!r||r==="text"||r==="json"?s.responseText:s.response,status:s.status,statusText:s.statusText,headers:a,config:t,request:s};Bn(function(w){i(w),g()},function(w){h(w),g()},p),s=null}"onloadend"in s?s.onloadend=o:s.onreadystatechange=function(){!s||s.readyState!==4||s.status===0&&!(s.responseURL&&s.responseURL.indexOf("file:")===0)||setTimeout(o)},s.onabort=function(){s&&(h(new J("Request aborted",J.ECONNABORTED,t,s)),s=null)},s.onerror=function(){h(new J("Network Error",J.ERR_NETWORK,t,s)),s=null},s.ontimeout=function(){let u=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const p=m.transitional||On;m.timeoutErrorMessage&&(u=m.timeoutErrorMessage),h(new J(u,p.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,t,s)),s=null},A===void 0&&E.setContentType(null),"setRequestHeader"in s&&I.forEach(E.toJSON(),function(u,p){s.setRequestHeader(p,u)}),I.isUndefined(m.withCredentials)||(s.withCredentials=!!m.withCredentials),r&&r!=="json"&&(s.responseType=m.responseType),d&&([v,b]=ei(d,!0),s.addEventListener("progress",v)),c&&s.upload&&([l,S]=ei(c),s.upload.addEventListener("progress",l),s.upload.addEventListener("loadend",S)),(m.cancelToken||m.signal)&&(f=a=>{s&&(h(!a||a.type?new bt(null,t,s):a),s.abort(),s=null)},m.cancelToken&&m.cancelToken.subscribe(f),m.signal&&(m.signal.aborted?f():m.signal.addEventListener("abort",f)));const n=Qd(m.url);if(n&&ne.protocols.indexOf(n)===-1){h(new J("Unsupported protocol "+n+":",J.ERR_BAD_REQUEST,t));return}s.send(A||null)})},cu=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let h=new AbortController,m;const A=function(d){if(!m){m=!0,r();const f=d instanceof Error?d:this.reason;h.abort(f instanceof J?f:new bt(f instanceof Error?f.message:f))}};let E=e&&setTimeout(()=>{E=null,A(new J(`timeout ${e} of ms exceeded`,J.ETIMEDOUT))},e);const r=()=>{t&&(E&&clearTimeout(E),E=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(A):d.removeEventListener("abort",A)}),t=null)};t.forEach(d=>d.addEventListener("abort",A));const{signal:c}=h;return c.unsubscribe=()=>I.asap(r),c}},lu=cu,hu=function*(t,e){let i=t.byteLength;if(!e||i<e){yield t;return}let h=0,m;for(;h<i;)m=h+e,yield t.slice(h,m),h=m},du=async function*(t,e){for await(const i of uu(t))yield*hu(i,e)},uu=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:i,value:h}=await e.read();if(i)break;yield h}}finally{await e.cancel()}},ur=(t,e,i,h)=>{const m=du(t,e);let A=0,E,r=c=>{E||(E=!0,h&&h(c))};return new ReadableStream({async pull(c){try{const{done:d,value:f}=await m.next();if(d){r(),c.close();return}let l=f.byteLength;if(i){let v=A+=l;i(v)}c.enqueue(new Uint8Array(f))}catch(d){throw r(d),d}},cancel(c){return r(c),m.return()}},{highWaterMark:2})},vi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Nn=vi&&typeof ReadableStream=="function",fu=vi&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Hn=(t,...e)=>{try{return!!t(...e)}catch{return!1}},_u=Nn&&Hn(()=>{let t=!1;const e=new Request(ne.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),fr=64*1024,Gi=Nn&&Hn(()=>I.isReadableStream(new Response("").body)),ti={stream:Gi&&(t=>t.body)};vi&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ti[e]&&(ti[e]=I.isFunction(t[e])?i=>i[e]():(i,h)=>{throw new J(`Response type '${e}' is not supported`,J.ERR_NOT_SUPPORT,h)})})})(new Response);const pu=async t=>{if(t==null)return 0;if(I.isBlob(t))return t.size;if(I.isSpecCompliantForm(t))return(await new Request(ne.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(I.isArrayBufferView(t)||I.isArrayBuffer(t))return t.byteLength;if(I.isURLSearchParams(t)&&(t=t+""),I.isString(t))return(await fu(t)).byteLength},gu=async(t,e)=>{const i=I.toFiniteNumber(t.getContentLength());return i??pu(e)},vu=vi&&(async t=>{let{url:e,method:i,data:h,signal:m,cancelToken:A,timeout:E,onDownloadProgress:r,onUploadProgress:c,responseType:d,headers:f,withCredentials:l="same-origin",fetchOptions:v}=In(t);d=d?(d+"").toLowerCase():"text";let S=lu([m,A&&A.toAbortSignal()],E),b;const g=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let s;try{if(c&&_u&&i!=="get"&&i!=="head"&&(s=await gu(f,h))!==0){let p=new Request(e,{method:"POST",body:h,duplex:"half"}),C;if(I.isFormData(h)&&(C=p.headers.get("content-type"))&&f.setContentType(C),p.body){const[w,_]=lr(s,ei(hr(c)));h=ur(p.body,fr,w,_)}}I.isString(l)||(l=l?"include":"omit");const o="credentials"in Request.prototype;b=new Request(e,{...v,signal:S,method:i.toUpperCase(),headers:f.normalize().toJSON(),body:h,duplex:"half",credentials:o?l:void 0});let n=await fetch(b,v);const a=Gi&&(d==="stream"||d==="response");if(Gi&&(r||a&&g)){const p={};["status","statusText","headers"].forEach(y=>{p[y]=n[y]});const C=I.toFiniteNumber(n.headers.get("content-length")),[w,_]=r&&lr(C,ei(hr(r),!0))||[];n=new Response(ur(n.body,fr,w,()=>{_&&_(),g&&g()}),p)}d=d||"text";let u=await ti[I.findKey(ti,d)||"text"](n,t);return!a&&g&&g(),await new Promise((p,C)=>{Bn(p,C,{data:u,headers:Ce.from(n.headers),status:n.status,statusText:n.statusText,config:t,request:b})})}catch(o){throw g&&g(),o&&o.name==="TypeError"&&/Load failed|fetch/i.test(o.message)?Object.assign(new J("Network Error",J.ERR_NETWORK,t,b),{cause:o.cause||o}):J.from(o,o&&o.code,t,b)}}),Xi={http:kd,xhr:au,fetch:vu};I.forEach(Xi,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const _r=t=>`- ${t}`,mu=t=>I.isFunction(t)||t===null||t===!1,$n={getAdapter:t=>{t=I.isArray(t)?t:[t];const{length:e}=t;let i,h;const m={};for(let A=0;A<e;A++){i=t[A];let E;if(h=i,!mu(i)&&(h=Xi[(E=String(i)).toLowerCase()],h===void 0))throw new J(`Unknown adapter '${E}'`);if(h)break;m[E||"#"+A]=h}if(!h){const A=Object.entries(m).map(([r,c])=>`adapter ${r} `+(c===!1?"is not supported by the environment":"is not available in the build"));let E=e?A.length>1?`since :
`+A.map(_r).join(`
`):" "+_r(A[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+E,"ERR_NOT_SUPPORT")}return h},adapters:Xi};function Hi(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bt(null,t)}function pr(t){return Hi(t),t.headers=Ce.from(t.headers),t.data=Ni.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),$n.getAdapter(t.adapter||bs.adapter)(t).then(function(h){return Hi(t),h.data=Ni.call(t,t.transformResponse,h),h.headers=Ce.from(h.headers),h},function(h){return Mn(h)||(Hi(t),h&&h.response&&(h.response.data=Ni.call(t,t.transformResponse,h.response),h.response.headers=Ce.from(h.response.headers))),Promise.reject(h)})}const Fn="1.10.0",mi={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{mi[t]=function(h){return typeof h===t||"a"+(e<1?"n ":" ")+t}});const gr={};mi.transitional=function(e,i,h){function m(A,E){return"[Axios v"+Fn+"] Transitional option '"+A+"'"+E+(h?". "+h:"")}return(A,E,r)=>{if(e===!1)throw new J(m(E," has been removed"+(i?" in "+i:"")),J.ERR_DEPRECATED);return i&&!gr[E]&&(gr[E]=!0,console.warn(m(E," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(A,E,r):!0}};mi.spelling=function(e){return(i,h)=>(console.warn(`${h} is likely a misspelling of ${e}`),!0)};function Su(t,e,i){if(typeof t!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const h=Object.keys(t);let m=h.length;for(;m-- >0;){const A=h[m],E=e[A];if(E){const r=t[A],c=r===void 0||E(r,A,t);if(c!==!0)throw new J("option "+A+" must be "+c,J.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new J("Unknown option "+A,J.ERR_BAD_OPTION)}}const Yt={assertOptions:Su,validators:mi},we=Yt.validators;class ii{constructor(e){this.defaults=e||{},this.interceptors={request:new ar,response:new ar}}async request(e,i){try{return await this._request(e,i)}catch(h){if(h instanceof Error){let m={};Error.captureStackTrace?Error.captureStackTrace(m):m=new Error;const A=m.stack?m.stack.replace(/^.+\n/,""):"";try{h.stack?A&&!String(h.stack).endsWith(A.replace(/^.+\n.+\n/,""))&&(h.stack+=`
`+A):h.stack=A}catch{}}throw h}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=Ze(this.defaults,i);const{transitional:h,paramsSerializer:m,headers:A}=i;h!==void 0&&Yt.assertOptions(h,{silentJSONParsing:we.transitional(we.boolean),forcedJSONParsing:we.transitional(we.boolean),clarifyTimeoutError:we.transitional(we.boolean)},!1),m!=null&&(I.isFunction(m)?i.paramsSerializer={serialize:m}:Yt.assertOptions(m,{encode:we.function,serialize:we.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Yt.assertOptions(i,{baseUrl:we.spelling("baseURL"),withXsrfToken:we.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let E=A&&I.merge(A.common,A[i.method]);A&&I.forEach(["delete","get","head","post","put","patch","common"],b=>{delete A[b]}),i.headers=Ce.concat(E,A);const r=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(i)===!1||(c=c&&g.synchronous,r.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let f,l=0,v;if(!c){const b=[pr.bind(this),void 0];for(b.unshift.apply(b,r),b.push.apply(b,d),v=b.length,f=Promise.resolve(i);l<v;)f=f.then(b[l++],b[l++]);return f}v=r.length;let S=i;for(l=0;l<v;){const b=r[l++],g=r[l++];try{S=b(S)}catch(s){g.call(this,s);break}}try{f=pr.call(this,S)}catch(b){return Promise.reject(b)}for(l=0,v=d.length;l<v;)f=f.then(d[l++],d[l++]);return f}getUri(e){e=Ze(this.defaults,e);const i=Pn(e.baseURL,e.url,e.allowAbsoluteUrls);return kn(i,e.params,e.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(e){ii.prototype[e]=function(i,h){return this.request(Ze(h||{},{method:e,url:i,data:(h||{}).data}))}});I.forEach(["post","put","patch"],function(e){function i(h){return function(A,E,r){return this.request(Ze(r||{},{method:e,headers:h?{"Content-Type":"multipart/form-data"}:{},url:A,data:E}))}}ii.prototype[e]=i(),ii.prototype[e+"Form"]=i(!0)});const Gt=ii;class Cs{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(A){i=A});const h=this;this.promise.then(m=>{if(!h._listeners)return;let A=h._listeners.length;for(;A-- >0;)h._listeners[A](m);h._listeners=null}),this.promise.then=m=>{let A;const E=new Promise(r=>{h.subscribe(r),A=r}).then(m);return E.cancel=function(){h.unsubscribe(A)},E},e(function(A,E,r){h.reason||(h.reason=new bt(A,E,r),i(h.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=h=>{e.abort(h)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new Cs(function(m){e=m}),cancel:e}}}const bu=Cs;function Cu(t){return function(i){return t.apply(null,i)}}function Eu(t){return I.isObject(t)&&t.isAxiosError===!0}const Ji={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ji).forEach(([t,e])=>{Ji[e]=t});const yu=Ji;function Wn(t){const e=new Gt(t),i=mn(Gt.prototype.request,e);return I.extend(i,Gt.prototype,e,{allOwnKeys:!0}),I.extend(i,e,null,{allOwnKeys:!0}),i.create=function(m){return Wn(Ze(t,m))},i}const ie=Wn(bs);ie.Axios=Gt;ie.CanceledError=bt;ie.CancelToken=bu;ie.isCancel=Mn;ie.VERSION=Fn;ie.toFormData=pi;ie.AxiosError=J;ie.Cancel=ie.CanceledError;ie.all=function(e){return Promise.all(e)};ie.spread=Cu;ie.isAxiosError=Eu;ie.mergeConfig=Ze;ie.AxiosHeaders=Ce;ie.formToJSON=t=>xn(I.isHTMLForm(t)?new FormData(t):t);ie.getAdapter=$n.getAdapter;ie.HttpStatusCode=yu;ie.default=ie;const wu=ie;window.axios=wu;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Un={exports:{}};(function(t,e){(function(i,h){t.exports=h()})(self,()=>(()=>{var i={4567:function(E,r,c){var d=this&&this.__decorate||function(a,u,p,C){var w,_=arguments.length,y=_<3?u:C===null?C=Object.getOwnPropertyDescriptor(u,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,u,p,C);else for(var D=a.length-1;D>=0;D--)(w=a[D])&&(y=(_<3?w(y):_>3?w(u,p,y):w(u,p))||y);return _>3&&y&&Object.defineProperty(u,p,y),y},f=this&&this.__param||function(a,u){return function(p,C){u(p,C,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;const l=c(9042),v=c(6114),S=c(9924),b=c(844),g=c(5596),s=c(4725),o=c(3656);let n=r.AccessibilityManager=class extends b.Disposable{constructor(a,u){super(),this._terminal=a,this._renderService=u,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let p=0;p<this._terminal.rows;p++)this._rowElements[p]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[p]);if(this._topBoundaryFocusListener=p=>this._handleBoundaryFocus(p,0),this._bottomBoundaryFocusListener=p=>this._handleBoundaryFocus(p,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new S.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(p=>this._handleResize(p.rows))),this.register(this._terminal.onRender(p=>this._refreshRows(p.start,p.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(p=>this._handleChar(p))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(p=>this._handleTab(p))),this.register(this._terminal.onKey(p=>this._handleKey(p.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new g.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,o.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,b.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(a){for(let u=0;u<a;u++)this._handleChar(" ")}_handleChar(a){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(a){this._clearLiveRegion(),/\p{Control}/u.test(a)||this._charsToConsume.push(a)}_refreshRows(a,u){this._liveRegionDebouncer.refresh(a,u,this._terminal.rows)}_renderRows(a,u){const p=this._terminal.buffer,C=p.lines.length.toString();for(let w=a;w<=u;w++){const _=p.translateBufferLineToString(p.ydisp+w,!0),y=(p.ydisp+w+1).toString(),D=this._rowElements[w];D&&(_.length===0?D.innerText="":D.textContent=_,D.setAttribute("aria-posinset",y),D.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(a,u){const p=a.target,C=this._rowElements[u===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")===(u===0?"1":`${this._terminal.buffer.lines.length}`)||a.relatedTarget!==C)return;let w,_;if(u===0?(w=p,_=this._rowElements.pop(),this._rowContainer.removeChild(_)):(w=this._rowElements.shift(),_=p,this._rowContainer.removeChild(w)),w.removeEventListener("focus",this._topBoundaryFocusListener),_.removeEventListener("focus",this._bottomBoundaryFocusListener),u===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(u===0?-1:1),this._rowElements[u===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}_handleResize(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let u=this._rowContainer.children.length;u<this._terminal.rows;u++)this._rowElements[u]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[u]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const a=document.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}}_refreshRowDimensions(a){a.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=n=d([f(1,s.IRenderService)],n)},3614:(E,r)=>{function c(v){return v.replace(/\r?\n/g,"\r")}function d(v,S){return S?"\x1B[200~"+v+"\x1B[201~":v}function f(v,S,b,g){v=d(v=c(v),b.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),b.triggerDataEvent(v,!0),S.value=""}function l(v,S,b){const g=b.getBoundingClientRect(),s=v.clientX-g.left-10,o=v.clientY-g.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${s}px`,S.style.top=`${o}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=c,r.bracketTextForPaste=d,r.copyHandler=function(v,S){v.clipboardData&&v.clipboardData.setData("text/plain",S.selectionText),v.preventDefault()},r.handlePasteEvent=function(v,S,b,g){v.stopPropagation(),v.clipboardData&&f(v.clipboardData.getData("text/plain"),S,b,g)},r.paste=f,r.moveTextAreaUnderMouseCursor=l,r.rightClickHandler=function(v,S,b,g,s){l(v,S,b),s&&g.rightClickSelect(v),S.value=g.selectionText,S.select()}},7239:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;const d=c(1505);r.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(f,l,v){this._css.set(f,l,v)}getCss(f,l){return this._css.get(f,l)}setColor(f,l,v){this._color.set(f,l,v)}getColor(f,l){return this._color.get(f,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(c,d,f,l){c.addEventListener(d,f,l);let v=!1;return{dispose:()=>{v||(v=!0,c.removeEventListener(d,f,l))}}}},6465:function(E,r,c){var d=this&&this.__decorate||function(s,o,n,a){var u,p=arguments.length,C=p<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,o,n,a);else for(var w=s.length-1;w>=0;w--)(u=s[w])&&(C=(p<3?u(C):p>3?u(o,n,C):u(o,n))||C);return p>3&&C&&Object.defineProperty(o,n,C),C},f=this&&this.__param||function(s,o){return function(n,a){o(n,a,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier2=void 0;const l=c(3656),v=c(8460),S=c(844),b=c(2585);let g=r.Linkifier2=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(s){super(),this._bufferService=s,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(s){return this._linkProviders.push(s),{dispose:()=>{const o=this._linkProviders.indexOf(s);o!==-1&&this._linkProviders.splice(o,1)}}}attachToDom(s,o,n){this._element=s,this._mouseService=o,this._renderService=n,this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(s){if(this._lastMouseEvent=s,!this._element||!this._mouseService)return;const o=this._positionFromMouseEvent(s,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const n=s.composedPath();for(let a=0;a<n.length;a++){const u=n[a];if(u.classList.contains("xterm"))break;if(u.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(s){if(this._activeLine!==s.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(s,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,s)||(this._clearCurrentLink(),this._askForLink(s,!0))}_askForLink(s,o){var n,a;this._activeProviderReplies&&o||((n=this._activeProviderReplies)===null||n===void 0||n.forEach(p=>{p==null||p.forEach(C=>{C.link.dispose&&C.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=s.y);let u=!1;for(const[p,C]of this._linkProviders.entries())o?!((a=this._activeProviderReplies)===null||a===void 0)&&a.get(p)&&(u=this._checkLinkProviderResult(p,s,u)):C.provideLinks(s.y,w=>{var _,y;if(this._isMouseOut)return;const D=w==null?void 0:w.map(M=>({link:M}));(_=this._activeProviderReplies)===null||_===void 0||_.set(p,D),u=this._checkLinkProviderResult(p,s,u),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(s.y,this._activeProviderReplies)})}_removeIntersectingLinks(s,o){const n=new Set;for(let a=0;a<o.size;a++){const u=o.get(a);if(u)for(let p=0;p<u.length;p++){const C=u[p],w=C.link.range.start.y<s?0:C.link.range.start.x,_=C.link.range.end.y>s?this._bufferService.cols:C.link.range.end.x;for(let y=w;y<=_;y++){if(n.has(y)){u.splice(p--,1);break}n.add(y)}}}}_checkLinkProviderResult(s,o,n){var a;if(!this._activeProviderReplies)return n;const u=this._activeProviderReplies.get(s);let p=!1;for(let C=0;C<s;C++)this._activeProviderReplies.has(C)&&!this._activeProviderReplies.get(C)||(p=!0);if(!p&&u){const C=u.find(w=>this._linkAtPosition(w.link,o));C&&(n=!0,this._handleNewLink(C))}if(this._activeProviderReplies.size===this._linkProviders.length&&!n)for(let C=0;C<this._activeProviderReplies.size;C++){const w=(a=this._activeProviderReplies.get(C))===null||a===void 0?void 0:a.find(_=>this._linkAtPosition(_.link,o));if(w){n=!0,this._handleNewLink(w);break}}return n}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(s){if(!this._element||!this._mouseService||!this._currentLink)return;const o=this._positionFromMouseEvent(s,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(s,this._currentLink.link.text)}_clearCurrentLink(s,o){this._element&&this._currentLink&&this._lastMouseEvent&&(!s||!o||this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(s){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(s.link,o)&&(this._currentLink=s,this._currentLink.state={decorations:{underline:s.link.decorations===void 0||s.link.decorations.underline,pointerCursor:s.link.decorations===void 0||s.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,s.link,this._lastMouseEvent),s.link.decorations={},Object.defineProperties(s.link.decorations,{pointerCursor:{get:()=>{var n,a;return(a=(n=this._currentLink)===null||n===void 0?void 0:n.state)===null||a===void 0?void 0:a.decorations.pointerCursor},set:n=>{var a,u;!((a=this._currentLink)===null||a===void 0)&&a.state&&this._currentLink.state.decorations.pointerCursor!==n&&(this._currentLink.state.decorations.pointerCursor=n,this._currentLink.state.isHovered&&((u=this._element)===null||u===void 0||u.classList.toggle("xterm-cursor-pointer",n)))}},underline:{get:()=>{var n,a;return(a=(n=this._currentLink)===null||n===void 0?void 0:n.state)===null||a===void 0?void 0:a.decorations.underline},set:n=>{var a,u,p;!((a=this._currentLink)===null||a===void 0)&&a.state&&((p=(u=this._currentLink)===null||u===void 0?void 0:u.state)===null||p===void 0?void 0:p.decorations.underline)!==n&&(this._currentLink.state.decorations.underline=n,this._currentLink.state.isHovered&&this._fireUnderlineEvent(s.link,n))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(n=>{if(!this._currentLink)return;const a=n.start===0?0:n.start+1+this._bufferService.buffer.ydisp,u=this._bufferService.buffer.ydisp+1+n.end;if(this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=u&&(this._clearCurrentLink(a,u),this._lastMouseEvent&&this._element)){const p=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);p&&this._askForLink(p,!1)}})))}_linkHover(s,o,n){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&s.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(n,o.text)}_fireUnderlineEvent(s,o){const n=s.range,a=this._bufferService.buffer.ydisp,u=this._createLinkUnderlineEvent(n.start.x-1,n.start.y-a-1,n.end.x,n.end.y-a-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(u)}_linkLeave(s,o,n){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&s.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(n,o.text)}_linkAtPosition(s,o){const n=s.range.start.y*this._bufferService.cols+s.range.start.x,a=s.range.end.y*this._bufferService.cols+s.range.end.x,u=o.y*this._bufferService.cols+o.x;return n<=u&&u<=a}_positionFromMouseEvent(s,o,n){const a=n.getCoords(s,o,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(s,o,n,a,u){return{x1:s,y1:o,x2:n,y2:a,cols:this._bufferService.cols,fg:u}}};r.Linkifier2=g=d([f(0,b.IBufferService)],g)},9042:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(E,r,c){var d=this&&this.__decorate||function(g,s,o,n){var a,u=arguments.length,p=u<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,o):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(g,s,o,n);else for(var C=g.length-1;C>=0;C--)(a=g[C])&&(p=(u<3?a(p):u>3?a(s,o,p):a(s,o))||p);return u>3&&p&&Object.defineProperty(s,o,p),p},f=this&&this.__param||function(g,s){return function(o,n){s(o,n,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;const l=c(511),v=c(2585);let S=r.OscLinkProvider=class{constructor(g,s,o){this._bufferService=g,this._optionsService=s,this._oscLinkService=o}provideLinks(g,s){var o;const n=this._bufferService.buffer.lines.get(g-1);if(!n)return void s(void 0);const a=[],u=this._optionsService.rawOptions.linkHandler,p=new l.CellData,C=n.getTrimmedLength();let w=-1,_=-1,y=!1;for(let D=0;D<C;D++)if(_!==-1||n.hasContent(D)){if(n.loadCell(D,p),p.hasExtendedAttrs()&&p.extended.urlId){if(_===-1){_=D,w=p.extended.urlId;continue}y=p.extended.urlId!==w}else _!==-1&&(y=!0);if(y||_!==-1&&D===C-1){const M=(o=this._oscLinkService.getLinkData(w))===null||o===void 0?void 0:o.uri;if(M){const R={start:{x:_+1,y:g},end:{x:D+(y||D!==C-1?0:1),y:g}};let x=!1;if(!(u!=null&&u.allowNonHttpProtocols))try{const N=new URL(M);["http:","https:"].includes(N.protocol)||(x=!0)}catch{x=!0}x||a.push({text:M,range:R,activate:(N,$)=>u?u.activate(N,$,R):b(0,$),hover:(N,$)=>{var U;return(U=u==null?void 0:u.hover)===null||U===void 0?void 0:U.call(u,N,$,R)},leave:(N,$)=>{var U;return(U=u==null?void 0:u.leave)===null||U===void 0?void 0:U.call(u,N,$,R)}})}y=!1,p.hasExtendedAttrs()&&p.extended.urlId?(_=D,w=p.extended.urlId):(_=-1,w=-1)}}s(a)}};function b(g,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=S=d([f(0,v.IBufferService),f(1,v.IOptionsService),f(2,v.IOscLinkService)],S)},6193:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(c,d){this._parentWindow=c,this._renderCallback=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(c,d,f){this._rowCount=f,c=c!==void 0?c:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},5596:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ScreenDprMonitor=void 0;const d=c(844);class f extends d.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,d.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}r.ScreenDprMonitor=f},3236:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;const d=c(3614),f=c(3656),l=c(6465),v=c(9042),S=c(3730),b=c(1680),g=c(3107),s=c(5744),o=c(2950),n=c(1296),a=c(428),u=c(4269),p=c(5114),C=c(8934),w=c(3230),_=c(9312),y=c(4725),D=c(6731),M=c(8055),R=c(8969),x=c(8460),N=c(844),$=c(6114),U=c(8437),W=c(2584),L=c(7399),k=c(5941),O=c(9074),B=c(2585),j=c(5435),z=c(4567),Y=typeof window<"u"?window.document:null;class q extends R.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(T={}){super(T),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new N.MutableDisposable),this._onCursorMove=this.register(new x.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new x.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new x.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new x.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new x.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new x.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new x.EventEmitter),this._onBlur=this.register(new x.EventEmitter),this._onA11yCharEmitter=this.register(new x.EventEmitter),this._onA11yTabEmitter=this.register(new x.EventEmitter),this._onWillOpen=this.register(new x.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(l.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((P,F)=>this.refresh(P,F))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(P=>this._reportWindowsOptions(P))),this.register(this._inputHandler.onColor(P=>this._handleColorEvent(P))),this.register((0,x.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,x.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,x.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,x.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(P=>this._afterResize(P.cols,P.rows))),this.register((0,N.toDisposable)(()=>{var P,F;this._customKeyEventHandler=void 0,(F=(P=this.element)===null||P===void 0?void 0:P.parentNode)===null||F===void 0||F.removeChild(this.element)}))}_handleColorEvent(T){if(this._themeService)for(const P of T){let F,H="";switch(P.index){case 256:F="foreground",H="10";break;case 257:F="background",H="11";break;case 258:F="cursor",H="12";break;default:F="ansi",H="4;"+P.index}switch(P.type){case 0:const X=M.color.toColorRGB(F==="ansi"?this._themeService.colors.ansi[P.index]:this._themeService.colors[F]);this.coreService.triggerDataEvent(`${W.C0.ESC}]${H};${(0,k.toRgbString)(X)}${W.C1_ESCAPED.ST}`);break;case 1:if(F==="ansi")this._themeService.modifyColors(K=>K.ansi[P.index]=M.rgba.toColor(...P.color));else{const K=F;this._themeService.modifyColors(Q=>Q[K]=M.rgba.toColor(...P.color))}break;case 2:this._themeService.restoreColor(P.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(T){T?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(T){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[I"),this.updateCursorStyle(T),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var T;return(T=this.textarea)===null||T===void 0?void 0:T.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(W.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const T=this.buffer.ybase+this.buffer.y,P=this.buffer.lines.get(T);if(!P)return;const F=Math.min(this.buffer.x,this.cols-1),H=this._renderService.dimensions.css.cell.height,X=P.getWidth(F),K=this._renderService.dimensions.css.cell.width*X,Q=this.buffer.y*this._renderService.dimensions.css.cell.height,se=F*this._renderService.dimensions.css.cell.width;this.textarea.style.left=se+"px",this.textarea.style.top=Q+"px",this.textarea.style.width=K+"px",this.textarea.style.height=H+"px",this.textarea.style.lineHeight=H+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",P=>{this.hasSelection()&&(0,d.copyHandler)(P,this._selectionService)}));const T=P=>(0,d.handlePasteEvent)(P,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",T)),this.register((0,f.addDisposableDomListener)(this.element,"paste",T)),$.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",P=>{P.button===2&&(0,d.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",P=>{(0,d.rightClickHandler)(P,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",P=>{P.button===1&&(0,d.moveTextAreaUnderMouseCursor)(P,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",T=>this._keyUp(T),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",T=>this._keyDown(T),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",T=>this._keyPress(T),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",T=>this._compositionHelper.compositionupdate(T))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",T=>this._inputEvent(T),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(T){var P;if(!T)throw new Error("Terminal requires a parent element.");T.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=T.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),T.appendChild(this.element);const F=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),F.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),F.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(p.CoreBrowserService,this.textarea,(P=this._document.defaultView)!==null&&P!==void 0?P:window),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",H=>this._handleTextAreaFocus(H))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(a.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(u.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(H=>this._onRender.fire(H))),this.onResize(H=>this._renderService.resize(H.cols,H.rows)),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(F);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(b.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(_.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(H=>this.scrollLines(H.amount,H.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(H=>this._renderService.handleSelectionChanged(H.start,H.end,H.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(H=>{this.textarea.value=H,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(H=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",H=>this._selectionService.handleMouseDown(H))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",H=>this._handleScreenReaderModeOptionChange(H))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",H=>{!this._overviewRulerRenderer&&H&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const T=this,P=this.element;function F(K){const Q=T._mouseService.getMouseReportCoords(K,T.screenElement);if(!Q)return!1;let se,re;switch(K.overrideType||K.type){case"mousemove":re=32,K.buttons===void 0?(se=3,K.button!==void 0&&(se=K.button<3?K.button:3)):se=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":re=0,se=K.button<3?K.button:3;break;case"mousedown":re=1,se=K.button<3?K.button:3;break;case"wheel":if(T.viewport.getLinesScrolled(K)===0)return!1;re=K.deltaY<0?0:1,se=4;break;default:return!1}return!(re===void 0||se===void 0||se>4)&&T.coreMouseService.triggerMouseEvent({col:Q.col,row:Q.row,x:Q.x,y:Q.y,button:se,action:re,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}const H={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:K=>(F(K),K.buttons||(this._document.removeEventListener("mouseup",H.mouseup),H.mousedrag&&this._document.removeEventListener("mousemove",H.mousedrag)),this.cancel(K)),wheel:K=>(F(K),this.cancel(K,!0)),mousedrag:K=>{K.buttons&&F(K)},mousemove:K=>{K.buttons||F(K)}};this.register(this.coreMouseService.onProtocolChange(K=>{K?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(K)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&K?H.mousemove||(P.addEventListener("mousemove",X.mousemove),H.mousemove=X.mousemove):(P.removeEventListener("mousemove",H.mousemove),H.mousemove=null),16&K?H.wheel||(P.addEventListener("wheel",X.wheel,{passive:!1}),H.wheel=X.wheel):(P.removeEventListener("wheel",H.wheel),H.wheel=null),2&K?H.mouseup||(P.addEventListener("mouseup",X.mouseup),H.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",H.mouseup),P.removeEventListener("mouseup",H.mouseup),H.mouseup=null),4&K?H.mousedrag||(H.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",H.mousedrag),H.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(P,"mousedown",K=>{if(K.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(K))return F(K),H.mouseup&&this._document.addEventListener("mouseup",H.mouseup),H.mousedrag&&this._document.addEventListener("mousemove",H.mousedrag),this.cancel(K)})),this.register((0,f.addDisposableDomListener)(P,"wheel",K=>{if(!H.wheel){if(!this.buffer.hasScrollback){const Q=this.viewport.getLinesScrolled(K);if(Q===0)return;const se=W.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B");let re="";for(let De=0;De<Math.abs(Q);De++)re+=se;return this.coreService.triggerDataEvent(re,!0),this.cancel(K,!0)}return this.viewport.handleWheel(K)?this.cancel(K):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(P,"touchstart",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(K),this.cancel(K)},{passive:!0})),this.register((0,f.addDisposableDomListener)(P,"touchmove",K=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(K)?void 0:this.cancel(K)},{passive:!1}))}refresh(T,P){var F;(F=this._renderService)===null||F===void 0||F.refreshRows(T,P)}updateCursorStyle(T){var P;!((P=this._selectionService)===null||P===void 0)&&P.shouldColumnSelect(T)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(T,P,F=0){var H;F===1?(super.scrollLines(T,P,F),this.refresh(0,this.rows-1)):(H=this.viewport)===null||H===void 0||H.scrollLines(T)}paste(T){(0,d.paste)(T,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(T){this._customKeyEventHandler=T}registerLinkProvider(T){return this.linkifier2.registerLinkProvider(T)}registerCharacterJoiner(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const P=this._characterJoinerService.register(T);return this.refresh(0,this.rows-1),P}deregisterCharacterJoiner(T){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(T)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(T){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+T)}registerDecoration(T){return this._decorationService.registerDecoration(T)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(T,P,F){this._selectionService.setSelection(T,P,F)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var T;(T=this._selectionService)===null||T===void 0||T.clearSelection()}selectAll(){var T;(T=this._selectionService)===null||T===void 0||T.selectAll()}selectLines(T,P){var F;(F=this._selectionService)===null||F===void 0||F.selectLines(T,P)}_keyDown(T){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1)return!1;const P=this.browser.isMac&&this.options.macOptionIsMeta&&T.altKey;if(!P&&!this._compositionHelper.keydown(T))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;P||T.key!=="Dead"&&T.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const F=(0,L.evaluateKeyboardEvent)(T,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(T),F.type===3||F.type===2){const H=this.rows-1;return this.scrollLines(F.type===2?-H:H),this.cancel(T,!0)}return F.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,T)||(F.cancel&&this.cancel(T,!0),!F.key||!!(T.key&&!T.ctrlKey&&!T.altKey&&!T.metaKey&&T.key.length===1&&T.key.charCodeAt(0)>=65&&T.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(F.key!==W.C0.ETX&&F.key!==W.C0.CR||(this.textarea.value=""),this._onKey.fire({key:F.key,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(F.key,!0),!this.optionsService.rawOptions.screenReaderMode||T.altKey||T.ctrlKey?this.cancel(T,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(T,P){const F=T.isMac&&!this.options.macOptionIsMeta&&P.altKey&&!P.ctrlKey&&!P.metaKey||T.isWindows&&P.altKey&&P.ctrlKey&&!P.metaKey||T.isWindows&&P.getModifierState("AltGraph");return P.type==="keypress"?F:F&&(!P.keyCode||P.keyCode>47)}_keyUp(T){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1||(function(P){return P.keyCode===16||P.keyCode===17||P.keyCode===18}(T)||this.focus(),this.updateCursorStyle(T),this._keyPressHandled=!1)}_keyPress(T){let P;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(T)===!1)return!1;if(this.cancel(T),T.charCode)P=T.charCode;else if(T.which===null||T.which===void 0)P=T.keyCode;else{if(T.which===0||T.charCode===0)return!1;P=T.which}return!(!P||(T.altKey||T.ctrlKey||T.metaKey)&&!this._isThirdLevelShift(this.browser,T)||(P=String.fromCharCode(P),this._onKey.fire({key:P,domEvent:T}),this._showCursor(),this.coreService.triggerDataEvent(P,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(T){if(T.data&&T.inputType==="insertText"&&(!T.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const P=T.data;return this.coreService.triggerDataEvent(P,!0),this.cancel(T),!0}return!1}resize(T,P){T!==this.cols||P!==this.rows?super.resize(T,P):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(T,P){var F,H;(F=this._charSizeService)===null||F===void 0||F.measure(),(H=this.viewport)===null||H===void 0||H.syncScrollArea(!0)}clear(){var T;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let P=1;P<this.rows;P++)this.buffer.lines.push(this.buffer.getBlankLine(U.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(T=this.viewport)===null||T===void 0||T.reset(),this.refresh(0,this.rows-1)}}reset(){var T,P;this.options.rows=this.rows,this.options.cols=this.cols;const F=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)===null||T===void 0||T.reset(),this._decorationService.reset(),(P=this.viewport)===null||P===void 0||P.reset(),this._customKeyEventHandler=F,this.refresh(0,this.rows-1)}clearTextureAtlas(){var T;(T=this._renderService)===null||T===void 0||T.clearTextureAtlas()}_reportFocus(){var T;!((T=this.element)===null||T===void 0)&&T.classList.contains("focus")?this.coreService.triggerDataEvent(W.C0.ESC+"[I"):this.coreService.triggerDataEvent(W.C0.ESC+"[O")}_reportWindowsOptions(T){if(this._renderService)switch(T){case j.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const P=this._renderService.dimensions.css.canvas.width.toFixed(0),F=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[4;${F};${P}t`);break;case j.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const H=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${W.C0.ESC}[6;${X};${H}t`)}}cancel(T,P){if(this.options.cancelEvents||P)return T.preventDefault(),T.stopPropagation(),!1}}r.Terminal=q},9924:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(c,d=1e3){this._renderCallback=c,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,d,f){this._rowCount=f,c=c!==void 0?c:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=l-this._lastRefreshMs,S=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,d)}}},1680:function(E,r,c){var d=this&&this.__decorate||function(o,n,a,u){var p,C=arguments.length,w=C<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,n,a,u);else for(var _=o.length-1;_>=0;_--)(p=o[_])&&(w=(C<3?p(w):C>3?p(n,a,w):p(n,a))||w);return C>3&&w&&Object.defineProperty(n,a,w),w},f=this&&this.__param||function(o,n){return function(a,u){n(a,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;const l=c(3656),v=c(4725),S=c(8460),b=c(844),g=c(2585);let s=r.Viewport=class extends b.Disposable{constructor(o,n,a,u,p,C,w,_){super(),this._viewportElement=o,this._scrollArea=n,this._bufferService=a,this._optionsService=u,this._charSizeService=p,this._renderService=C,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(_.colors),this.register(_.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const n=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,n){const a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(n<0&&this._viewportElement.scrollTop!==0||n>0&&a<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const n=this._getPixelsScrolled(o);return n!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+n:this._smoothScrollState.target+=n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=n,this._bubbleScroll(o,n))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const n=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let n=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._currentRowHeight*this._bufferService.rows),n}getBufferElements(o,n){var a;let u,p="";const C=[],w=n??this._bufferService.buffer.lines.length,_=this._bufferService.buffer.lines;for(let y=o;y<w;y++){const D=_.get(y);if(!D)continue;const M=(a=_.get(y+1))===null||a===void 0?void 0:a.isWrapped;if(p+=D.translateToString(!M),!M||y===_.length-1){const R=document.createElement("div");R.textContent=p,C.push(R),p.length>0&&(u=R),p=""}}return{bufferElements:C,cursorElement:u}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let n=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(n/=this._currentRowHeight+0,this._wheelPartialScroll+=n,n=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._bufferService.rows),n}_applyScrollModifier(o,n){const a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&n.altKey||a==="ctrl"&&n.ctrlKey||a==="shift"&&n.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const n=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,n!==0&&(this._viewportElement.scrollTop+=n,this._bubbleScroll(o,n))}};r.Viewport=s=d([f(2,g.IBufferService),f(3,g.IOptionsService),f(4,v.ICharSizeService),f(5,v.IRenderService),f(6,v.ICoreBrowserService),f(7,v.IThemeService)],s)},3107:function(E,r,c){var d=this&&this.__decorate||function(s,o,n,a){var u,p=arguments.length,C=p<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,o,n,a);else for(var w=s.length-1;w>=0;w--)(u=s[w])&&(C=(p<3?u(C):p>3?u(o,n,C):u(o,n))||C);return p>3&&C&&Object.defineProperty(o,n,C),C},f=this&&this.__param||function(s,o){return function(n,a){o(n,a,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;const l=c(3656),v=c(4725),S=c(844),b=c(2585);let g=r.BufferDecorationRenderer=class extends S.Disposable{constructor(s,o,n,a){super(),this._screenElement=s,this._bufferService=o,this._decorationService=n,this._renderService=a,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(u=>this._removeDecoration(u))),this.register((0,S.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const s of this._decorationService.decorations)this._renderDecoration(s);this._dimensionsChanged=!1}_renderDecoration(s){this._refreshStyle(s),this._dimensionsChanged&&this._refreshXPosition(s)}_createElement(s){var o,n;const a=document.createElement("div");a.classList.add("xterm-decoration"),a.classList.toggle("xterm-decoration-top-layer",((o=s==null?void 0:s.options)===null||o===void 0?void 0:o.layer)==="top"),a.style.width=`${Math.round((s.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,a.style.height=(s.options.height||1)*this._renderService.dimensions.css.cell.height+"px",a.style.top=(s.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",a.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const u=(n=s.options.x)!==null&&n!==void 0?n:0;return u&&u>this._bufferService.cols&&(a.style.display="none"),this._refreshXPosition(s,a),a}_refreshStyle(s){const o=s.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)s.element&&(s.element.style.display="none",s.onRenderEmitter.fire(s.element));else{let n=this._decorationElements.get(s);n||(n=this._createElement(s),s.element=n,this._decorationElements.set(s,n),this._container.appendChild(n),s.onDispose(()=>{this._decorationElements.delete(s),n.remove()})),n.style.top=o*this._renderService.dimensions.css.cell.height+"px",n.style.display=this._altBufferIsActive?"none":"block",s.onRenderEmitter.fire(n)}}_refreshXPosition(s,o=s.element){var n;if(!o)return;const a=(n=s.options.x)!==null&&n!==void 0?n:0;(s.options.anchor||"left")==="right"?o.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(s){var o;(o=this._decorationElements.get(s))===null||o===void 0||o.remove(),this._decorationElements.delete(s),s.dispose()}};r.BufferDecorationRenderer=g=d([f(1,b.IBufferService),f(2,b.IDecorationService),f(3,v.IRenderService)],g)},5871:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const d of this._zones)if(d.color===c.options.overviewRulerOptions.color&&d.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,c.marker.line))return;if(this._lineAdjacentToZone(d,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(d,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,d){return d>=c.startBufferLine&&d<=c.endBufferLine}_lineAdjacentToZone(c,d,f){return d>=c.startBufferLine-this._linePadding[f||"full"]&&d<=c.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(c,d){c.startBufferLine=Math.min(c.startBufferLine,d),c.endBufferLine=Math.max(c.endBufferLine,d)}}},5744:function(E,r,c){var d=this&&this.__decorate||function(u,p,C,w){var _,y=arguments.length,D=y<3?p:w===null?w=Object.getOwnPropertyDescriptor(p,C):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(u,p,C,w);else for(var M=u.length-1;M>=0;M--)(_=u[M])&&(D=(y<3?_(D):y>3?_(p,C,D):_(p,C))||D);return y>3&&D&&Object.defineProperty(p,C,D),D},f=this&&this.__param||function(u,p){return function(C,w){p(C,w,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;const l=c(5871),v=c(3656),S=c(4725),b=c(844),g=c(2585),s={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},n={full:0,left:0,center:0,right:0};let a=r.OverviewRulerRenderer=class extends b.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(u,p,C,w,_,y,D){var M;super(),this._viewportElement=u,this._screenElement=p,this._bufferService=C,this._decorationService=w,this._renderService=_,this._optionsService=y,this._coreBrowseService=D,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)===null||M===void 0||M.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,b.toDisposable)(()=>{var x;(x=this._canvas)===null||x===void 0||x.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const u=Math.floor(this._canvas.width/3),p=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=u,o.center=p,o.right=u,this._refreshDrawHeightConstants(),n.full=0,n.left=0,n.center=o.left,n.right=o.left+o.center}_refreshDrawHeightConstants(){s.full=Math.round(2*this._coreBrowseService.dpr);const u=this._canvas.height/this._bufferService.buffer.lines.length,p=Math.round(Math.max(Math.min(u,12),6)*this._coreBrowseService.dpr);s.left=p,s.center=p,s.right=p}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const p of this._decorationService.decorations)this._colorZoneStore.addDecoration(p);this._ctx.lineWidth=1;const u=this._colorZoneStore.zones;for(const p of u)p.position!=="full"&&this._renderColorZone(p);for(const p of u)p.position==="full"&&this._renderColorZone(p);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(u){this._ctx.fillStyle=u.color,this._ctx.fillRect(n[u.position||"full"],Math.round((this._canvas.height-1)*(u.startBufferLine/this._bufferService.buffers.active.lines.length)-s[u.position||"full"]/2),o[u.position||"full"],Math.round((this._canvas.height-1)*((u.endBufferLine-u.startBufferLine)/this._bufferService.buffers.active.lines.length)+s[u.position||"full"]))}_queueRefresh(u,p){this._shouldUpdateDimensions=u||this._shouldUpdateDimensions,this._shouldUpdateAnchor=p||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=a=d([f(2,g.IBufferService),f(3,g.IDecorationService),f(4,S.IRenderService),f(5,g.IOptionsService),f(6,S.ICoreBrowserService)],a)},2950:function(E,r,c){var d=this&&this.__decorate||function(g,s,o,n){var a,u=arguments.length,p=u<3?s:n===null?n=Object.getOwnPropertyDescriptor(s,o):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(g,s,o,n);else for(var C=g.length-1;C>=0;C--)(a=g[C])&&(p=(u<3?a(p):u>3?a(s,o,p):a(s,o))||p);return u>3&&p&&Object.defineProperty(s,o,p),p},f=this&&this.__param||function(g,s){return function(o,n){s(o,n,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;const l=c(4725),v=c(2585),S=c(2584);let b=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,s,o,n,a,u){this._textarea=g,this._compositionView=s,this._bufferService=o,this._optionsService=n,this._coreService=a,this._renderService=u,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,s.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(s.start,s.end):this._textarea.value.substring(s.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const s=this._textarea.value,o=s.replace(g,"");this._dataAlreadySent=o,s.length>g.length?this._coreService.triggerDataEvent(o,!0):s.length<g.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):s.length===g.length&&s!==g&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,a=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const u=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(u.width,1)+"px",this._textarea.style.height=Math.max(u.height,1)+"px",this._textarea.style.lineHeight=u.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=b=d([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,v.ICoreService),f(5,l.IRenderService)],b)},9806:(E,r)=>{function c(d,f,l){const v=l.getBoundingClientRect(),S=d.getComputedStyle(l),b=parseInt(S.getPropertyValue("padding-left")),g=parseInt(S.getPropertyValue("padding-top"));return[f.clientX-v.left-b,f.clientY-v.top-g]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=c,r.getCoords=function(d,f,l,v,S,b,g,s,o){if(!b)return;const n=c(d,f,l);return n?(n[0]=Math.ceil((n[0]+(o?g/2:0))/g),n[1]=Math.ceil(n[1]/s),n[0]=Math.min(Math.max(n[0],1),v+(o?1:0)),n[1]=Math.min(Math.max(n[1],1),S),n):void 0}},9504:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;const d=c(2584);function f(s,o,n,a){const u=s-l(s,n),p=o-l(o,n),C=Math.abs(u-p)-function(w,_,y){let D=0;const M=w-l(w,y),R=_-l(_,y);for(let x=0;x<Math.abs(M-R);x++){const N=v(w,_)==="A"?-1:1,$=y.buffer.lines.get(M+N*x);$!=null&&$.isWrapped&&D++}return D}(s,o,n);return g(C,b(v(s,o),a))}function l(s,o){let n=0,a=o.buffer.lines.get(s),u=a==null?void 0:a.isWrapped;for(;u&&s>=0&&s<o.rows;)n++,a=o.buffer.lines.get(--s),u=a==null?void 0:a.isWrapped;return n}function v(s,o){return s>o?"A":"B"}function S(s,o,n,a,u,p){let C=s,w=o,_="";for(;C!==n||w!==a;)C+=u?1:-1,u&&C>p.cols-1?(_+=p.buffer.translateBufferLineToString(w,!1,s,C),C=0,s=0,w++):!u&&C<0&&(_+=p.buffer.translateBufferLineToString(w,!1,0,s+1),C=p.cols-1,s=C,w--);return _+p.buffer.translateBufferLineToString(w,!1,s,C)}function b(s,o){const n=o?"O":"[";return d.C0.ESC+n+s}function g(s,o){s=Math.floor(s);let n="";for(let a=0;a<s;a++)n+=o;return n}r.moveToCellSequence=function(s,o,n,a){const u=n.buffer.x,p=n.buffer.y;if(!n.buffer.hasScrollback)return function(_,y,D,M,R,x){return f(y,M,R,x).length===0?"":g(S(_,y,_,y-l(y,R),!1,R).length,b("D",x))}(u,p,0,o,n,a)+f(p,o,n,a)+function(_,y,D,M,R,x){let N;N=f(y,M,R,x).length>0?M-l(M,R):y;const $=M,U=function(W,L,k,O,B,j){let z;return z=f(k,O,B,j).length>0?O-l(O,B):L,W<k&&z<=O||W>=k&&z<O?"C":"D"}(_,y,D,M,R,x);return g(S(_,N,D,$,U==="C",R).length,b(U,x))}(u,p,s,o,n,a);let C;if(p===o)return C=u>s?"D":"C",g(Math.abs(u-s),b(C,a));C=p>o?"D":"C";const w=Math.abs(p-o);return g(function(_,y){return y.cols-_}(p>o?s:u,n)+(w-1)*n.cols+1+((p>o?u:s)-1),b(C,a))}},1296:function(E,r,c){var d=this&&this.__decorate||function(R,x,N,$){var U,W=arguments.length,L=W<3?x:$===null?$=Object.getOwnPropertyDescriptor(x,N):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(R,x,N,$);else for(var k=R.length-1;k>=0;k--)(U=R[k])&&(L=(W<3?U(L):W>3?U(x,N,L):U(x,N))||L);return W>3&&L&&Object.defineProperty(x,N,L),L},f=this&&this.__param||function(R,x){return function(N,$){x(N,$,R)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;const l=c(3787),v=c(2550),S=c(2223),b=c(6171),g=c(4725),s=c(8055),o=c(8460),n=c(844),a=c(2585),u="xterm-dom-renderer-owner-",p="xterm-rows",C="xterm-fg-",w="xterm-bg-",_="xterm-focus",y="xterm-selection";let D=1,M=r.DomRenderer=class extends n.Disposable{constructor(R,x,N,$,U,W,L,k,O,B){super(),this._element=R,this._screenElement=x,this._viewportElement=N,this._linkifier2=$,this._charSizeService=W,this._optionsService=L,this._bufferService=k,this._coreBrowserService=O,this._themeService=B,this._terminalClass=D++,this._rowElements=[],this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(p),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(y),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,b.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(j=>this._injectCss(j))),this._injectCss(this._themeService.colors),this._rowFactory=U.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(u+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(j=>this._handleLinkHover(j))),this.register(this._linkifier2.onHideLinkUnderline(j=>this._handleLinkLeave(j))),this.register((0,n.toDisposable)(()=>{this._element.classList.remove(u+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const N of this._rowElements)N.style.width=`${this.dimensions.css.canvas.width}px`,N.style.height=`${this.dimensions.css.cell.height}px`,N.style.lineHeight=`${this.dimensions.css.cell.height}px`,N.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const x=`${this._terminalSelector} .${p} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=x,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let x=`${this._terminalSelector} .${p} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;x+=`${this._terminalSelector} .${p} .xterm-dim { color: ${s.color.multiplyOpacity(R.foreground,.5).css};}`,x+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,x+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",x+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,x+=`${this._terminalSelector} .${p}.${_} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${p}.${_} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,x+=`${this._terminalSelector} .${y} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${y} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${y} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[N,$]of R.ansi.entries())x+=`${this._terminalSelector} .${C}${N} { color: ${$.css}; }${this._terminalSelector} .${C}${N}.xterm-dim { color: ${s.color.multiplyOpacity($,.5).css}; }${this._terminalSelector} .${w}${N} { background-color: ${$.css}; }`;x+=`${this._terminalSelector} .${C}${S.INVERTED_DEFAULT_COLOR} { color: ${s.color.opaque(R.background).css}; }${this._terminalSelector} .${C}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${s.color.multiplyOpacity(s.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${w}${S.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=x}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,x){for(let N=this._rowElements.length;N<=x;N++){const $=document.createElement("div");this._rowContainer.appendChild($),this._rowElements.push($)}for(;this._rowElements.length>x;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,x){this._refreshRowElements(R,x),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(_)}handleFocus(){this._rowContainer.classList.add(_),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,x,N){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,x,N),this.renderRows(0,this._bufferService.rows-1),!R||!x)return;const $=R[1]-this._bufferService.buffer.ydisp,U=x[1]-this._bufferService.buffer.ydisp,W=Math.max($,0),L=Math.min(U,this._bufferService.rows-1);if(W>=this._bufferService.rows||L<0)return;const k=document.createDocumentFragment();if(N){const O=R[0]>x[0];k.appendChild(this._createSelectionElement(W,O?x[0]:R[0],O?R[0]:x[0],L-W+1))}else{const O=$===W?R[0]:0,B=W===U?x[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(W,O,B));const j=L-W-1;if(k.appendChild(this._createSelectionElement(W+1,0,this._bufferService.cols,j)),W!==L){const z=U===L?x[0]:this._bufferService.cols;k.appendChild(this._createSelectionElement(L,0,z))}}this._selectionContainer.appendChild(k)}_createSelectionElement(R,x,N,$=1){const U=document.createElement("div");return U.style.height=$*this.dimensions.css.cell.height+"px",U.style.top=R*this.dimensions.css.cell.height+"px",U.style.left=x*this.dimensions.css.cell.width+"px",U.style.width=this.dimensions.css.cell.width*(N-x)+"px",U}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,x){const N=this._bufferService.buffer,$=N.ybase+N.y,U=Math.min(N.x,this._bufferService.cols-1),W=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,k=this._optionsService.rawOptions.cursorInactiveStyle;for(let O=R;O<=x;O++){const B=O+N.ydisp,j=this._rowElements[O],z=N.lines.get(B);if(!j||!z)break;j.replaceChildren(...this._rowFactory.createRow(z,B,B===$,L,k,U,W,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${u}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,x,N,$,U,W){N<0&&(R=0),$<0&&(x=0);const L=this._bufferService.rows-1;N=Math.max(Math.min(N,L),0),$=Math.max(Math.min($,L),0),U=Math.min(U,this._bufferService.cols);const k=this._bufferService.buffer,O=k.ybase+k.y,B=Math.min(k.x,U-1),j=this._optionsService.rawOptions.cursorBlink,z=this._optionsService.rawOptions.cursorStyle,Y=this._optionsService.rawOptions.cursorInactiveStyle;for(let q=N;q<=$;++q){const ee=q+k.ydisp,T=this._rowElements[q],P=k.lines.get(ee);if(!T||!P)break;T.replaceChildren(...this._rowFactory.createRow(P,ee,ee===O,z,Y,B,j,this.dimensions.css.cell.width,this._widthCache,W?q===N?R:0:-1,W?(q===$?x:U)-1:-1))}}};r.DomRenderer=M=d([f(4,a.IInstantiationService),f(5,g.ICharSizeService),f(6,a.IOptionsService),f(7,a.IBufferService),f(8,g.ICoreBrowserService),f(9,g.IThemeService)],M)},3787:function(E,r,c){var d=this&&this.__decorate||function(C,w,_,y){var D,M=arguments.length,R=M<3?w:y===null?y=Object.getOwnPropertyDescriptor(w,_):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(C,w,_,y);else for(var x=C.length-1;x>=0;x--)(D=C[x])&&(R=(M<3?D(R):M>3?D(w,_,R):D(w,_))||R);return M>3&&R&&Object.defineProperty(w,_,R),R},f=this&&this.__param||function(C,w){return function(_,y){w(_,y,C)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;const l=c(2223),v=c(643),S=c(511),b=c(2585),g=c(8055),s=c(4725),o=c(4269),n=c(6171),a=c(3734);let u=r.DomRendererRowFactory=class{constructor(C,w,_,y,D,M,R){this._document=C,this._characterJoinerService=w,this._optionsService=_,this._coreBrowserService=y,this._coreService=D,this._decorationService=M,this._themeService=R,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,w,_){this._selectionStart=C,this._selectionEnd=w,this._columnSelectMode=_}createRow(C,w,_,y,D,M,R,x,N,$,U){const W=[],L=this._characterJoinerService.getJoinedCharacters(w),k=this._themeService.colors;let O,B=C.getNoBgTrimmedLength();_&&B<M+1&&(B=M+1);let j=0,z="",Y=0,q=0,ee=0,T=!1,P=0,F=!1,H=0;const X=[],K=$!==-1&&U!==-1;for(let Q=0;Q<B;Q++){C.loadCell(Q,this._workCell);let se=this._workCell.getWidth();if(se===0)continue;let re=!1,De=Q,Z=this._workCell;if(L.length>0&&Q===L[0][0]){re=!0;const te=L.shift();Z=new o.JoinedCellData(this._workCell,C.translateToString(!0,te[0],te[1]),te[1]-te[0]),De=te[1]-1,se=Z.getWidth()}const Ve=this._isCellInSelection(Q,w),Ct=_&&Q===M,Se=K&&Q>=$&&Q<=U;let Be=!1;this._decorationService.forEachDecorationAtCell(Q,w,void 0,te=>{Be=!0});let ze=Z.getChars()||v.WHITESPACE_CELL_CHAR;if(ze===" "&&(Z.isUnderline()||Z.isOverline())&&(ze=""),H=se*x-N.get(ze,Z.isBold(),Z.isItalic()),O){if(j&&(Ve&&F||!Ve&&!F&&Z.bg===Y)&&(Ve&&F&&k.selectionForeground||Z.fg===q)&&Z.extended.ext===ee&&Se===T&&H===P&&!Ct&&!re&&!Be){z+=ze,j++;continue}j&&(O.textContent=z),O=this._document.createElement("span"),j=0,z=""}else O=this._document.createElement("span");if(Y=Z.bg,q=Z.fg,ee=Z.extended.ext,T=Se,P=H,F=Ve,re&&M>=Q&&M<=De&&(M=Q),!this._coreService.isCursorHidden&&Ct){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)R&&X.push("xterm-cursor-blink"),X.push(y==="bar"?"xterm-cursor-bar":y==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(Z.isBold()&&X.push("xterm-bold"),Z.isItalic()&&X.push("xterm-italic"),Z.isDim()&&X.push("xterm-dim"),z=Z.isInvisible()?v.WHITESPACE_CELL_CHAR:Z.getChars()||v.WHITESPACE_CELL_CHAR,Z.isUnderline()&&(X.push(`xterm-underline-${Z.extended.underlineStyle}`),z===" "&&(z=""),!Z.isUnderlineColorDefault()))if(Z.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${a.AttributeData.toColorRGB(Z.getUnderlineColor()).join(",")})`;else{let te=Z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Z.isBold()&&te<8&&(te+=8),O.style.textDecorationColor=k.ansi[te].css}Z.isOverline()&&(X.push("xterm-overline"),z===" "&&(z="")),Z.isStrikethrough()&&X.push("xterm-strikethrough"),Se&&(O.style.textDecoration="underline");let oe=Z.getFgColor(),Re=Z.getFgColorMode(),de=Z.getBgColor(),Pe=Z.getBgColorMode();const tt=!!Z.isInverse();if(tt){const te=oe;oe=de,de=te;const Vn=Re;Re=Pe,Pe=Vn}let be,Si,Ie,Et=!1;switch(this._decorationService.forEachDecorationAtCell(Q,w,void 0,te=>{te.options.layer!=="top"&&Et||(te.backgroundColorRGB&&(Pe=50331648,de=te.backgroundColorRGB.rgba>>8&16777215,be=te.backgroundColorRGB),te.foregroundColorRGB&&(Re=50331648,oe=te.foregroundColorRGB.rgba>>8&16777215,Si=te.foregroundColorRGB),Et=te.options.layer==="top")}),!Et&&Ve&&(be=this._coreBrowserService.isFocused?k.selectionBackgroundOpaque:k.selectionInactiveBackgroundOpaque,de=be.rgba>>8&16777215,Pe=50331648,Et=!0,k.selectionForeground&&(Re=50331648,oe=k.selectionForeground.rgba>>8&16777215,Si=k.selectionForeground)),Et&&X.push("xterm-decoration-top"),Pe){case 16777216:case 33554432:Ie=k.ansi[de],X.push(`xterm-bg-${de}`);break;case 50331648:Ie=g.rgba.toColor(de>>16,de>>8&255,255&de),this._addStyle(O,`background-color:#${p((de>>>0).toString(16),"0",6)}`);break;default:tt?(Ie=k.foreground,X.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):Ie=k.background}switch(be||Z.isDim()&&(be=g.color.multiplyOpacity(Ie,.5)),Re){case 16777216:case 33554432:Z.isBold()&&oe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(oe+=8),this._applyMinimumContrast(O,Ie,k.ansi[oe],Z,be,void 0)||X.push(`xterm-fg-${oe}`);break;case 50331648:const te=g.rgba.toColor(oe>>16&255,oe>>8&255,255&oe);this._applyMinimumContrast(O,Ie,te,Z,be,Si)||this._addStyle(O,`color:#${p(oe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,Ie,k.foreground,Z,be,void 0)||tt&&X.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}X.length&&(O.className=X.join(" "),X.length=0),Ct||re||Be?O.textContent=z:j++,H!==this.defaultSpacing&&(O.style.letterSpacing=`${H}px`),W.push(O),Q=De}return O&&j&&(O.textContent=z),W}_applyMinimumContrast(C,w,_,y,D,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,n.excludeFromContrastRatioDemands)(y.getCode()))return!1;const R=this._getContrastCache(y);let x;if(D||M||(x=R.getColor(w.rgba,_.rgba)),x===void 0){const N=this._optionsService.rawOptions.minimumContrastRatio/(y.isDim()?2:1);x=g.color.ensureContrastRatio(D||w,M||_,N),R.setColor((D||w).rgba,(M||_).rgba,x??null)}return!!x&&(this._addStyle(C,`color:${x.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,w){C.setAttribute("style",`${C.getAttribute("style")||""}${w};`)}_isCellInSelection(C,w){const _=this._selectionStart,y=this._selectionEnd;return!(!_||!y)&&(this._columnSelectMode?_[0]<=y[0]?C>=_[0]&&w>=_[1]&&C<y[0]&&w<=y[1]:C<_[0]&&w>=_[1]&&C>=y[0]&&w<=y[1]:w>_[1]&&w<y[1]||_[1]===y[1]&&w===_[1]&&C>=_[0]&&C<y[0]||_[1]<y[1]&&w===y[1]&&C<y[0]||_[1]<y[1]&&w===_[1]&&C>=_[0])}};function p(C,w,_){for(;C.length<_;)C=w+C;return C}r.DomRendererRowFactory=u=d([f(1,s.ICharacterJoinerService),f(2,b.IOptionsService),f(3,s.ICoreBrowserService),f(4,b.ICoreService),f(5,b.IDecorationService),f(6,s.IThemeService)],u)},2550:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const d=c.createElement("span"),f=c.createElement("span");f.style.fontWeight="bold";const l=c.createElement("span");l.style.fontStyle="italic";const v=c.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[d,f,l,v],this._container.appendChild(d),this._container.appendChild(f),this._container.appendChild(l),this._container.appendChild(v),c.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,d,f,l){c===this._font&&d===this._fontSize&&f===this._weight&&l===this._weightBold||(this._font=c,this._fontSize=d,this._weight=f,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(c,d,f){let l=0;if(!d&&!f&&c.length===1&&(l=c.charCodeAt(0))<256)return this._flat[l]!==-9999?this._flat[l]:this._flat[l]=this._measure(c,0);let v=c;d&&(v+="B"),f&&(v+="I");let S=this._holey.get(v);if(S===void 0){let b=0;d&&(b|=1),f&&(b|=2),S=this._measure(c,b),this._holey.set(v,S)}return S}_measure(c,d){const f=this._measureElements[d];return f.textContent=c.repeat(32),f.offsetWidth/32}}},2223:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;const d=c(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(E,r)=>{function c(d){return 57508<=d&&d<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(d){if(!d)throw new Error("value must not be falsy");return d},r.isPowerlineGlyph=c,r.isRestrictedPowerlineGlyph=function(d){return 57520<=d&&d<=57527},r.excludeFromContrastRatioDemands=function(d){return c(d)||function(f){return 9472<=f&&f<=9631}(d)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,d=this.selectionEnd;return!(!c||!d)&&(c[1]>d[1]||c[1]===d[1]&&c[0]>d[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(E,r,c){var d=this&&this.__decorate||function(s,o,n,a){var u,p=arguments.length,C=p<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,o,n,a);else for(var w=s.length-1;w>=0;w--)(u=s[w])&&(C=(p<3?u(C):p>3?u(o,n,C):u(o,n))||C);return p>3&&C&&Object.defineProperty(o,n,C),C},f=this&&this.__param||function(s,o){return function(n,a){o(n,a,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;const l=c(2585),v=c(8460),S=c(844);let b=r.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(s,o,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new g(s,o,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())}};r.CharSizeService=b=d([f(2,l.IOptionsService)],b);class g{constructor(o,n,a){this._document=o,this._parentElement=n,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const o={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return o.width!==0&&o.height!==0&&(this._result.width=o.width/32,this._result.height=Math.ceil(o.height)),this._result}}},4269:function(E,r,c){var d=this&&this.__decorate||function(o,n,a,u){var p,C=arguments.length,w=C<3?n:u===null?u=Object.getOwnPropertyDescriptor(n,a):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(o,n,a,u);else for(var _=o.length-1;_>=0;_--)(p=o[_])&&(w=(C<3?p(w):C>3?p(n,a,w):p(n,a))||w);return C>3&&w&&Object.defineProperty(n,a,w),w},f=this&&this.__param||function(o,n){return function(a,u){n(a,u,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;const l=c(3734),v=c(643),S=c(511),b=c(2585);class g extends l.AttributeData{constructor(n,a,u){super(),this.content=0,this.combinedData="",this.fg=n.fg,this.bg=n.bg,this.combinedData=a,this._width=u}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(n){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=g;let s=r.CharacterJoinerService=class jn{constructor(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(n){const a={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(a),a.id}deregister(n){for(let a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===n)return this._characterJoiners.splice(a,1),!0;return!1}getJoinedCharacters(n){if(this._characterJoiners.length===0)return[];const a=this._bufferService.buffer.lines.get(n);if(!a||a.length===0)return[];const u=[],p=a.translateToString(!0);let C=0,w=0,_=0,y=a.getFg(0),D=a.getBg(0);for(let M=0;M<a.getTrimmedLength();M++)if(a.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==D){if(M-C>1){const R=this._getJoinedRanges(p,_,w,a,C);for(let x=0;x<R.length;x++)u.push(R[x])}C=M,_=w,y=this._workCell.fg,D=this._workCell.bg}w+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const M=this._getJoinedRanges(p,_,w,a,C);for(let R=0;R<M.length;R++)u.push(M[R])}return u}_getJoinedRanges(n,a,u,p,C){const w=n.substring(a,u);let _=[];try{_=this._characterJoiners[0].handler(w)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{const D=this._characterJoiners[y].handler(w);for(let M=0;M<D.length;M++)jn._mergeRanges(_,D[M])}catch(D){console.error(D)}return this._stringRangesToCellRanges(_,p,C),_}_stringRangesToCellRanges(n,a,u){let p=0,C=!1,w=0,_=n[p];if(_){for(let y=u;y<this._bufferService.cols;y++){const D=a.getWidth(y),M=a.getString(y).length||v.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!C&&_[0]<=w&&(_[0]=y,C=!0),_[1]<=w){if(_[1]=y,_=n[++p],!_)break;_[0]<=w?(_[0]=y,C=!0):C=!1}w+=M}}_&&(_[1]=this._bufferService.cols)}}static _mergeRanges(n,a){let u=!1;for(let p=0;p<n.length;p++){const C=n[p];if(u){if(a[1]<=C[0])return n[p-1][1]=a[1],n;if(a[1]<=C[1])return n[p-1][1]=Math.max(a[1],C[1]),n.splice(p,1),n;n.splice(p,1),p--}else{if(a[1]<=C[0])return n.splice(p,0,a),n;if(a[1]<=C[1])return C[0]=Math.min(a[0],C[0]),n;a[0]<C[1]&&(C[0]=Math.min(a[0],C[0]),u=!0)}}return u?n[n.length-1][1]=a[1]:n.push(a),n}};r.CharacterJoinerService=s=d([f(0,b.IBufferService)],s)},5114:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0,r.CoreBrowserService=class{constructor(c,d){this._textarea=c,this.window=d,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(E,r,c){var d=this&&this.__decorate||function(b,g,s,o){var n,a=arguments.length,u=a<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(b,g,s,o);else for(var p=b.length-1;p>=0;p--)(n=b[p])&&(u=(a<3?n(u):a>3?n(g,s,u):n(g,s))||u);return a>3&&u&&Object.defineProperty(g,s,u),u},f=this&&this.__param||function(b,g){return function(s,o){g(s,o,b)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;const l=c(4725),v=c(9806);let S=r.MouseService=class{constructor(b,g){this._renderService=b,this._charSizeService=g}getCoords(b,g,s,o,n){return(0,v.getCoords)(window,b,g,s,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(b,g){const s=(0,v.getCoordsRelativeToElement)(window,b,g);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};r.MouseService=S=d([f(0,l.IRenderService),f(1,l.ICharSizeService)],S)},3230:function(E,r,c){var d=this&&this.__decorate||function(u,p,C,w){var _,y=arguments.length,D=y<3?p:w===null?w=Object.getOwnPropertyDescriptor(p,C):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(u,p,C,w);else for(var M=u.length-1;M>=0;M--)(_=u[M])&&(D=(y<3?_(D):y>3?_(p,C,D):_(p,C))||D);return y>3&&D&&Object.defineProperty(p,C,D),D},f=this&&this.__param||function(u,p){return function(C,w){p(C,w,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;const l=c(3656),v=c(6193),S=c(5596),b=c(4725),g=c(8460),s=c(844),o=c(7226),n=c(2585);let a=r.RenderService=class extends s.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(u,p,C,w,_,y,D,M){if(super(),this._rowCount=u,this._charSizeService=w,this._renderer=this.register(new s.MutableDisposable),this._pausedResizeTask=new o.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new g.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new g.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new g.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new g.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(D.window,(R,x)=>this._renderRows(R,x)),this.register(this._renderDebouncer),this._screenDprMonitor=new S.ScreenDprMonitor(D.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var R;return(R=this._renderer.value)===null||R===void 0?void 0:R.clear()})),this.register(C.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(_.onDecorationRegistered(()=>this._fullRefresh())),this.register(_.onDecorationRemoved(()=>this._fullRefresh())),this.register(C.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(C.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,l.addDisposableDomListener)(D.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(M.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in D.window){const R=new D.window.IntersectionObserver(x=>this._handleIntersectionChange(x[x.length-1]),{threshold:0});R.observe(p),this.register({dispose:()=>R.disconnect()})}}_handleIntersectionChange(u){this._isPaused=u.isIntersecting===void 0?u.intersectionRatio===0:!u.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(u,p,C=!1){this._isPaused?this._needsFullRefresh=!0:(C||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(u,p,this._rowCount))}_renderRows(u,p){this._renderer.value&&(u=Math.min(u,this._rowCount-1),p=Math.min(p,this._rowCount-1),this._renderer.value.renderRows(u,p),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:u,end:p}),this._onRender.fire({start:u,end:p}),this._isNextRenderRedrawOnly=!0)}resize(u,p){this._rowCount=p,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(u){this._renderer.value=u,this._renderer.value.onRequestRedraw(p=>this.refreshRows(p.start,p.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(u){return this._renderDebouncer.addRefreshCallback(u)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var u,p;this._renderer.value&&((p=(u=this._renderer.value).clearTextureAtlas)===null||p===void 0||p.call(u),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(u,p){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(u,p)):this._renderer.value.handleResize(u,p),this._fullRefresh())}handleCharSizeChanged(){var u;(u=this._renderer.value)===null||u===void 0||u.handleCharSizeChanged()}handleBlur(){var u;(u=this._renderer.value)===null||u===void 0||u.handleBlur()}handleFocus(){var u;(u=this._renderer.value)===null||u===void 0||u.handleFocus()}handleSelectionChanged(u,p,C){var w;this._selectionState.start=u,this._selectionState.end=p,this._selectionState.columnSelectMode=C,(w=this._renderer.value)===null||w===void 0||w.handleSelectionChanged(u,p,C)}handleCursorMove(){var u;(u=this._renderer.value)===null||u===void 0||u.handleCursorMove()}clear(){var u;(u=this._renderer.value)===null||u===void 0||u.clear()}};r.RenderService=a=d([f(2,n.IOptionsService),f(3,b.ICharSizeService),f(4,n.IDecorationService),f(5,n.IBufferService),f(6,b.ICoreBrowserService),f(7,b.IThemeService)],a)},9312:function(E,r,c){var d=this&&this.__decorate||function(_,y,D,M){var R,x=arguments.length,N=x<3?y:M===null?M=Object.getOwnPropertyDescriptor(y,D):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(_,y,D,M);else for(var $=_.length-1;$>=0;$--)(R=_[$])&&(N=(x<3?R(N):x>3?R(y,D,N):R(y,D))||N);return x>3&&N&&Object.defineProperty(y,D,N),N},f=this&&this.__param||function(_,y){return function(D,M){y(D,M,_)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;const l=c(9806),v=c(9504),S=c(456),b=c(4725),g=c(8460),s=c(844),o=c(6114),n=c(4841),a=c(511),u=c(2585),p=String.fromCharCode(160),C=new RegExp(p,"g");let w=r.SelectionService=class extends s.Disposable{constructor(_,y,D,M,R,x,N,$,U){super(),this._element=_,this._screenElement=y,this._linkifier=D,this._bufferService=M,this._coreService=R,this._mouseService=x,this._optionsService=N,this._renderService=$,this._coreBrowserService=U,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new a.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=W=>this._handleMouseMove(W),this._mouseUpListener=W=>this._handleMouseUp(W),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(W=>this._handleTrim(W)),this.register(this._bufferService.buffers.onBufferActivate(W=>this._handleBufferActivate(W))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const _=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!_||!y||_[0]===y[0]&&_[1]===y[1])}get selectionText(){const _=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!_||!y)return"";const D=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(_[0]===y[0])return"";const R=_[0]<y[0]?_[0]:y[0],x=_[0]<y[0]?y[0]:_[0];for(let N=_[1];N<=y[1];N++){const $=D.translateBufferLineToString(N,!0,R,x);M.push($)}}else{const R=_[1]===y[1]?y[0]:void 0;M.push(D.translateBufferLineToString(_[1],!0,_[0],R));for(let x=_[1]+1;x<=y[1]-1;x++){const N=D.lines.get(x),$=D.translateBufferLineToString(x,!0);N!=null&&N.isWrapped?M[M.length-1]+=$:M.push($)}if(_[1]!==y[1]){const x=D.lines.get(y[1]),N=D.translateBufferLineToString(y[1],!0,0,y[0]);x&&x.isWrapped?M[M.length-1]+=N:M.push(N)}}return M.map(R=>R.replace(C," ")).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(_){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&_&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(_){const y=this._getMouseBufferCoords(_),D=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(D&&M&&y)&&this._areCoordsInSelection(y,D,M)}isCellInSelection(_,y){const D=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!D||!M)&&this._areCoordsInSelection([_,y],D,M)}_areCoordsInSelection(_,y,D){return _[1]>y[1]&&_[1]<D[1]||y[1]===D[1]&&_[1]===y[1]&&_[0]>=y[0]&&_[0]<D[0]||y[1]<D[1]&&_[1]===D[1]&&_[0]<D[0]||y[1]<D[1]&&_[1]===y[1]&&_[0]>=y[0]}_selectWordAtCursor(_,y){var D,M;const R=(M=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||M===void 0?void 0:M.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const x=this._getMouseBufferCoords(_);return!!x&&(this._selectWordAt(x,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(_,y){this._model.clearSelection(),_=Math.max(_,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,_],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(_){this._model.handleTrim(_)&&this.refresh()}_getMouseBufferCoords(_){const y=this._mouseService.getCoords(_,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(_){let y=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,_,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=D?0:(y>D&&(y-=D),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(_){return o.isMac?_.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:_.shiftKey}handleMouseDown(_){if(this._mouseDownTimeStamp=_.timeStamp,(_.button!==2||!this.hasSelection)&&_.button===0){if(!this._enabled){if(!this.shouldForceSelection(_))return;_.stopPropagation()}_.preventDefault(),this._dragScrollAmount=0,this._enabled&&_.shiftKey?this._handleIncrementalClick(_):_.detail===1?this._handleSingleClick(_):_.detail===2?this._handleDoubleClick(_):_.detail===3&&this._handleTripleClick(_),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(_){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(_))}_handleSingleClick(_){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(_)?3:0,this._model.selectionStart=this._getMouseBufferCoords(_),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(_){this._selectWordAtCursor(_,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(_){const y=this._getMouseBufferCoords(_);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(_){return _.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(_){if(_.stopImmediatePropagation(),!this._model.selectionStart)return;const y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(_),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(_),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const M=D.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const _=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(_.ydisp+this._bufferService.rows,_.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=_.ydisp),this.refresh()}}_handleMouseUp(_){const y=_.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&_.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(_,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const M=(0,v.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const _=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,D=!(!_||!y||_[0]===y[0]&&_[1]===y[1]);D?_&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&_[0]===this._oldSelectionStart[0]&&_[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(_,y,D)):this._oldHasSelection&&this._fireOnSelectionChange(_,y,D)}_fireOnSelectionChange(_,y,D){this._oldSelectionStart=_,this._oldSelectionEnd=y,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(_){this.clearSelection(),this._trimListener.dispose(),this._trimListener=_.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(_,y){let D=y;for(let M=0;y>=M;M++){const R=_.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:R>1&&y!==M&&(D+=R-1)}return D}setSelection(_,y,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[_,y],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(_){this._isClickInSelection(_)||(this._selectWordAtCursor(_,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(_,y,D=!0,M=!0){if(_[0]>=this._bufferService.cols)return;const R=this._bufferService.buffer,x=R.lines.get(_[1]);if(!x)return;const N=R.translateBufferLineToString(_[1],!1);let $=this._convertViewportColToCharacterIndex(x,_[0]),U=$;const W=_[0]-$;let L=0,k=0,O=0,B=0;if(N.charAt($)===" "){for(;$>0&&N.charAt($-1)===" ";)$--;for(;U<N.length&&N.charAt(U+1)===" ";)U++}else{let Y=_[0],q=_[0];x.getWidth(Y)===0&&(L++,Y--),x.getWidth(q)===2&&(k++,q++);const ee=x.getString(q).length;for(ee>1&&(B+=ee-1,U+=ee-1);Y>0&&$>0&&!this._isCharWordSeparator(x.loadCell(Y-1,this._workCell));){x.loadCell(Y-1,this._workCell);const T=this._workCell.getChars().length;this._workCell.getWidth()===0?(L++,Y--):T>1&&(O+=T-1,$-=T-1),$--,Y--}for(;q<x.length&&U+1<N.length&&!this._isCharWordSeparator(x.loadCell(q+1,this._workCell));){x.loadCell(q+1,this._workCell);const T=this._workCell.getChars().length;this._workCell.getWidth()===2?(k++,q++):T>1&&(B+=T-1,U+=T-1),U++,q++}}U++;let j=$+W-L+O,z=Math.min(this._bufferService.cols,U-$+L+k-O-B);if(y||N.slice($,U).trim()!==""){if(D&&j===0&&x.getCodePoint(0)!==32){const Y=R.lines.get(_[1]-1);if(Y&&x.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const q=this._getWordAt([this._bufferService.cols-1,_[1]-1],!1,!0,!1);if(q){const ee=this._bufferService.cols-q.start;j-=ee,z+=ee}}}if(M&&j+z===this._bufferService.cols&&x.getCodePoint(this._bufferService.cols-1)!==32){const Y=R.lines.get(_[1]+1);if(Y!=null&&Y.isWrapped&&Y.getCodePoint(0)!==32){const q=this._getWordAt([0,_[1]+1],!1,!1,!0);q&&(z+=q.length)}}return{start:j,length:z}}}_selectWordAt(_,y){const D=this._getWordAt(_,y);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,_[1]--;this._model.selectionStart=[D.start,_[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(_){const y=this._getWordAt(_,!0);if(y){let D=_[1];for(;y.start<0;)y.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,D]}}_isCharWordSeparator(_){return _.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(_.getChars())>=0}_selectLineAt(_){const y=this._bufferService.buffer.getWrappedRangeForLine(_),D={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(D,this._bufferService.cols)}};r.SelectionService=w=d([f(3,u.IBufferService),f(4,u.ICoreService),f(5,b.IMouseService),f(6,u.IOptionsService),f(7,b.IRenderService),f(8,b.ICoreBrowserService)],w)},4725:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;const d=c(8343);r.ICharSizeService=(0,d.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),r.IMouseService=(0,d.createDecorator)("MouseService"),r.IRenderService=(0,d.createDecorator)("RenderService"),r.ISelectionService=(0,d.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,d.createDecorator)("ThemeService")},6731:function(E,r,c){var d=this&&this.__decorate||function(w,_,y,D){var M,R=arguments.length,x=R<3?_:D===null?D=Object.getOwnPropertyDescriptor(_,y):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(w,_,y,D);else for(var N=w.length-1;N>=0;N--)(M=w[N])&&(x=(R<3?M(x):R>3?M(_,y,x):M(_,y))||x);return R>3&&x&&Object.defineProperty(_,y,x),x},f=this&&this.__param||function(w,_){return function(y,D){_(y,D,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;const l=c(7239),v=c(8055),S=c(8460),b=c(844),g=c(2585),s=v.css.toColor("#ffffff"),o=v.css.toColor("#000000"),n=v.css.toColor("#ffffff"),a=v.css.toColor("#000000"),u={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const w=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],_=[0,95,135,175,215,255];for(let y=0;y<216;y++){const D=_[y/36%6|0],M=_[y/6%6|0],R=_[y%6];w.push({css:v.channels.toCss(D,M,R),rgba:v.channels.toRgba(D,M,R)})}for(let y=0;y<24;y++){const D=8+10*y;w.push({css:v.channels.toCss(D,D,D),rgba:v.channels.toRgba(D,D,D)})}return w})());let p=r.ThemeService=class extends b.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:s,background:o,cursor:n,cursorAccent:a,selectionForeground:void 0,selectionBackgroundTransparent:u,selectionBackgroundOpaque:v.color.blend(o,u),selectionInactiveBackgroundTransparent:u,selectionInactiveBackgroundOpaque:v.color.blend(o,u),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){const _=this._colors;if(_.foreground=C(w.foreground,s),_.background=C(w.background,o),_.cursor=C(w.cursor,n),_.cursorAccent=C(w.cursorAccent,a),_.selectionBackgroundTransparent=C(w.selectionBackground,u),_.selectionBackgroundOpaque=v.color.blend(_.background,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundTransparent=C(w.selectionInactiveBackground,_.selectionBackgroundTransparent),_.selectionInactiveBackgroundOpaque=v.color.blend(_.background,_.selectionInactiveBackgroundTransparent),_.selectionForeground=w.selectionForeground?C(w.selectionForeground,v.NULL_COLOR):void 0,_.selectionForeground===v.NULL_COLOR&&(_.selectionForeground=void 0),v.color.isOpaque(_.selectionBackgroundTransparent)&&(_.selectionBackgroundTransparent=v.color.opacity(_.selectionBackgroundTransparent,.3)),v.color.isOpaque(_.selectionInactiveBackgroundTransparent)&&(_.selectionInactiveBackgroundTransparent=v.color.opacity(_.selectionInactiveBackgroundTransparent,.3)),_.ansi=r.DEFAULT_ANSI_COLORS.slice(),_.ansi[0]=C(w.black,r.DEFAULT_ANSI_COLORS[0]),_.ansi[1]=C(w.red,r.DEFAULT_ANSI_COLORS[1]),_.ansi[2]=C(w.green,r.DEFAULT_ANSI_COLORS[2]),_.ansi[3]=C(w.yellow,r.DEFAULT_ANSI_COLORS[3]),_.ansi[4]=C(w.blue,r.DEFAULT_ANSI_COLORS[4]),_.ansi[5]=C(w.magenta,r.DEFAULT_ANSI_COLORS[5]),_.ansi[6]=C(w.cyan,r.DEFAULT_ANSI_COLORS[6]),_.ansi[7]=C(w.white,r.DEFAULT_ANSI_COLORS[7]),_.ansi[8]=C(w.brightBlack,r.DEFAULT_ANSI_COLORS[8]),_.ansi[9]=C(w.brightRed,r.DEFAULT_ANSI_COLORS[9]),_.ansi[10]=C(w.brightGreen,r.DEFAULT_ANSI_COLORS[10]),_.ansi[11]=C(w.brightYellow,r.DEFAULT_ANSI_COLORS[11]),_.ansi[12]=C(w.brightBlue,r.DEFAULT_ANSI_COLORS[12]),_.ansi[13]=C(w.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),_.ansi[14]=C(w.brightCyan,r.DEFAULT_ANSI_COLORS[14]),_.ansi[15]=C(w.brightWhite,r.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){const y=Math.min(_.ansi.length-16,w.extendedAnsi.length);for(let D=0;D<y;D++)_.ansi[D+16]=C(w.extendedAnsi[D],r.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let _=0;_<this._restoreColors.ansi.length;++_)this._colors.ansi[_]=this._restoreColors.ansi[_]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(w,_){if(w!==void 0)try{return v.css.toColor(w)}catch{}return _}r.ThemeService=p=d([f(0,g.IOptionsService)],p)},6349:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;const d=c(8460),f=c(844);class l extends f.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const b=new Array(S);for(let g=0;g<Math.min(S,this.length);g++)b[g]=this._array[this._getCyclicIndex(g)];this._array=b,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let b=this._length;b<S;b++)this._array[b]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,b){this._array[this._getCyclicIndex(S)]=b}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,b,...g){if(b){for(let s=S;s<this._length-b;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+b)];this._length-=b,this.onDeleteEmitter.fire({index:S,amount:b})}for(let s=this._length-1;s>=S;s--)this._array[this._getCyclicIndex(s+g.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<g.length;s++)this._array[this._getCyclicIndex(S+s)]=g[s];if(g.length&&this.onInsertEmitter.fire({index:S,amount:g.length}),this._length+g.length>this._maxLength){const s=this._length+g.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=g.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,b,g){if(!(b<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let o=b-1;o>=0;o--)this.set(S+o+g,this.get(S+o));const s=S+b+g-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<b;s++)this.set(S+s+g,this.get(S+s))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}r.CircularList=l},1439:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function c(d,f=5){if(typeof d!="object")return d;const l=Array.isArray(d)?[]:{};for(const v in d)l[v]=f<=1?d[v]:d[v]&&c(d[v],f-1);return l}},8055:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;const d=c(6114);let f=0,l=0,v=0,S=0;var b,g,s,o,n;function a(p){const C=p.toString(16);return C.length<2?"0"+C:C}function u(p,C){return p<C?(C+.05)/(p+.05):(p+.05)/(C+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(p){p.toCss=function(C,w,_,y){return y!==void 0?`#${a(C)}${a(w)}${a(_)}${a(y)}`:`#${a(C)}${a(w)}${a(_)}`},p.toRgba=function(C,w,_,y=255){return(C<<24|w<<16|_<<8|y)>>>0}}(b||(r.channels=b={})),function(p){function C(w,_){return S=Math.round(255*_),[f,l,v]=n.toChannels(w.rgba),{css:b.toCss(f,l,v,S),rgba:b.toRgba(f,l,v,S)}}p.blend=function(w,_){if(S=(255&_.rgba)/255,S===1)return{css:_.css,rgba:_.rgba};const y=_.rgba>>24&255,D=_.rgba>>16&255,M=_.rgba>>8&255,R=w.rgba>>24&255,x=w.rgba>>16&255,N=w.rgba>>8&255;return f=R+Math.round((y-R)*S),l=x+Math.round((D-x)*S),v=N+Math.round((M-N)*S),{css:b.toCss(f,l,v),rgba:b.toRgba(f,l,v)}},p.isOpaque=function(w){return(255&w.rgba)==255},p.ensureContrastRatio=function(w,_,y){const D=n.ensureContrastRatio(w.rgba,_.rgba,y);if(D)return n.toColor(D>>24&255,D>>16&255,D>>8&255)},p.opaque=function(w){const _=(255|w.rgba)>>>0;return[f,l,v]=n.toChannels(_),{css:b.toCss(f,l,v),rgba:_}},p.opacity=C,p.multiplyOpacity=function(w,_){return S=255&w.rgba,C(w,S*_/255)},p.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(g||(r.color=g={})),function(p){let C,w;if(!d.isNode){const _=document.createElement("canvas");_.width=1,_.height=1;const y=_.getContext("2d",{willReadFrequently:!0});y&&(C=y,C.globalCompositeOperation="copy",w=C.createLinearGradient(0,0,1,1))}p.toColor=function(_){if(_.match(/#[\da-f]{3,8}/i))switch(_.length){case 4:return f=parseInt(_.slice(1,2).repeat(2),16),l=parseInt(_.slice(2,3).repeat(2),16),v=parseInt(_.slice(3,4).repeat(2),16),n.toColor(f,l,v);case 5:return f=parseInt(_.slice(1,2).repeat(2),16),l=parseInt(_.slice(2,3).repeat(2),16),v=parseInt(_.slice(3,4).repeat(2),16),S=parseInt(_.slice(4,5).repeat(2),16),n.toColor(f,l,v,S);case 7:return{css:_,rgba:(parseInt(_.slice(1),16)<<8|255)>>>0};case 9:return{css:_,rgba:parseInt(_.slice(1),16)>>>0}}const y=_.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(y)return f=parseInt(y[1]),l=parseInt(y[2]),v=parseInt(y[3]),S=Math.round(255*(y[5]===void 0?1:parseFloat(y[5]))),n.toColor(f,l,v,S);if(!C||!w)throw new Error("css.toColor: Unsupported css format");if(C.fillStyle=w,C.fillStyle=_,typeof C.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(C.fillRect(0,0,1,1),[f,l,v,S]=C.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:b.toRgba(f,l,v,S),css:_}}}(s||(r.css=s={})),function(p){function C(w,_,y){const D=w/255,M=_/255,R=y/255;return .2126*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.7152*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}p.relativeLuminance=function(w){return C(w>>16&255,w>>8&255,255&w)},p.relativeLuminance2=C}(o||(r.rgb=o={})),function(p){function C(_,y,D){const M=_>>24&255,R=_>>16&255,x=_>>8&255;let N=y>>24&255,$=y>>16&255,U=y>>8&255,W=u(o.relativeLuminance2(N,$,U),o.relativeLuminance2(M,R,x));for(;W<D&&(N>0||$>0||U>0);)N-=Math.max(0,Math.ceil(.1*N)),$-=Math.max(0,Math.ceil(.1*$)),U-=Math.max(0,Math.ceil(.1*U)),W=u(o.relativeLuminance2(N,$,U),o.relativeLuminance2(M,R,x));return(N<<24|$<<16|U<<8|255)>>>0}function w(_,y,D){const M=_>>24&255,R=_>>16&255,x=_>>8&255;let N=y>>24&255,$=y>>16&255,U=y>>8&255,W=u(o.relativeLuminance2(N,$,U),o.relativeLuminance2(M,R,x));for(;W<D&&(N<255||$<255||U<255);)N=Math.min(255,N+Math.ceil(.1*(255-N))),$=Math.min(255,$+Math.ceil(.1*(255-$))),U=Math.min(255,U+Math.ceil(.1*(255-U))),W=u(o.relativeLuminance2(N,$,U),o.relativeLuminance2(M,R,x));return(N<<24|$<<16|U<<8|255)>>>0}p.ensureContrastRatio=function(_,y,D){const M=o.relativeLuminance(_>>8),R=o.relativeLuminance(y>>8);if(u(M,R)<D){if(R<M){const $=C(_,y,D),U=u(M,o.relativeLuminance($>>8));if(U<D){const W=w(_,y,D);return U>u(M,o.relativeLuminance(W>>8))?$:W}return $}const x=w(_,y,D),N=u(M,o.relativeLuminance(x>>8));if(N<D){const $=C(_,y,D);return N>u(M,o.relativeLuminance($>>8))?x:$}return x}},p.reduceLuminance=C,p.increaseLuminance=w,p.toChannels=function(_){return[_>>24&255,_>>16&255,_>>8&255,255&_]},p.toColor=function(_,y,D,M){return{css:b.toCss(_,y,D,M),rgba:b.toRgba(_,y,D,M)}}}(n||(r.rgba=n={})),r.toPaddedHex=a,r.contrastRatio=u},8969:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;const d=c(844),f=c(2585),l=c(4348),v=c(7866),S=c(744),b=c(7302),g=c(6975),s=c(8460),o=c(1753),n=c(1480),a=c(7994),u=c(9282),p=c(5435),C=c(5981),w=c(2660);let _=!1;class y extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new s.EventEmitter),this._onScroll.event(M=>{var R;(R=this._onScrollApi)===null||R===void 0||R.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const R in M)this.optionsService.options[R]=M[R]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new s.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new b.OptionsService(M)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(n.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(a.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new p.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,s.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,s.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,s.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,s.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((R,x)=>this._inputHandler.parse(R,x))),this.register((0,s.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,R){this._writeBuffer.write(M,R)}writeSync(M,R){this._logService.logLevel<=f.LogLevelEnum.WARN&&!_&&(this._logService.warn("writeSync is unreliable and will be removed soon."),_=!0),this._writeBuffer.writeSync(M,R)}resize(M,R){isNaN(M)||isNaN(R)||(M=Math.max(M,S.MINIMUM_COLS),R=Math.max(R,S.MINIMUM_ROWS),this._bufferService.resize(M,R))}scroll(M,R=!1){this._bufferService.scroll(M,R)}scrollLines(M,R,x){this._bufferService.scrollLines(M,R,x)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const R=M-this._bufferService.buffer.ydisp;R!==0&&this.scrollLines(R)}registerEscHandler(M,R){return this._inputHandler.registerEscHandler(M,R)}registerDcsHandler(M,R){return this._inputHandler.registerDcsHandler(M,R)}registerCsiHandler(M,R){return this._inputHandler.registerCsiHandler(M,R)}registerOscHandler(M,R){return this._inputHandler.registerOscHandler(M,R)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const R=this.optionsService.rawOptions.windowsPty;R&&R.buildNumber!==void 0&&R.buildNumber!==void 0?M=R.backend==="conpty"&&R.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(u.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,u.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)(()=>{for(const R of M)R.dispose()})}}}r.CoreTerminal=y},8460:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===c)return void this._listeners.splice(d,1)}}})),this._event}fire(c,d){const f=[];for(let l=0;l<this._listeners.length;l++)f.push(this._listeners[l]);for(let l=0;l<f.length;l++)f[l].call(void 0,c,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(c,d){return c(f=>d.fire(f))}},5435:function(E,r,c){var d=this&&this.__decorate||function(W,L,k,O){var B,j=arguments.length,z=j<3?L:O===null?O=Object.getOwnPropertyDescriptor(L,k):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(W,L,k,O);else for(var Y=W.length-1;Y>=0;Y--)(B=W[Y])&&(z=(j<3?B(z):j>3?B(L,k,z):B(L,k))||z);return j>3&&z&&Object.defineProperty(L,k,z),z},f=this&&this.__param||function(W,L){return function(k,O){L(k,O,W)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;const l=c(2584),v=c(7116),S=c(2015),b=c(844),g=c(482),s=c(8437),o=c(8460),n=c(643),a=c(511),u=c(3734),p=c(2585),C=c(6242),w=c(6351),_=c(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},D=131072;function M(W,L){if(W>24)return L.setWinLines||!1;switch(W){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var R;(function(W){W[W.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",W[W.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(r.WindowsOptionsReportType=R={}));let x=0;class N extends b.Disposable{getAttrData(){return this._curAttrData}constructor(L,k,O,B,j,z,Y,q,ee=new S.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=k,this._coreService=O,this._logService=B,this._optionsService=j,this._oscLinkService=z,this._coreMouseService=Y,this._unicodeService=q,this._parser=ee,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new a.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new $(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,P)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:P.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,P,F)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:P,data:F})}),this._parser.setDcsHandlerFallback((T,P,F)=>{P==="HOOK"&&(F=F.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:P,payload:F})}),this._parser.setPrintHandler((T,P,F)=>this.print(T,P,F)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new C.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new C.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new C.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new C.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new C.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new C.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new C.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new C.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new C.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new C.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new C.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new C.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((T,P)=>this.requestStatusString(T,P)))}_preserveStack(L,k,O,B){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=k,this._parseStack.decodedLength=O,this._parseStack.position=B}_logSlowResolvingAsync(L){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([L,new Promise((k,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(k=>{if(k!=="#SLOW_TIMEOUT")throw k;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,k){let O,B=this._activeBuffer.x,j=this._activeBuffer.y,z=0;const Y=this._parseStack.paused;if(Y){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,k))return this._logSlowResolvingAsync(O),O;B=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>D&&(z=this._parseStack.position+D)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,q=>String.fromCharCode(q)).join("")}"`),typeof L=="string"?L.split("").map(q=>q.charCodeAt(0)):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<D&&(this._parseBuffer=new Uint32Array(Math.min(L.length,D))),Y||this._dirtyRowTracker.clearRange(),L.length>D)for(let q=z;q<L.length;q+=D){const ee=q+D<L.length?q+D:L.length,T=typeof L=="string"?this._stringDecoder.decode(L.substring(q,ee),this._parseBuffer):this._utf8Decoder.decode(L.subarray(q,ee),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,T))return this._preserveStack(B,j,T,q),this._logSlowResolvingAsync(O),O}else if(!Y){const q=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,q))return this._preserveStack(B,j,q,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===B&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(L,k,O){let B,j;const z=this._charsetService.charset,Y=this._optionsService.rawOptions.screenReaderMode,q=this._bufferService.cols,ee=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,P=this._curAttrData;let F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-k>0&&F.getWidth(this._activeBuffer.x-1)===2&&F.setCellFromCodePoint(this._activeBuffer.x-1,0,1,P.fg,P.bg,P.extended);for(let H=k;H<O;++H){if(B=L[H],j=this._unicodeService.wcwidth(B),B<127&&z){const X=z[String.fromCharCode(B)];X&&(B=X.charCodeAt(0))}if(Y&&this._onA11yChar.fire((0,g.stringFromCodePoint)(B)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=q){if(ee){for(;this._activeBuffer.x<q;)F.setCellFromCodePoint(this._activeBuffer.x++,0,1,P.fg,P.bg,P.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=q-1,j===2)continue}if(T&&(F.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(P),P),F.getWidth(q-1)===2&&F.setCellFromCodePoint(q-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,P.fg,P.bg,P.extended)),F.setCellFromCodePoint(this._activeBuffer.x++,B,j,P.fg,P.bg,P.extended),j>0)for(;--j;)F.setCellFromCodePoint(this._activeBuffer.x++,0,0,P.fg,P.bg,P.extended)}else F.getWidth(this._activeBuffer.x-1)?F.addCodepointToCell(this._activeBuffer.x-1,B):F.addCodepointToCell(this._activeBuffer.x-2,B)}O-k>0&&(F.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<q&&O-k>0&&F.getWidth(this._activeBuffer.x)===0&&!F.hasContent(this._activeBuffer.x)&&F.setCellFromCodePoint(this._activeBuffer.x,0,1,P.fg,P.bg,P.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,k){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,k):this._parser.registerCsiHandler(L,O=>!M(O.params[0],this._optionsService.rawOptions.windowOptions)||k(O))}registerDcsHandler(L,k){return this._parser.registerDcsHandler(L,new w.DcsHandler(k))}registerEscHandler(L,k){return this._parser.registerEscHandler(L,k)}registerOscHandler(L,k){return this._parser.registerOscHandler(L,new C.OscHandler(k))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||L===void 0)&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,k){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+k):(this._activeBuffer.x=L,this._activeBuffer.y=k),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,k){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+k)}cursorUp(L){const k=this._activeBuffer.y-this._activeBuffer.scrollTop;return k>=0?this._moveCursor(0,-Math.min(k,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const k=this._activeBuffer.scrollBottom-this._activeBuffer.y;return k>=0?this._moveCursor(0,Math.min(k,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const k=L.params[0];return k===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:k===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=L.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=L.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const k=L.params[0];return k===1&&(this._curAttrData.bg|=536870912),k!==2&&k!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,k,O,B=!1,j=!1){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);z.replaceCells(k,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),j),B&&(z.isWrapped=!1)}_resetBufferLine(L,k=!1){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);O&&(O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),k),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),O.isWrapped=!1)}eraseInDisplay(L,k=!1){let O;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);O<this._bufferService.rows;O++)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,k),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(0);break;case 3:const B=this._activeBuffer.lines.length-this._bufferService.rows;B>0&&(this._activeBuffer.lines.trimStart(B),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-B,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-B,0),this._onScroll.fire(0))}return!0}eraseInLine(L,k=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,k);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,k)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let k=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y,B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-B+1;for(;k--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let k=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y;let B;for(B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,B=this._bufferService.rows-1+this._activeBuffer.ybase-B;k--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let k=L.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let k=L.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.deleteCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.insertCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.insertCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const k=L.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.deleteCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){if(!this._parser.precedingCodepoint)return!0;const k=L.params[0]||1,O=new Uint32Array(k);for(let B=0;B<k;++B)O[B]=this._parser.precedingCodepoint;return this.print(O,0,O.length),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let k=0;k<L.length;k++)switch(L.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[k]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,k){const O=this._coreService.decPrivateModes,{activeProtocol:B,activeEncoding:j}=this._coreMouseService,z=this._coreService,{buffers:Y,cols:q}=this._bufferService,{active:ee,alt:T}=Y,P=this._optionsService.rawOptions,F=Q=>Q?1:2,H=L.params[0];return X=H,K=k?H===2?4:H===4?F(z.modes.insertMode):H===12?3:H===20?F(P.convertEol):0:H===1?F(O.applicationCursorKeys):H===3?P.windowOptions.setWinLines?q===80?2:q===132?1:0:0:H===6?F(O.origin):H===7?F(O.wraparound):H===8?3:H===9?F(B==="X10"):H===12?F(P.cursorBlink):H===25?F(!z.isCursorHidden):H===45?F(O.reverseWraparound):H===66?F(O.applicationKeypad):H===67?4:H===1e3?F(B==="VT200"):H===1002?F(B==="DRAG"):H===1003?F(B==="ANY"):H===1004?F(O.sendFocus):H===1005?4:H===1006?F(j==="SGR"):H===1015?4:H===1016?F(j==="SGR_PIXELS"):H===1048?1:H===47||H===1047||H===1049?F(ee===T):H===2004?F(O.bracketedPasteMode):0,z.triggerDataEvent(`${l.C0.ESC}[${k?"":"?"}${X};${K}$y`),!0;var X,K}_updateAttrColor(L,k,O,B,j){return k===2?(L|=50331648,L&=-16777216,L|=u.AttributeData.fromColorRGB([O,B,j])):k===5&&(L&=-50331904,L|=33554432|255&O),L}_extractColor(L,k,O){const B=[0,0,-1,0,0,0];let j=0,z=0;do{if(B[z+j]=L.params[k+z],L.hasSubParams(k+z)){const Y=L.getSubParams(k+z);let q=0;do B[1]===5&&(j=1),B[z+q+1+j]=Y[q];while(++q<Y.length&&q+z+1+j<B.length);break}if(B[1]===5&&z+j>=2||B[1]===2&&z+j>=5)break;B[1]&&(j=1)}while(++z+k<L.length&&z+j<B.length);for(let Y=2;Y<B.length;++Y)B[Y]===-1&&(B[Y]=0);switch(B[0]){case 38:O.fg=this._updateAttrColor(O.fg,B[1],B[3],B[4],B[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,B[1],B[3],B[4],B[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,B[1],B[3],B[4],B[5])}return z}_processUnderline(L,k){k.extended=k.extended.clone(),(!~L||L>5)&&(L=1),k.extended.underlineStyle=L,k.fg|=268435456,L===0&&(k.fg&=-268435457),k.updateExtended()}_processSGR0(L){L.fg=s.DEFAULT_ATTR_DATA.fg,L.bg=s.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const k=L.length;let O;const B=this._curAttrData;for(let j=0;j<k;j++)O=L.params[j],O>=30&&O<=37?(B.fg&=-50331904,B.fg|=16777216|O-30):O>=40&&O<=47?(B.bg&=-50331904,B.bg|=16777216|O-40):O>=90&&O<=97?(B.fg&=-50331904,B.fg|=16777224|O-90):O>=100&&O<=107?(B.bg&=-50331904,B.bg|=16777224|O-100):O===0?this._processSGR0(B):O===1?B.fg|=134217728:O===3?B.bg|=67108864:O===4?(B.fg|=268435456,this._processUnderline(L.hasSubParams(j)?L.getSubParams(j)[0]:1,B)):O===5?B.fg|=536870912:O===7?B.fg|=67108864:O===8?B.fg|=1073741824:O===9?B.fg|=2147483648:O===2?B.bg|=134217728:O===21?this._processUnderline(2,B):O===22?(B.fg&=-134217729,B.bg&=-134217729):O===23?B.bg&=-67108865:O===24?(B.fg&=-268435457,this._processUnderline(0,B)):O===25?B.fg&=-536870913:O===27?B.fg&=-67108865:O===28?B.fg&=-1073741825:O===29?B.fg&=2147483647:O===39?(B.fg&=-67108864,B.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):O===49?(B.bg&=-67108864,B.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?j+=this._extractColor(L,j,B):O===53?B.bg|=1073741824:O===55?B.bg&=-1073741825:O===59?(B.extended=B.extended.clone(),B.extended.underlineColor=-1,B.updateExtended()):O===100?(B.fg&=-67108864,B.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,B.bg&=-67108864,B.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:const k=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${k};${O}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const k=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${k};${O}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const k=L.params[0]||1;switch(k){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const O=k%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(L){const k=L.params[0]||1;let O;return(L.length<2||(O=L.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>k&&(this._activeBuffer.scrollTop=k-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(L){if(!M(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const k=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:k!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:k!==0&&k!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),k!==0&&k!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:k!==0&&k!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),k!==0&&k!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const k=[],O=L.split(";");for(;O.length>1;){const B=O.shift(),j=O.shift();if(/^\d+$/.exec(B)){const z=parseInt(B);if(U(z))if(j==="?")k.push({type:0,index:z});else{const Y=(0,_.parseColor)(j);Y&&k.push({type:1,index:z,color:Y})}}}return k.length&&this._onColor.fire(k),!0}setHyperlink(L){const k=L.split(";");return!(k.length<2)&&(k[1]?this._createHyperlink(k[0],k[1]):!k[0]&&this._finishHyperlink())}_createHyperlink(L,k){this._getCurrentLinkId()&&this._finishHyperlink();const O=L.split(":");let B;const j=O.findIndex(z=>z.startsWith("id="));return j!==-1&&(B=O[j].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:B,uri:k}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,k){const O=L.split(";");for(let B=0;B<O.length&&!(k>=this._specialColors.length);++B,++k)if(O[B]==="?")this._onColor.fire([{type:0,index:this._specialColors[k]}]);else{const j=(0,_.parseColor)(O[B]);j&&this._onColor.fire([{type:1,index:this._specialColors[k],color:j}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const k=[],O=L.split(";");for(let B=0;B<O.length;++B)if(/^\d+$/.exec(O[B])){const j=parseInt(O[B]);U(j)&&k.push({type:2,index:j})}return k.length&&this._onColor.fire(k),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(y[L[0]],v.CHARSETS[L[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new a.CellData;L.content=4194304|"E".charCodeAt(0),L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let k=0;k<this._bufferService.rows;++k){const O=this._activeBuffer.ybase+this._activeBuffer.y+k,B=this._activeBuffer.lines.get(O);B&&(B.fill(L),B.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,k){const O=this._bufferService.buffer,B=this._optionsService.rawOptions;return(j=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${j}${l.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[B.cursorStyle]-(B.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,k){this._dirtyRowTracker.markRangeDirty(L,k)}}r.InputHandler=N;let $=class{constructor(W){this._bufferService=W,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(W){W<this.start?this.start=W:W>this.end&&(this.end=W)}markRangeDirty(W,L){W>L&&(x=W,W=L,L=x),W<this.start&&(this.start=W),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function U(W){return 0<=W&&W<256}$=d([f(0,p.IBufferService)],$)},844:(E,r)=>{function c(d){for(const f of d)f.dispose();d.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const f=this._disposables.indexOf(d);f!==-1&&this._disposables.splice(f,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){var f;this._isDisposed||d===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){var d;this._isDisposed=!0,(d=this._value)===null||d===void 0||d.dispose(),this._value=void 0}},r.toDisposable=function(d){return{dispose:d}},r.disposeArray=c,r.getDisposeArrayDisposable=function(d){return{dispose:()=>c(d)}}},1505:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(f,l,v){this._data[f]||(this._data[f]={}),this._data[f][l]=v}get(f,l){return this._data[f]?this._data[f][l]:void 0}clear(){this._data={}}}r.TwoKeyMap=c,r.FourKeyMap=class{constructor(){this._data=new c}set(d,f,l,v,S){this._data.get(d,f)||this._data.set(d,f,new c),this._data.get(d,f).set(l,v,S)}get(d,f,l,v){var S;return(S=this._data.get(d,f))===null||S===void 0?void 0:S.get(l,v)}clear(){this._data.clear()}}},6114:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";const c=r.isNode?"node":navigator.userAgent,d=r.isNode?"node":navigator.platform;r.isFirefox=c.includes("Firefox"),r.isLegacyEdge=c.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(c),r.getSafariVersion=function(){if(!r.isSafari)return 0;const f=c.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),r.isIpad=d==="iPad",r.isIphone=d==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),r.isLinux=d.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(c)},6106:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let c=0;r.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(c=this._search(this._getKey(d)),this._array.splice(c,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const f=this._getKey(d);if(f===void 0||(c=this._search(f),c===-1)||this._getKey(this._array[c])!==f)return!1;do if(this._array[c]===d)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===f);return!1}*getKeyIterator(d){if(this._array.length!==0&&(c=this._search(d),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===d))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===d)}forEachByKey(d,f){if(this._array.length!==0&&(c=this._search(d),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===d))do f(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===d)}values(){return[...this._array].values()}_search(d){let f=0,l=this._array.length-1;for(;l>=f;){let v=f+l>>1;const S=this._getKey(this._array[v]);if(S>d)l=v-1;else{if(!(S<d)){for(;v>0&&this._getKey(this._array[v-1])===d;)v--;return v}f=v+1}}return f}}},7226:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;const d=c(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let b=0,g=0,s=S.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(b=Date.now(),this._tasks[this._i]()||this._i++,b=Math.max(1,Date.now()-b),g=Math.max(b,g),o=S.timeRemaining(),1.5*g>o)return s-b<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-b))}ms`),void this._start();s=o}this.clear()}}class l extends f{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const b=Date.now()+S;return{timeRemaining:()=>Math.max(0,b-Date.now())}}}r.PriorityTaskQueue=l,r.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:l,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;const d=c(643);r.updateWindowsModeWrappedState=function(f){const l=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),v=l==null?void 0:l.get(f.cols-1),S=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);S&&v&&(S.isWrapped=v[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&v[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){const l=new c;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=c;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,v=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=v}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=d},9092:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;const d=c(6349),f=c(7226),l=c(3734),v=c(8437),S=c(4634),b=c(511),g=c(643),s=c(4863),o=c(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(n,a,u){this._hasScrollback=n,this._optionsService=a,this._bufferService=u,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=b.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=b.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,a){return new v.BufferLine(this._bufferService.cols,this.getNullCell(n),a)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const a=n+this._optionsService.rawOptions.scrollback;return a>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:a}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=v.DEFAULT_ATTR_DATA);let a=this._rows;for(;a--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,a){const u=this.getNullCell(v.DEFAULT_ATTR_DATA);let p=0;const C=this._getCorrectBufferLength(a);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<n)for(let _=0;_<this.lines.length;_++)p+=+this.lines.get(_).resize(n,u);let w=0;if(this._rows<a)for(let _=this._rows;_<a;_++)this.lines.length<a+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(n,u)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(n,u)));else for(let _=this._rows;_>a;_--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const _=this.lines.length-C;_>0&&(this.lines.trimStart(_),this.ybase=Math.max(this.ybase-_,0),this.ydisp=Math.max(this.ydisp-_,0),this.savedY=Math.max(this.savedY-_,0)),this.lines.maxLength=C}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,a-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(n,a),this._cols>n))for(let w=0;w<this.lines.length;w++)p+=+this.lines.get(w).resize(n,u);this._cols=n,this._rows=a,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let a=0;for(;this._memoryCleanupPosition<this.lines.length;)if(a+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),a>100)return!0;return n}get _isReflowEnabled(){const n=this._optionsService.rawOptions.windowsPty;return n&&n.buildNumber?this._hasScrollback&&n.backend==="conpty"&&n.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,a){this._cols!==n&&(n>this._cols?this._reflowLarger(n,a):this._reflowSmaller(n,a))}_reflowLarger(n,a){const u=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(u.length>0){const p=(0,S.reflowLargerCreateNewLayout)(this.lines,u);(0,S.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(n,a,p.countRemoved)}}_reflowLargerAdjustViewport(n,a,u){const p=this.getNullCell(v.DEFAULT_ATTR_DATA);let C=u;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new v.BufferLine(n,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-u,0)}_reflowSmaller(n,a){const u=this.getNullCell(v.DEFAULT_ATTR_DATA),p=[];let C=0;for(let w=this.lines.length-1;w>=0;w--){let _=this.lines.get(w);if(!_||!_.isWrapped&&_.getTrimmedLength()<=n)continue;const y=[_];for(;_.isWrapped&&w>0;)_=this.lines.get(--w),y.unshift(_);const D=this.ybase+this.y;if(D>=w&&D<w+y.length)continue;const M=y[y.length-1].getTrimmedLength(),R=(0,S.reflowSmallerGetNewLineLengths)(y,this._cols,n),x=R.length-y.length;let N;N=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+x):Math.max(0,this.lines.length-this.lines.maxLength+x);const $=[];for(let B=0;B<x;B++){const j=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);$.push(j)}$.length>0&&(p.push({start:w+y.length+C,newLines:$}),C+=$.length),y.push(...$);let U=R.length-1,W=R[U];W===0&&(U--,W=R[U]);let L=y.length-x-1,k=M;for(;L>=0;){const B=Math.min(k,W);if(y[U]===void 0)break;if(y[U].copyCellsFrom(y[L],k-B,W-B,B,!0),W-=B,W===0&&(U--,W=R[U]),k-=B,k===0){L--;const j=Math.max(L,0);k=(0,S.getWrappedLineTrimmedLength)(y,j,this._cols)}}for(let B=0;B<y.length;B++)R[B]<n&&y[B].setCell(R[B],u);let O=x-N;for(;O-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+x,this.ybase+a-1)}if(p.length>0){const w=[],_=[];for(let U=0;U<this.lines.length;U++)_.push(this.lines.get(U));const y=this.lines.length;let D=y-1,M=0,R=p[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let x=0;for(let U=Math.min(this.lines.maxLength-1,y+C-1);U>=0;U--)if(R&&R.start>D+x){for(let W=R.newLines.length-1;W>=0;W--)this.lines.set(U--,R.newLines[W]);U++,w.push({index:D+1,amount:R.newLines.length}),x+=R.newLines.length,R=p[++M]}else this.lines.set(U,_[D--]);let N=0;for(let U=w.length-1;U>=0;U--)w[U].index+=N,this.lines.onInsertEmitter.fire(w[U]),N+=w[U].amount;const $=Math.max(0,y+C-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(n,a,u=0,p){const C=this.lines.get(n);return C?C.translateToString(a,u,p):""}getWrappedRangeForLine(n){let a=n,u=n;for(;a>0&&this.lines.get(a).isWrapped;)a--;for(;u+1<this.lines.length&&this.lines.get(u+1).isWrapped;)u++;return{first:a,last:u}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].line===n&&(this.markers[a].dispose(),this.markers.splice(a--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const a=new s.Marker(n);return this.markers.push(a),a.register(this.lines.onTrim(u=>{a.line-=u,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(u=>{a.line>=u.index&&(a.line+=u.amount)})),a.register(this.lines.onDelete(u=>{a.line>=u.index&&a.line<u.index+u.amount&&a.dispose(),a.line>u.index&&(a.line-=u.amount)})),a.register(a.onDispose(()=>this._removeMarker(a))),a}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}}},8437:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;const d=c(3734),f=c(511),l=c(643),v=c(482);r.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let S=0;class b{constructor(s,o,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);const a=o||f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let u=0;u<s;++u)this.setCell(u,a);this.length=s}get(s){const o=this._data[3*s+0],n=2097151&o;return[this._data[3*s+1],2097152&o?this._combined[s]:n?(0,v.stringFromCodePoint)(n):"",o>>22,2097152&o?this._combined[s].charCodeAt(this._combined[s].length-1):n]}set(s,o){this._data[3*s+1]=o[l.CHAR_DATA_ATTR_INDEX],o[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=o[1],this._data[3*s+0]=2097152|s|o[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=o[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(s){return this._data[3*s+0]>>22}hasWidth(s){return 12582912&this._data[3*s+0]}getFg(s){return this._data[3*s+1]}getBg(s){return this._data[3*s+2]}hasContent(s){return 4194303&this._data[3*s+0]}getCodePoint(s){const o=this._data[3*s+0];return 2097152&o?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&o}isCombined(s){return 2097152&this._data[3*s+0]}getString(s){const o=this._data[3*s+0];return 2097152&o?this._combined[s]:2097151&o?(0,v.stringFromCodePoint)(2097151&o):""}isProtected(s){return 536870912&this._data[3*s+2]}loadCell(s,o){return S=3*s,o.content=this._data[S+0],o.fg=this._data[S+1],o.bg=this._data[S+2],2097152&o.content&&(o.combinedData=this._combined[s]),268435456&o.bg&&(o.extended=this._extendedAttrs[s]),o}setCell(s,o){2097152&o.content&&(this._combined[s]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[s]=o.extended),this._data[3*s+0]=o.content,this._data[3*s+1]=o.fg,this._data[3*s+2]=o.bg}setCellFromCodePoint(s,o,n,a,u,p){268435456&u&&(this._extendedAttrs[s]=p),this._data[3*s+0]=o|n<<22,this._data[3*s+1]=a,this._data[3*s+2]=u}addCodepointToCell(s,o){let n=this._data[3*s+0];2097152&n?this._combined[s]+=(0,v.stringFromCodePoint)(o):(2097151&n?(this._combined[s]=(0,v.stringFromCodePoint)(2097151&n)+(0,v.stringFromCodePoint)(o),n&=-2097152,n|=2097152):n=o|4194304,this._data[3*s+0]=n)}insertCells(s,o,n,a){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),o<this.length-s){const u=new f.CellData;for(let p=this.length-s-o-1;p>=0;--p)this.setCell(s+o+p,this.loadCell(s+p,u));for(let p=0;p<o;++p)this.setCell(s+p,n)}else for(let u=s;u<this.length;++u)this.setCell(u,n);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs)}deleteCells(s,o,n,a){if(s%=this.length,o<this.length-s){const u=new f.CellData;for(let p=0;p<this.length-s-o;++p)this.setCell(s+p,this.loadCell(s+o+p,u));for(let p=this.length-o;p<this.length;++p)this.setCell(p,n)}else for(let u=s;u<this.length;++u)this.setCell(u,n);s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodePoint(s,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs)}replaceCells(s,o,n,a,u=!1){if(u)for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodePoint(o,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs);s<o&&s<this.length;)this.isProtected(s)||this.setCell(s,n),s++;else for(s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new d.ExtendedAttrs);s<o&&s<this.length;)this.setCell(s++,n)}resize(s,o){if(s===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const n=3*s;if(s>this.length){if(this._data.buffer.byteLength>=4*n)this._data=new Uint32Array(this._data.buffer,0,n);else{const a=new Uint32Array(n);a.set(this._data),this._data=a}for(let a=this.length;a<s;++a)this.setCell(a,o)}else{this._data=this._data.subarray(0,n);const a=Object.keys(this._combined);for(let p=0;p<a.length;p++){const C=parseInt(a[p],10);C>=s&&delete this._combined[C]}const u=Object.keys(this._extendedAttrs);for(let p=0;p<u.length;p++){const C=parseInt(u[p],10);C>=s&&delete this._extendedAttrs[C]}}return this.length=s,4*n*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,o=!1){if(o)for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,s);else{this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,s)}}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(const o in s._combined)this._combined[o]=s._combined[o];this._extendedAttrs={};for(const o in s._extendedAttrs)this._extendedAttrs[o]=s._extendedAttrs[o];this.isWrapped=s.isWrapped}clone(){const s=new b(0);s._data=new Uint32Array(this._data),s.length=this.length;for(const o in this._combined)s._combined[o]=this._combined[o];for(const o in this._extendedAttrs)s._extendedAttrs[o]=this._extendedAttrs[o];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0]||50331648&this._data[3*s+2])return s+(this._data[3*s+0]>>22);return 0}copyCellsFrom(s,o,n,a,u){const p=s._data;if(u)for(let w=a-1;w>=0;w--){for(let _=0;_<3;_++)this._data[3*(n+w)+_]=p[3*(o+w)+_];268435456&p[3*(o+w)+2]&&(this._extendedAttrs[n+w]=s._extendedAttrs[o+w])}else for(let w=0;w<a;w++){for(let _=0;_<3;_++)this._data[3*(n+w)+_]=p[3*(o+w)+_];268435456&p[3*(o+w)+2]&&(this._extendedAttrs[n+w]=s._extendedAttrs[o+w])}const C=Object.keys(s._combined);for(let w=0;w<C.length;w++){const _=parseInt(C[w],10);_>=o&&(this._combined[_-o+n]=s._combined[_])}}translateToString(s=!1,o=0,n=this.length){s&&(n=Math.min(n,this.getTrimmedLength()));let a="";for(;o<n;){const u=this._data[3*o+0],p=2097151&u;a+=2097152&u?this._combined[o]:p?(0,v.stringFromCodePoint)(p):l.WHITESPACE_CELL_CHAR,o+=u>>22||1}return a}}r.BufferLine=b},4841:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(c,d){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return d*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(E,r)=>{function c(d,f,l){if(f===d.length-1)return d[f].getTrimmedLength();const v=!d[f].hasContent(l-1)&&d[f].getWidth(l-1)===1,S=d[f+1].getWidth(0)===2;return v&&S?l-1:l}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(d,f,l,v,S){const b=[];for(let g=0;g<d.length-1;g++){let s=g,o=d.get(++s);if(!o.isWrapped)continue;const n=[d.get(g)];for(;s<d.length&&o.isWrapped;)n.push(o),o=d.get(++s);if(v>=g&&v<s){g+=n.length-1;continue}let a=0,u=c(n,a,f),p=1,C=0;for(;p<n.length;){const _=c(n,p,f),y=_-C,D=l-u,M=Math.min(y,D);n[a].copyCellsFrom(n[p],C,u,M,!1),u+=M,u===l&&(a++,u=0),C+=M,C===_&&(p++,C=0),u===0&&a!==0&&n[a-1].getWidth(l-1)===2&&(n[a].copyCellsFrom(n[a-1],l-1,u++,1,!1),n[a-1].setCell(l-1,S))}n[a].replaceCells(u,l,S);let w=0;for(let _=n.length-1;_>0&&(_>a||n[_].getTrimmedLength()===0);_--)w++;w>0&&(b.push(g+n.length-w),b.push(w)),g+=n.length-1}return b},r.reflowLargerCreateNewLayout=function(d,f){const l=[];let v=0,S=f[v],b=0;for(let g=0;g<d.length;g++)if(S===g){const s=f[++v];d.onDeleteEmitter.fire({index:g-b,amount:s}),g+=s-1,b+=s,S=f[++v]}else l.push(g);return{layout:l,countRemoved:b}},r.reflowLargerApplyNewLayout=function(d,f){const l=[];for(let v=0;v<f.length;v++)l.push(d.get(f[v]));for(let v=0;v<l.length;v++)d.set(v,l[v]);d.length=f.length},r.reflowSmallerGetNewLineLengths=function(d,f,l){const v=[],S=d.map((o,n)=>c(d,n,f)).reduce((o,n)=>o+n);let b=0,g=0,s=0;for(;s<S;){if(S-s<l){v.push(S-s);break}b+=l;const o=c(d,g,f);b>o&&(b-=o,g++);const n=d[g].getWidth(b-1)===2;n&&b--;const a=n?l-1:l;v.push(a),s+=a}return v},r.getWrappedLineTrimmedLength=c},5295:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;const d=c(8460),f=c(844),l=c(9092);class v extends f.Disposable{constructor(b,g){super(),this._optionsService=b,this._bufferService=g,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(b){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(b),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(b,g){this._normal.resize(b,g),this._alt.resize(b,g),this.setupTabStops(b)}setupTabStops(b){this._normal.setupTabStops(b),this._alt.setupTabStops(b)}}r.BufferSet=v},511:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;const d=c(482),f=c(643),l=c(3734);class v extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(b){const g=new v;return g.setFromCharData(b),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(b){this.fg=b[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(b[f.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(b[f.CHAR_DATA_CHAR_INDEX].length===2){const s=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const o=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(s-55296)+o-56320+65536|b[f.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=b[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[f.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=b[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=v},643:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;const d=c(8460),f=c(844);class l{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}r.Marker=l,l._nextId=1},7116:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},r.CHARSETS.A={"#":""},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},r.CHARSETS.C=r.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},r.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},r.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.E=r.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},r.CHARSETS.H=r.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},r.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(E,r)=>{var c,d,f;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL=""}(c||(r.C0=c={})),function(l){l.PAD="",l.HOP="",l.BPH="",l.NBH="",l.IND="",l.NEL="",l.SSA="",l.ESA="",l.HTS="",l.HTJ="",l.VTS="",l.PLD="",l.PLU="",l.RI="",l.SS2="",l.SS3="",l.DCS="",l.PU1="",l.PU2="",l.STS="",l.CCH="",l.MW="",l.SPA="",l.EPA="",l.SOS="",l.SGCI="",l.SCI="",l.CSI="",l.ST="",l.OSC="",l.PM="",l.APC=""}(d||(r.C1=d={})),function(l){l.ST=`${c.ESC}\\`}(f||(r.C1_ESCAPED=f={}))},7399:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;const d=c(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(l,v,S,b){const g={type:0,cancel:!1,key:void 0},s=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?g.key=v?d.C0.ESC+"OA":d.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?g.key=v?d.C0.ESC+"OD":d.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?g.key=v?d.C0.ESC+"OC":d.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(g.key=v?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(l.altKey){g.key=d.C0.ESC+d.C0.DEL;break}g.key=d.C0.DEL;break;case 9:if(l.shiftKey){g.key=d.C0.ESC+"[Z";break}g.key=d.C0.HT,g.cancel=!0;break;case 13:g.key=l.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,g.cancel=!0;break;case 27:g.key=d.C0.ESC,l.altKey&&(g.key=d.C0.ESC+d.C0.ESC),g.cancel=!0;break;case 37:if(l.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"D",g.key===d.C0.ESC+"[1;3D"&&(g.key=d.C0.ESC+(S?"b":"[1;5D"))):g.key=v?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(l.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"C",g.key===d.C0.ESC+"[1;3C"&&(g.key=d.C0.ESC+(S?"f":"[1;5C"))):g.key=v?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(l.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"A",S||g.key!==d.C0.ESC+"[1;3A"||(g.key=d.C0.ESC+"[1;5A")):g.key=v?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(l.metaKey)break;s?(g.key=d.C0.ESC+"[1;"+(s+1)+"B",S||g.key!==d.C0.ESC+"[1;3B"||(g.key=d.C0.ESC+"[1;5B")):g.key=v?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(g.key=d.C0.ESC+"[2~");break;case 46:g.key=s?d.C0.ESC+"[3;"+(s+1)+"~":d.C0.ESC+"[3~";break;case 36:g.key=s?d.C0.ESC+"[1;"+(s+1)+"H":v?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:g.key=s?d.C0.ESC+"[1;"+(s+1)+"F":v?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:l.shiftKey?g.type=2:l.ctrlKey?g.key=d.C0.ESC+"[5;"+(s+1)+"~":g.key=d.C0.ESC+"[5~";break;case 34:l.shiftKey?g.type=3:l.ctrlKey?g.key=d.C0.ESC+"[6;"+(s+1)+"~":g.key=d.C0.ESC+"[6~";break;case 112:g.key=s?d.C0.ESC+"[1;"+(s+1)+"P":d.C0.ESC+"OP";break;case 113:g.key=s?d.C0.ESC+"[1;"+(s+1)+"Q":d.C0.ESC+"OQ";break;case 114:g.key=s?d.C0.ESC+"[1;"+(s+1)+"R":d.C0.ESC+"OR";break;case 115:g.key=s?d.C0.ESC+"[1;"+(s+1)+"S":d.C0.ESC+"OS";break;case 116:g.key=s?d.C0.ESC+"[15;"+(s+1)+"~":d.C0.ESC+"[15~";break;case 117:g.key=s?d.C0.ESC+"[17;"+(s+1)+"~":d.C0.ESC+"[17~";break;case 118:g.key=s?d.C0.ESC+"[18;"+(s+1)+"~":d.C0.ESC+"[18~";break;case 119:g.key=s?d.C0.ESC+"[19;"+(s+1)+"~":d.C0.ESC+"[19~";break;case 120:g.key=s?d.C0.ESC+"[20;"+(s+1)+"~":d.C0.ESC+"[20~";break;case 121:g.key=s?d.C0.ESC+"[21;"+(s+1)+"~":d.C0.ESC+"[21~";break;case 122:g.key=s?d.C0.ESC+"[23;"+(s+1)+"~":d.C0.ESC+"[23~";break;case 123:g.key=s?d.C0.ESC+"[24;"+(s+1)+"~":d.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(S&&!b||!l.altKey||l.metaKey)!S||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?g.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(g.key=d.C0.US),l.key==="@"&&(g.key=d.C0.NUL)):l.keyCode===65&&(g.type=1);else{const o=f[l.keyCode],n=o==null?void 0:o[l.shiftKey?1:0];if(n)g.key=d.C0.ESC+n;else if(l.keyCode>=65&&l.keyCode<=90){const a=l.ctrlKey?l.keyCode-64:l.keyCode+32;let u=String.fromCharCode(a);l.shiftKey&&(u=u.toUpperCase()),g.key=d.C0.ESC+u}else if(l.keyCode===32)g.key=d.C0.ESC+(l.ctrlKey?d.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let a=l.code.slice(3,4);l.shiftKey||(a=a.toLowerCase()),g.key=d.C0.ESC+a,g.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?g.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?g.key=d.C0.NUL:l.keyCode>=51&&l.keyCode<=55?g.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?g.key=d.C0.DEL:l.keyCode===219?g.key=d.C0.ESC:l.keyCode===220?g.key=d.C0.FS:l.keyCode===221&&(g.key=d.C0.GS)}return g}},482:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},r.utf32ToString=function(c,d=0,f=c.length){let l="";for(let v=d;v<f;++v){let S=c[v];S>65535?(S-=65536,l+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):l+=String.fromCharCode(S)}return l},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,d){const f=c.length;if(!f)return 0;let l=0,v=0;if(this._interim){const S=c.charCodeAt(v++);56320<=S&&S<=57343?d[l++]=1024*(this._interim-55296)+S-56320+65536:(d[l++]=this._interim,d[l++]=S),this._interim=0}for(let S=v;S<f;++S){const b=c.charCodeAt(S);if(55296<=b&&b<=56319){if(++S>=f)return this._interim=b,l;const g=c.charCodeAt(S);56320<=g&&g<=57343?d[l++]=1024*(b-55296)+g-56320+65536:(d[l++]=b,d[l++]=g)}else b!==65279&&(d[l++]=b)}return l}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,d){const f=c.length;if(!f)return 0;let l,v,S,b,g=0,s=0,o=0;if(this.interim[0]){let u=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;let C,w=0;for(;(C=63&this.interim[++w])&&w<4;)p<<=6,p|=C;const _=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=_-w;for(;o<y;){if(o>=f)return 0;if(C=c[o++],(192&C)!=128){o--,u=!0;break}this.interim[w++]=C,p<<=6,p|=63&C}u||(_===2?p<128?o--:d[g++]=p:_===3?p<2048||p>=55296&&p<=57343||p===65279||(d[g++]=p):p<65536||p>1114111||(d[g++]=p)),this.interim.fill(0)}const n=f-4;let a=o;for(;a<f;){for(;!(!(a<n)||128&(l=c[a])||128&(v=c[a+1])||128&(S=c[a+2])||128&(b=c[a+3]));)d[g++]=l,d[g++]=v,d[g++]=S,d[g++]=b,a+=4;if(l=c[a++],l<128)d[g++]=l;else if((224&l)==192){if(a>=f)return this.interim[0]=l,g;if(v=c[a++],(192&v)!=128){a--;continue}if(s=(31&l)<<6|63&v,s<128){a--;continue}d[g++]=s}else if((240&l)==224){if(a>=f)return this.interim[0]=l,g;if(v=c[a++],(192&v)!=128){a--;continue}if(a>=f)return this.interim[0]=l,this.interim[1]=v,g;if(S=c[a++],(192&S)!=128){a--;continue}if(s=(15&l)<<12|(63&v)<<6|63&S,s<2048||s>=55296&&s<=57343||s===65279)continue;d[g++]=s}else if((248&l)==240){if(a>=f)return this.interim[0]=l,g;if(v=c[a++],(192&v)!=128){a--;continue}if(a>=f)return this.interim[0]=l,this.interim[1]=v,g;if(S=c[a++],(192&S)!=128){a--;continue}if(a>=f)return this.interim[0]=l,this.interim[1]=v,this.interim[2]=S,g;if(b=c[a++],(192&b)!=128){a--;continue}if(s=(7&l)<<18|(63&v)<<12|(63&S)<<6|63&b,s<65536||s>1114111)continue;d[g++]=s}}return g}}},225:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;const c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;r.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let l=0;l<c.length;++l)f.fill(0,c[l][0],c[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?f[l]:function(v,S){let b,g=0,s=S.length-1;if(v<S[0][0]||v>S[s][1])return!1;for(;s>=g;)if(b=g+s>>1,v>S[b][1])g=b+1;else{if(!(v<S[b][0]))return!0;s=b-1}return!1}(l,d)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;const d=c(8460),f=c(844);class l extends f.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,b){if(b!==void 0&&this._syncCalls>b)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,b){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(b),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(b)}_innerWrite(S=0,b=!0){const g=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const s=this._writeBuffer[this._bufferOffset],o=this._action(s,b);if(o){const a=u=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,u)):this._innerWrite(g,u);return void o.catch(u=>(queueMicrotask(()=>{throw u}),Promise.resolve(!1))).then(a)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=l},5941:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function f(l,v){const S=l.toString(16),b=S.length<2?"0"+S:S;switch(v){case 4:return S[0];case 8:return b;case 12:return(b+b).slice(0,3);default:return b+b}}r.parseColor=function(l){if(!l)return;let v=l.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const S=c.exec(v);if(S){const b=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/b*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/b*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/b*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),d.exec(v)&&[3,6,9,12].includes(v.length))){const S=v.length/3,b=[0,0,0];for(let g=0;g<3;++g){const s=parseInt(v.slice(S*g,S*g+S),16);b[g]=S===1?s<<4:S===2?s:S===3?s>>4:s>>8}return b}},r.toRgbString=function(l,v=16){const[S,b,g]=l;return`rgb:${f(S,v)}/${f(b,v)}/${f(g,v)}`}},5770:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;const d=c(482),f=c(8742),l=c(5770),v=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(b,g){this._handlers[b]===void 0&&(this._handlers[b]=[]);const s=this._handlers[b];return s.push(g),{dispose:()=>{const o=s.indexOf(g);o!==-1&&s.splice(o,1)}}}clearHandler(b){this._handlers[b]&&delete this._handlers[b]}setHandlerFallback(b){this._handlerFb=b}reset(){if(this._active.length)for(let b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(b,g){if(this.reset(),this._ident=b,this._active=this._handlers[b]||v,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(b,g,s){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(b,g,s);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(b,g,s))}unhook(b,g=!0){if(this._active.length){let s=!1,o=this._active.length-1,n=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,s=g,n=this._stack.fallThrough,this._stack.paused=!1),!n&&s===!1){for(;o>=0&&(s=this._active[o].unhook(b),s!==!0);o--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,s;o--}for(;o>=0;o--)if(s=this._active[o].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",b);this._active=v,this._ident=0}};const S=new f.Params;S.addParam(0),r.DcsHandler=class{constructor(b){this._handler=b,this._data="",this._params=S,this._hitLimit=!1}hook(b){this._params=b.length>1||b.params[0]?b.clone():S,this._data="",this._hitLimit=!1}put(b,g,s){this._hitLimit||(this._data+=(0,d.utf32ToString)(b,g,s),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(b){let g=!1;if(this._hitLimit)g=!1;else if(b&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(s=>(this._params=S,this._data="",this._hitLimit=!1,s));return this._params=S,this._data="",this._hitLimit=!1,g}}},2015:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;const d=c(844),f=c(8742),l=c(6242),v=c(6351);class S{constructor(o){this.table=new Uint8Array(o)}setDefault(o,n){this.table.fill(o<<4|n)}add(o,n,a,u){this.table[n<<8|o]=a<<4|u}addMany(o,n,a,u){for(let p=0;p<o.length;p++)this.table[n<<8|o[p]]=a<<4|u}}r.TransitionTable=S;const b=160;r.VT500_TRANSITION_TABLE=function(){const s=new S(4095),o=Array.apply(null,Array(256)).map((w,_)=>_),n=(w,_)=>o.slice(w,_),a=n(32,127),u=n(0,24);u.push(25),u.push.apply(u,n(28,32));const p=n(0,14);let C;for(C in s.setDefault(1,0),s.addMany(a,0,2,0),p)s.addMany([24,26,153,154],C,3,0),s.addMany(n(128,144),C,3,0),s.addMany(n(144,152),C,3,0),s.add(156,C,0,0),s.add(27,C,11,1),s.add(157,C,4,8),s.addMany([152,158,159],C,0,7),s.add(155,C,11,3),s.add(144,C,11,9);return s.addMany(u,0,3,0),s.addMany(u,1,3,1),s.add(127,1,0,1),s.addMany(u,8,0,8),s.addMany(u,3,3,3),s.add(127,3,0,3),s.addMany(u,4,3,4),s.add(127,4,0,4),s.addMany(u,6,3,6),s.addMany(u,5,3,5),s.add(127,5,0,5),s.addMany(u,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(a,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(n(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(a,7,0,7),s.addMany(u,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(n(64,127),3,7,0),s.addMany(n(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(n(48,60),4,8,4),s.addMany(n(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(n(32,64),6,0,6),s.add(127,6,0,6),s.addMany(n(64,127),6,0,0),s.addMany(n(32,48),3,9,5),s.addMany(n(32,48),5,9,5),s.addMany(n(48,64),5,0,6),s.addMany(n(64,127),5,7,0),s.addMany(n(32,48),4,9,5),s.addMany(n(32,48),1,9,2),s.addMany(n(32,48),2,9,2),s.addMany(n(48,127),2,10,0),s.addMany(n(48,80),1,10,0),s.addMany(n(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(n(96,127),1,10,0),s.add(80,1,11,9),s.addMany(u,9,0,9),s.add(127,9,0,9),s.addMany(n(28,32),9,0,9),s.addMany(n(32,48),9,9,12),s.addMany(n(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(u,11,0,11),s.addMany(n(32,128),11,0,11),s.addMany(n(28,32),11,0,11),s.addMany(u,10,0,10),s.add(127,10,0,10),s.addMany(n(28,32),10,0,10),s.addMany(n(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(n(32,48),10,9,12),s.addMany(u,12,0,12),s.add(127,12,0,12),s.addMany(n(28,32),12,0,12),s.addMany(n(32,48),12,9,12),s.addMany(n(48,64),12,0,11),s.addMany(n(64,127),12,12,13),s.addMany(n(64,127),10,12,13),s.addMany(n(64,127),9,12,13),s.addMany(u,13,13,13),s.addMany(a,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(b,0,2,0),s.add(b,8,5,8),s.add(b,6,0,6),s.add(b,11,0,11),s.add(b,13,13,13),s}();class g extends d.Disposable{constructor(o=r.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(n,a,u)=>{},this._executeHandlerFb=n=>{},this._csiHandlerFb=(n,a)=>{},this._escHandlerFb=n=>{},this._errorHandlerFb=n=>n,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,n=[64,126]){let a=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(a=o.prefix.charCodeAt(0),a&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let p=0;p<o.intermediates.length;++p){const C=o.intermediates.charCodeAt(p);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=C}}if(o.final.length!==1)throw new Error("final must be a single byte");const u=o.final.charCodeAt(0);if(n[0]>u||u>n[1])throw new Error(`final must be in range ${n[0]} .. ${n[1]}`);return a<<=8,a|=u,a}identToString(o){const n=[];for(;o;)n.push(String.fromCharCode(255&o)),o>>=8;return n.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,n){const a=this._identifier(o,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);const u=this._escHandlers[a];return u.push(n),{dispose:()=>{const p=u.indexOf(n);p!==-1&&u.splice(p,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,n){this._executeHandlers[o.charCodeAt(0)]=n}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,n){const a=this._identifier(o);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);const u=this._csiHandlers[a];return u.push(n),{dispose:()=>{const p=u.indexOf(n);p!==-1&&u.splice(p,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,n){return this._dcsParser.registerHandler(this._identifier(o),n)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,n){return this._oscParser.registerHandler(o,n)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,n,a,u,p){this._parseStack.state=o,this._parseStack.handlers=n,this._parseStack.handlerPos=a,this._parseStack.transition=u,this._parseStack.chunkPos=p}parse(o,n,a){let u,p=0,C=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const _=this._parseStack.handlers;let y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&y>-1){for(;y>=0&&(u=_[y](this._params),u!==!0);y--)if(u instanceof Promise)return this._parseStack.handlerPos=y,u}this._parseStack.handlers=[];break;case 4:if(a===!1&&y>-1){for(;y>=0&&(u=_[y](),u!==!0);y--)if(u instanceof Promise)return this._parseStack.handlerPos=y,u}this._parseStack.handlers=[];break;case 6:if(p=o[this._parseStack.chunkPos],u=this._dcsParser.unhook(p!==24&&p!==26,a),u)return u;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=o[this._parseStack.chunkPos],u=this._oscParser.end(p!==24&&p!==26,a),u)return u;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let _=w;_<n;++_){switch(p=o[_],C=this._transitions.table[this.currentState<<8|(p<160?p:b)],C>>4){case 2:for(let x=_+1;;++x){if(x>=n||(p=o[x])<32||p>126&&p<b){this._printHandler(o,_,x),_=x-1;break}if(++x>=n||(p=o[x])<32||p>126&&p<b){this._printHandler(o,_,x),_=x-1;break}if(++x>=n||(p=o[x])<32||p>126&&p<b){this._printHandler(o,_,x),_=x-1;break}if(++x>=n||(p=o[x])<32||p>126&&p<b){this._printHandler(o,_,x),_=x-1;break}}break;case 3:this._executeHandlers[p]?this._executeHandlers[p]():this._executeHandlerFb(p),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:p,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const y=this._csiHandlers[this._collect<<8|p];let D=y?y.length-1:-1;for(;D>=0&&(u=y[D](this._params),u!==!0);D--)if(u instanceof Promise)return this._preserveStack(3,y,D,C,_),u;D<0&&this._csiHandlerFb(this._collect<<8|p,this._params),this.precedingCodepoint=0;break;case 8:do switch(p){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(p-48)}while(++_<n&&(p=o[_])>47&&p<60);_--;break;case 9:this._collect<<=8,this._collect|=p;break;case 10:const M=this._escHandlers[this._collect<<8|p];let R=M?M.length-1:-1;for(;R>=0&&(u=M[R](),u!==!0);R--)if(u instanceof Promise)return this._preserveStack(4,M,R,C,_),u;R<0&&this._escHandlerFb(this._collect<<8|p),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|p,this._params);break;case 13:for(let x=_+1;;++x)if(x>=n||(p=o[x])===24||p===26||p===27||p>127&&p<b){this._dcsParser.put(o,_,x),_=x-1;break}break;case 14:if(u=this._dcsParser.unhook(p!==24&&p!==26),u)return this._preserveStack(6,[],0,C,_),u;p===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let x=_+1;;x++)if(x>=n||(p=o[x])<32||p>127&&p<b){this._oscParser.put(o,_,x),_=x-1;break}break;case 6:if(u=this._oscParser.end(p!==24&&p!==26),u)return this._preserveStack(5,[],0,C,_),u;p===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&C}}}r.EscapeSequenceParser=g},6242:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;const d=c(5770),f=c(482),l=[];r.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,S){this._handlers[v]===void 0&&(this._handlers[v]=[]);const b=this._handlers[v];return b.push(S),{dispose:()=>{const g=b.indexOf(S);g!==-1&&b.splice(g,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,S,b){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(v,S,b);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(v,S,b))}start(){this.reset(),this._state=1}put(v,S,b){if(this._state!==3){if(this._state===1)for(;S<b;){const g=v[S++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&b-S>0&&this._put(v,S,b)}}end(v,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let b=!1,g=this._active.length-1,s=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,b=S,s=this._stack.fallThrough,this._stack.paused=!1),!s&&b===!1){for(;g>=0&&(b=this._active[g].end(v),b!==!0);g--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,b;g--}for(;g>=0;g--)if(b=this._active[g].end(!1),b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",v);this._active=l,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,S,b){this._hitLimit||(this._data+=(0,f.utf32ToString)(v,S,b),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let S=!1;if(this._hitLimit)S=!1;else if(v&&(S=this._handler(this._data),S instanceof Promise))return S.then(b=>(this._data="",this._hitLimit=!1,b));return this._data="",this._hitLimit=!1,S}}},8742:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;const c=2147483647;class d{static fromArray(l){const v=new d;if(!l.length)return v;for(let S=Array.isArray(l[0])?1:0;S<l.length;++S){const b=l[S];if(Array.isArray(b))for(let g=0;g<b.length;++g)v.addSubParam(b[g]);else v.addParam(b)}return v}constructor(l=32,v=32){if(this.maxLength=l,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const l=new d(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){const l=[];for(let v=0;v<this.length;++v){l.push(this.params[v]);const S=this._subParamsIdx[v]>>8,b=255&this._subParamsIdx[v];b-S>0&&l.push(Array.prototype.slice.call(this._subParams,S,b))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>c?c:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>c?c:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){const v=this._subParamsIdx[l]>>8,S=255&this._subParamsIdx[l];return S-v>0?this._subParams.subarray(v,S):null}getSubParamsAll(){const l={};for(let v=0;v<this.length;++v){const S=this._subParamsIdx[v]>>8,b=255&this._subParamsIdx[v];b-S>0&&(l[v]=this._subParams.slice(S,b))}return l}addDigit(l){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,b=S[v-1];S[v-1]=~b?Math.min(10*b+l,c):l}}r.Params=d},5741:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,d){const f={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(f),d.dispose=()=>this._wrappedAddonDispose(f),d.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let d=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===c){d=f;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(d,1)}}},8771:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;const d=c(3785),f=c(511);r.BufferApiView=class{constructor(l,v){this._buffer=l,this.type=v}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){const v=this._buffer.lines.get(l);if(v)return new d.BufferLineApiView(v)}getNullCell(){return new f.CellData}}},3785:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;const d=c(511);r.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,l){if(!(f<0||f>=this._line.length))return l?(this._line.loadCell(f,l),l):this._line.loadCell(f,new d.CellData)}translateToString(f,l,v){return this._line.translateToString(f,l,v)}}},8285:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;const d=c(8771),f=c(8460),l=c(844);class v extends l.Disposable{constructor(b){super(),this._core=b,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=v},7975:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,d){return this._core.registerCsiHandler(c,f=>d(f.toArray()))}addCsiHandler(c,d){return this.registerCsiHandler(c,d)}registerDcsHandler(c,d){return this._core.registerDcsHandler(c,(f,l)=>d(f,l.toArray()))}addDcsHandler(c,d){return this.registerDcsHandler(c,d)}registerEscHandler(c,d){return this._core.registerEscHandler(c,d)}addEscHandler(c,d){return this.registerEscHandler(c,d)}registerOscHandler(c,d){return this._core.registerOscHandler(c,d)}addOscHandler(c,d){return this.registerOscHandler(c,d)}}},7090:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(E,r,c){var d=this&&this.__decorate||function(s,o,n,a){var u,p=arguments.length,C=p<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,o,n,a);else for(var w=s.length-1;w>=0;w--)(u=s[w])&&(C=(p<3?u(C):p>3?u(o,n,C):u(o,n))||C);return p>3&&C&&Object.defineProperty(o,n,C),C},f=this&&this.__param||function(s,o){return function(n,a){o(n,a,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;const l=c(8460),v=c(844),S=c(5295),b=c(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let g=r.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(s){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(s.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(s.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(s,this))}resize(s,o){this.cols=s,this.rows=o,this.buffers.resize(s,o),this._onResize.fire({cols:s,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(s,o=!1){const n=this.buffer;let a;a=this._cachedBlankLine,a&&a.length===this.cols&&a.getFg(0)===s.fg&&a.getBg(0)===s.bg||(a=n.getBlankLine(s,o),this._cachedBlankLine=a),a.isWrapped=o;const u=n.ybase+n.scrollTop,p=n.ybase+n.scrollBottom;if(n.scrollTop===0){const C=n.lines.isFull;p===n.lines.length-1?C?n.lines.recycle().copyFrom(a):n.lines.push(a.clone()):n.lines.splice(p+1,0,a.clone()),C?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{const C=p-u+1;n.lines.shiftElements(u+1,C-1,-1),n.lines.set(p,a.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(s,o,n){const a=this.buffer;if(s<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else s+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);const u=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+s,a.ybase),0),u!==a.ydisp&&(o||this._onScroll.fire(a.ydisp))}};r.BufferService=g=d([f(0,b.IOptionsService)],g)},7994:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,d){this._charsets[c]=d,this.glevel===c&&(this.charset=d)}}},1753:function(E,r,c){var d=this&&this.__decorate||function(a,u,p,C){var w,_=arguments.length,y=_<3?u:C===null?C=Object.getOwnPropertyDescriptor(u,p):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,u,p,C);else for(var D=a.length-1;D>=0;D--)(w=a[D])&&(y=(_<3?w(y):_>3?w(u,p,y):w(u,p))||y);return _>3&&y&&Object.defineProperty(u,p,y),y},f=this&&this.__param||function(a,u){return function(p,C){u(p,C,a)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;const l=c(2585),v=c(8460),S=c(844),b={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:a=>a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)},VT200:{events:19,restrict:a=>a.action!==32},DRAG:{events:23,restrict:a=>a.action!==32||a.button!==3},ANY:{events:31,restrict:a=>!0}};function g(a,u){let p=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(p|=64,p|=a.action):(p|=3&a.button,4&a.button&&(p|=64),8&a.button&&(p|=128),a.action===32?p|=32:a.action!==0||u||(p|=3)),p}const s=String.fromCharCode,o={DEFAULT:a=>{const u=[g(a,!1)+32,a.col+32,a.row+32];return u[0]>255||u[1]>255||u[2]>255?"":`\x1B[M${s(u[0])}${s(u[1])}${s(u[2])}`},SGR:a=>{const u=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${g(a,!0)};${a.col};${a.row}${u}`},SGR_PIXELS:a=>{const u=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${g(a,!0)};${a.x};${a.y}${u}`}};let n=r.CoreMouseService=class extends S.Disposable{constructor(a,u){super(),this._bufferService=a,this._coreService=u,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const p of Object.keys(b))this.addProtocol(p,b[p]);for(const p of Object.keys(o))this.addEncoding(p,o[p]);this.reset()}addProtocol(a,u){this._protocols[a]=u}addEncoding(a,u){this._encodings[a]=u}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(a){if(!this._protocols[a])throw new Error(`unknown protocol "${a}"`);this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(a){if(!this._encodings[a])throw new Error(`unknown encoding "${a}"`);this._activeEncoding=a}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,a,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(a))return!1;const u=this._encodings[this._activeEncoding](a);return u&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(u):this._coreService.triggerDataEvent(u,!0)),this._lastEvent=a,!0}explainEvents(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}}_equalEvents(a,u,p){if(p){if(a.x!==u.x||a.y!==u.y)return!1}else if(a.col!==u.col||a.row!==u.row)return!1;return a.button===u.button&&a.action===u.action&&a.ctrl===u.ctrl&&a.alt===u.alt&&a.shift===u.shift}};r.CoreMouseService=n=d([f(0,l.IBufferService),f(1,l.ICoreService)],n)},6975:function(E,r,c){var d=this&&this.__decorate||function(n,a,u,p){var C,w=arguments.length,_=w<3?a:p===null?p=Object.getOwnPropertyDescriptor(a,u):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(n,a,u,p);else for(var y=n.length-1;y>=0;y--)(C=n[y])&&(_=(w<3?C(_):w>3?C(a,u,_):C(a,u))||_);return w>3&&_&&Object.defineProperty(a,u,_),_},f=this&&this.__param||function(n,a){return function(u,p){a(u,p,n)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;const l=c(1439),v=c(8460),S=c(844),b=c(2585),g=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=r.CoreService=class extends S.Disposable{constructor(n,a,u){super(),this._bufferService=n,this._logService=a,this._optionsService=u,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(g),this.decPrivateModes=(0,l.clone)(s)}reset(){this.modes=(0,l.clone)(g),this.decPrivateModes=(0,l.clone)(s)}triggerDataEvent(n,a=!1){if(this._optionsService.rawOptions.disableStdin)return;const u=this._bufferService.buffer;a&&this._optionsService.rawOptions.scrollOnUserInput&&u.ybase!==u.ydisp&&this._onRequestScrollToBottom.fire(),a&&this._onUserInput.fire(),this._logService.debug(`sending data "${n}"`,()=>n.split("").map(p=>p.charCodeAt(0))),this._onData.fire(n)}triggerBinaryEvent(n){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${n}"`,()=>n.split("").map(a=>a.charCodeAt(0))),this._onBinary.fire(n))}};r.CoreService=o=d([f(0,b.IBufferService),f(1,b.ILogService),f(2,b.IOptionsService)],o)},9074:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;const d=c(8055),f=c(8460),l=c(844),v=c(6106);let S=0,b=0;class g extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(n=>n==null?void 0:n.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(n){if(n.marker.isDisposed)return;const a=new s(n);if(a){const u=a.marker.onDispose(()=>a.dispose());a.onDispose(()=>{a&&(this._decorations.delete(a)&&this._onDecorationRemoved.fire(a),u.dispose())}),this._decorations.insert(a),this._onDecorationRegistered.fire(a)}return a}reset(){for(const n of this._decorations.values())n.dispose();this._decorations.clear()}*getDecorationsAtCell(n,a,u){var p,C,w;let _=0,y=0;for(const D of this._decorations.getKeyIterator(a))_=(p=D.options.x)!==null&&p!==void 0?p:0,y=_+((C=D.options.width)!==null&&C!==void 0?C:1),n>=_&&n<y&&(!u||((w=D.options.layer)!==null&&w!==void 0?w:"bottom")===u)&&(yield D)}forEachDecorationAtCell(n,a,u,p){this._decorations.forEachByKey(a,C=>{var w,_,y;S=(w=C.options.x)!==null&&w!==void 0?w:0,b=S+((_=C.options.width)!==null&&_!==void 0?_:1),n>=S&&n<b&&(!u||((y=C.options.layer)!==null&&y!==void 0?y:"bottom")===u)&&p(C)})}}r.DecorationService=g;class s extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(n){super(),this.options=n,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=n.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;const d=c(2585),f=c(8343);class l{constructor(...S){this._entries=new Map;for(const[b,g]of S)this.set(b,g)}set(S,b){const g=this._entries.get(S);return this._entries.set(S,b),g}forEach(S){for(const[b,g]of this._entries.entries())S(b,g)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}r.ServiceCollection=l,r.InstantiationService=class{constructor(){this._services=new l,this._services.set(d.IInstantiationService,this)}setService(v,S){this._services.set(v,S)}getService(v){return this._services.get(v)}createInstance(v,...S){const b=(0,f.getServiceDependencies)(v).sort((o,n)=>o.index-n.index),g=[];for(const o of b){const n=this._services.get(o.id);if(!n)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${o.id}.`);g.push(n)}const s=b.length>0?b[0].index:S.length;if(S.length!==s)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${s+1} conflicts with ${S.length} static arguments`);return new v(...S,...g)}}},7866:function(E,r,c){var d=this&&this.__decorate||function(s,o,n,a){var u,p=arguments.length,C=p<3?o:a===null?a=Object.getOwnPropertyDescriptor(o,n):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(s,o,n,a);else for(var w=s.length-1;w>=0;w--)(u=s[w])&&(C=(p<3?u(C):p>3?u(o,n,C):u(o,n))||C);return p>3&&C&&Object.defineProperty(o,n,C),C},f=this&&this.__param||function(s,o){return function(n,a){o(n,a,s)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;const l=c(844),v=c(2585),S={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let b,g=r.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),b=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let o=0;o<s.length;o++)typeof s[o]=="function"&&(s[o]=s[o]())}_log(s,o,n){this._evalLazyOptionalParams(n),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...n)}trace(s,...o){var n,a;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.trace.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,s,o)}debug(s,...o){var n,a;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.debug.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,s,o)}info(s,...o){var n,a;this._logLevel<=v.LogLevelEnum.INFO&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.info.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.info,s,o)}warn(s,...o){var n,a;this._logLevel<=v.LogLevelEnum.WARN&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.warn.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.warn,s,o)}error(s,...o){var n,a;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((a=(n=this._optionsService.options.logger)===null||n===void 0?void 0:n.error.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.error,s,o)}};r.LogService=g=d([f(0,v.IOptionsService)],g),r.setTraceLogger=function(s){b=s},r.traceCall=function(s,o,n){if(typeof n.value!="function")throw new Error("not supported");const a=n.value;n.value=function(...u){if(b.logLevel!==v.LogLevelEnum.TRACE)return a.apply(this,u);b.trace(`GlyphRenderer#${a.name}(${u.map(C=>JSON.stringify(C)).join(", ")})`);const p=a.apply(this,u);return b.trace(`GlyphRenderer#${a.name} return`,p),p}}},7302:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;const d=c(8460),f=c(844),l=c(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends f.Disposable{constructor(g){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const s=Object.assign({},r.DEFAULT_OPTIONS);for(const o in g)if(o in s)try{const n=g[o];s[o]=this._sanitizeAndValidateOption(o,n)}catch(n){console.error(n)}this.rawOptions=s,this.options=Object.assign({},s),this._setupOptions()}onSpecificOptionChange(g,s){return this.onOptionChange(o=>{o===g&&s(this.rawOptions[g])})}onMultipleOptionChange(g,s){return this.onOptionChange(o=>{g.indexOf(o)!==-1&&s()})}_setupOptions(){const g=o=>{if(!(o in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},s=(o,n)=>{if(!(o in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);n=this._sanitizeAndValidateOption(o,n),this.rawOptions[o]!==n&&(this.rawOptions[o]=n,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const n={get:g.bind(this,o),set:s.bind(this,o)};Object.defineProperty(this.options,o,n)}}_sanitizeAndValidateOption(g,s){switch(g){case"cursorStyle":if(s||(s=r.DEFAULT_OPTIONS[g]),!function(o){return o==="block"||o==="underline"||o==="bar"}(s))throw new Error(`"${s}" is not a valid value for ${g}`);break;case"wordSeparator":s||(s=r.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=v.includes(s)?s:r.DEFAULT_OPTIONS[g];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${g} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${g} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{}}return s}}r.OptionsService=S},2660:function(E,r,c){var d=this&&this.__decorate||function(S,b,g,s){var o,n=arguments.length,a=n<3?b:s===null?s=Object.getOwnPropertyDescriptor(b,g):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(S,b,g,s);else for(var u=S.length-1;u>=0;u--)(o=S[u])&&(a=(n<3?o(a):n>3?o(b,g,a):o(b,g))||a);return n>3&&a&&Object.defineProperty(b,g,a),a},f=this&&this.__param||function(S,b){return function(g,s){b(g,s,S)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;const l=c(2585);let v=r.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const b=this._bufferService.buffer;if(S.id===void 0){const u=b.addMarker(b.ybase+b.y),p={data:S,id:this._nextId++,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(p,u)),this._dataByLinkId.set(p.id,p),p.id}const g=S,s=this._getEntryIdKey(g),o=this._entriesWithId.get(s);if(o)return this.addLineToLink(o.id,b.ybase+b.y),o.id;const n=b.addMarker(b.ybase+b.y),a={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(a,n)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(S,b){const g=this._dataByLinkId.get(S);if(g&&g.lines.every(s=>s.line!==b)){const s=this._bufferService.buffer.addMarker(b);g.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(g,s))}}getLinkData(S){var b;return(b=this._dataByLinkId.get(S))===null||b===void 0?void 0:b.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,b){const g=S.lines.indexOf(b);g!==-1&&(S.lines.splice(g,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};r.OscLinkService=v=d([f(0,l.IBufferService)],v)},8343:(E,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;const c="di$target",d="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(f){return f[d]||[]},r.createDecorator=function(f){if(r.serviceRegistry.has(f))return r.serviceRegistry.get(f);const l=function(v,S,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,s,o){s[c]===s?s[d].push({id:g,index:o}):(s[d]=[{id:g,index:o}],s[c]=s)})(l,v,b)};return l.toString=()=>f,r.serviceRegistry.set(f,l),l}},2585:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;const d=c(8343);var f;r.IBufferService=(0,d.createDecorator)("BufferService"),r.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),r.ICoreService=(0,d.createDecorator)("CoreService"),r.ICharsetService=(0,d.createDecorator)("CharsetService"),r.IInstantiationService=(0,d.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(f||(r.LogLevelEnum=f={})),r.ILogService=(0,d.createDecorator)("LogService"),r.IOptionsService=(0,d.createDecorator)("OptionsService"),r.IOscLinkService=(0,d.createDecorator)("OscLinkService"),r.IUnicodeService=(0,d.createDecorator)("UnicodeService"),r.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(E,r,c)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;const d=c(8460),f=c(225);r.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const l=new f.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let v=0;const S=l.length;for(let b=0;b<S;++b){let g=l.charCodeAt(b);if(55296<=g&&g<=56319){if(++b>=S)return v+this.wcwidth(g);const s=l.charCodeAt(b);56320<=s&&s<=57343?g=1024*(g-55296)+s-56320+65536:v+=this.wcwidth(s)}v+=this.wcwidth(g)}return v}}}},h={};function m(E){var r=h[E];if(r!==void 0)return r.exports;var c=h[E]={exports:{}};return i[E].call(c.exports,c,c.exports,m),c.exports}var A={};return(()=>{var E=A;Object.defineProperty(E,"__esModule",{value:!0}),E.Terminal=void 0;const r=m(9042),c=m(3236),d=m(844),f=m(5741),l=m(8285),v=m(7975),S=m(7090),b=["cols","rows"];class g extends d.Disposable{constructor(o){super(),this._core=this.register(new c.Terminal(o)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const n=u=>this._core.options[u],a=(u,p)=>{this._checkReadonlyOptions(u),this._core.options[u]=p};for(const u in this._core.options){const p={get:n.bind(this,u),set:a.bind(this,u)};Object.defineProperty(this._publicOptions,u,p)}}_checkReadonlyOptions(o){if(b.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const n in o)this._publicOptions[n]=o[n]}blur(){this._core.blur()}focus(){this._core.focus()}resize(o,n){this._verifyIntegers(o,n),this._core.resize(o,n)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){var n,a,u;return this._checkProposedApi(),this._verifyPositiveIntegers((n=o.x)!==null&&n!==void 0?n:0,(a=o.width)!==null&&a!==void 0?a:0,(u=o.height)!==null&&u!==void 0?u:0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,n,a){this._verifyIntegers(o,n,a),this._core.select(o,n,a)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,n){this._verifyIntegers(o,n),this._core.selectLines(o,n)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,n){this._core.write(o,n)}writeln(o,n){this._core.write(o),this._core.write(`\r
`,n)}paste(o){this._core.paste(o)}refresh(o,n){this._verifyIntegers(o,n),this._core.refresh(o,n)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return r}_verifyIntegers(...o){for(const n of o)if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const n of o)if(n&&(n===1/0||isNaN(n)||n%1!=0||n<0))throw new Error("This API only accepts positive integers")}}E.Terminal=g})(),A})())})(Un);var Au=Un.exports;document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("xterm-container");if(t){const e=new Au.Terminal({theme:{background:"#000000",foreground:"#00FF00"},rows:15});e.open(t),e.write(`Welcome to SSH SRV902-VPS 
\r`),e.write(`Ubuntu Server 20.04.06 Enterprise
\r`),e.write("login: "),e.onKey(({key:i})=>{e.write(i)})}});
